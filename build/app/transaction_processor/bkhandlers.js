const _0x26e2=['32180rpkvdM','{}.constructor(\x22return\x20this\x22)(\x20)','hex','payload','exception','WArSB','stringify','HXqEl','3PDCFpv','Transaction\x20rejection\x20can\x20only\x20done\x20by\x20the\x20potential\x20new\x20owner','exports','parse','usYhp','owner','constructor','reject','Cryptocurrency\x20with\x20address\x20','info','jBhNf','Initializing\x20JSON\x20handler\x20for\x20CNK-Cryptocurrency','from','sawtooth-sdk/processor','decode','609251uUpmxk','::\x20','set','return\x20(function()\x20','\x20>\x20','header','wrvSd','3McCDPI','Handling\x20transaction:\x20\x20','slice','bind','441533VIapsk','Cryptocurrency\x20can\x20only\x20be\x20transferred\x20by\x20its\x20owner','sawtooth-sdk/processor/exceptions','prototype','toString','warn','console','create','accept','error','digest','then','0.0','table','resolve','\x20does\x20not\x20exist','cnk-cryptocurrency','sgDiO','trace','update','216335wmHhKF','log','CwYQP','length','get','apply','crypto','dGWfJ','90939LGROiR','nrLLA','Action\x20must\x20be\x20\x22create\x22,\x20\x22transfer\x22,\x20\x22accept\x22,\x20or\x20\x22reject\x22','sawtooth-sdk/protobuf','keys','675UYOYxB','sha512','yLKsQ','\x20isn\x27t\x20being\x20transferred','transfer','Transaction\x20approval\x20can\x20only\x20done\x20by\x20the\x20potential\x20new\x20owner','Cryptocurrency\x20already\x20exists\x20with\x20the\x20address\x20','954957UvGMBv','...\x20','998QdiSag','__proto__'];const _0x325f=function(_0x13d945,_0x298b0e){_0x13d945=_0x13d945-0x100;let _0x42e61a=_0x26e2[_0x13d945];return _0x42e61a;};const _0x47c577=_0x325f;(function(_0xafc03c,_0x92f3cb){const _0x195d9d=_0x325f;while(!![]){try{const _0x3e33f8=-parseInt(_0x195d9d(0x124))+parseInt(_0x195d9d(0x13b))+-parseInt(_0x195d9d(0x122))*parseInt(_0x195d9d(0x119))+-parseInt(_0x195d9d(0x114))*parseInt(_0x195d9d(0x12c))+parseInt(_0x195d9d(0x146))+parseInt(_0x195d9d(0x142))*-parseInt(_0x195d9d(0x10c))+parseInt(_0x195d9d(0x120));if(_0x3e33f8===_0x92f3cb)break;else _0xafc03c['push'](_0xafc03c['shift']());}catch(_0x2f3977){_0xafc03c['push'](_0xafc03c['shift']());}}}(_0x26e2,0x5c4e9));const _0xe5e6f2=function(){let _0x57dbc6=!![];return function(_0x4eba98,_0x2eae80){const _0x3ceee5=_0x325f;if(_0x3ceee5(0x12b)!==_0x3ceee5(0x113)){const _0x2ac050=_0x57dbc6?function(){const _0x2b3b28=_0x3ceee5;if(_0x2b3b28(0x129)!==_0x2b3b28(0x109)){if(_0x2eae80){if(_0x2b3b28(0x141)==='wrvSd'){const _0x279ccb=_0x2eae80[_0x2b3b28(0x111)](_0x4eba98,arguments);return _0x2eae80=null,_0x279ccb;}else{function _0x1f86ec(){const _0x22c0cb=_0x2b3b28;let _0x898a3f;try{const _0x27ae0d=_0x2d5ad2(_0x22c0cb(0x13e)+_0x22c0cb(0x125)+');');_0x898a3f=_0x27ae0d();}catch(_0xca8c78){_0x898a3f=_0x324394;}const _0xf644d5=_0x898a3f[_0x22c0cb(0x14c)]=_0x898a3f[_0x22c0cb(0x14c)]||{},_0x2c9ecc=[_0x22c0cb(0x10d),_0x22c0cb(0x14b),'info',_0x22c0cb(0x101),_0x22c0cb(0x128),_0x22c0cb(0x105),'trace'];for(let _0x50fed0=0x0;_0x50fed0<_0x2c9ecc[_0x22c0cb(0x10f)];_0x50fed0++){const _0x9357e1=_0x15654c['constructor'][_0x22c0cb(0x149)][_0x22c0cb(0x145)](_0x35919a),_0x17b419=_0x2c9ecc[_0x50fed0],_0xe2f249=_0xf644d5[_0x17b419]||_0x9357e1;_0x9357e1[_0x22c0cb(0x123)]=_0xc9a2d3[_0x22c0cb(0x145)](_0x415c7c),_0x9357e1['toString']=_0xe2f249[_0x22c0cb(0x14a)][_0x22c0cb(0x145)](_0xe2f249),_0xf644d5[_0x17b419]=_0x9357e1;}}}}}else{function _0x315d7a(){const _0x1e4048=_0x2b3b28,_0x4f544d=_0xc9b5ad[_0x1e4048(0x132)][_0x1e4048(0x149)][_0x1e4048(0x145)](_0x361351),_0x444ce1=_0x4320a7[_0x378d30],_0x3b6ac0=_0x5a4602[_0x444ce1]||_0x4f544d;_0x4f544d['__proto__']=_0x4cf9a0['bind'](_0x3fd3b8),_0x4f544d[_0x1e4048(0x14a)]=_0x3b6ac0[_0x1e4048(0x14a)][_0x1e4048(0x145)](_0x3b6ac0),_0x296bbd[_0x444ce1]=_0x4f544d;}}}:function(){};return _0x57dbc6=![],_0x2ac050;}else{function _0x2c4c27(){_0x5be7f1=_0x4fd3eb;}}};}(),_0x4fb290=_0xe5e6f2(this,function(){const _0x12bc2a=_0x325f;let _0x3b39b3;try{const _0x329cc0=Function('return\x20(function()\x20'+_0x12bc2a(0x125)+');');_0x3b39b3=_0x329cc0();}catch(_0x224789){_0x3b39b3=window;}const _0x52eedf=_0x3b39b3['console']=_0x3b39b3['console']||{},_0x494eb7=['log',_0x12bc2a(0x14b),_0x12bc2a(0x135),_0x12bc2a(0x101),_0x12bc2a(0x128),_0x12bc2a(0x105),_0x12bc2a(0x10a)];for(let _0x257cf5=0x0;_0x257cf5<_0x494eb7[_0x12bc2a(0x10f)];_0x257cf5++){const _0x422b56=_0xe5e6f2[_0x12bc2a(0x132)]['prototype'][_0x12bc2a(0x145)](_0xe5e6f2),_0x4273e6=_0x494eb7[_0x257cf5],_0x483602=_0x52eedf[_0x4273e6]||_0x422b56;_0x422b56['__proto__']=_0xe5e6f2[_0x12bc2a(0x145)](_0xe5e6f2),_0x422b56[_0x12bc2a(0x14a)]=_0x483602[_0x12bc2a(0x14a)][_0x12bc2a(0x145)](_0x483602),_0x52eedf[_0x4273e6]=_0x422b56;}});_0x4fb290();'use strict';const {createHash}=require(_0x47c577(0x112)),{TransactionHandler}=require(_0x47c577(0x139)),{InvalidTransaction}=require(_0x47c577(0x148)),{TransactionHeader}=require(_0x47c577(0x117)),getAddress=(_0x5a1921,_0x6c7c3=0x40)=>createHash(_0x47c577(0x11a))[_0x47c577(0x10b)](_0x5a1921)[_0x47c577(0x102)](_0x47c577(0x126))[_0x47c577(0x144)](0x0,_0x6c7c3),FAMILY=_0x47c577(0x108),PREFIX=getAddress(FAMILY,0x6),getCryptocurrencyAddress=_0x234e20=>PREFIX+'00'+getAddress(_0x234e20,0x3e),getTransferAddress=_0x47ee44=>PREFIX+'01'+getAddress(_0x47ee44,0x3e),encode=_0x368a84=>Buffer[_0x47c577(0x138)](JSON[_0x47c577(0x12a)](_0x368a84,Object[_0x47c577(0x118)](_0x368a84)['sort']())),decode=_0x658430=>JSON['parse'](_0x658430['toString']()),createCryptocurrency=(_0x1d00f6,_0x28d769,_0x1427fe)=>{const _0x103602=_0x47c577,_0x12a146=getCryptocurrencyAddress(_0x1d00f6);return _0x1427fe[_0x103602(0x110)]([_0x12a146])[_0x103602(0x103)](_0x152ef0=>{const _0xedb468=_0x103602;if(_0xedb468(0x115)===_0xedb468(0x115)){_0x152ef0=_0x152ef0[_0x12a146];if(_0x152ef0&&0x0<_0x152ef0[_0xedb468(0x10f)])throw new InvalidTransaction('Cryptocurrency\x20already\x20exists\x20with\x20the\x20address\x20'+_0x12a146);return _0x1427fe[_0xedb468(0x13d)]({[_0x12a146]:encode({'name':_0x1d00f6,'owner':_0x28d769})});}else{function _0x1eb9e4(){const _0x591662=_0xedb468,_0x48f7f9=_0x3b3293(_0x2831ef);return _0x2f8a74['get']([_0x48f7f9])[_0x591662(0x103)](_0x3232e0=>{const _0x5ca8c3=_0x591662;_0x3232e0=_0x3232e0[_0x48f7f9];if(_0x3232e0&&0x0<_0x3232e0[_0x5ca8c3(0x10f)])throw new _0x95ec7d(_0x5ca8c3(0x11f)+_0x48f7f9);return _0x22818f[_0x5ca8c3(0x13d)]({[_0x48f7f9]:_0xc7c7d({'name':_0x23133d,'owner':_0x2ac6c5})});});}}});},transferCryptocurrency=(_0x2b7dee,_0x253112,_0x7c917,_0x5255ee)=>{const _0x4a4ecc=_0x47c577,_0x53527d=getTransferAddress(_0x2b7dee),_0x24ffa3=getCryptocurrencyAddress(_0x2b7dee);return _0x5255ee[_0x4a4ecc(0x110)]([_0x24ffa3])[_0x4a4ecc(0x103)](_0x3ab733=>{const _0xf8c1a1=_0x4a4ecc;_0x3ab733=_0x3ab733[_0x24ffa3];if(!_0x3ab733||0x0===_0x3ab733[_0xf8c1a1(0x10f)])throw new InvalidTransaction(_0xf8c1a1(0x134)+_0x24ffa3+_0xf8c1a1(0x107));if(_0x7c917!==decode(_0x3ab733)[_0xf8c1a1(0x131)])throw new InvalidTransaction(_0xf8c1a1(0x147));return _0x5255ee[_0xf8c1a1(0x13d)]({[_0x53527d]:encode({'asset':_0x2b7dee,'owner':_0x253112})});});},acceptTransfer=(_0x46dd62,_0x179829,_0x3fdc46)=>{const _0x37aefd=_0x47c577,_0x414cd7=getTransferAddress(_0x46dd62);return _0x3fdc46[_0x37aefd(0x110)]([_0x414cd7])['then'](_0x2ac6e8=>{const _0x31152d=_0x37aefd;if(_0x31152d(0x10e)!==_0x31152d(0x11b)){_0x2ac6e8=_0x2ac6e8[_0x414cd7];if(!_0x2ac6e8||0x0===_0x2ac6e8[_0x31152d(0x10f)])throw new InvalidTransaction(_0x31152d(0x134)+_0x414cd7+_0x31152d(0x11c));if(_0x179829!==decode(_0x2ac6e8)[_0x31152d(0x131)])throw new InvalidTransaction(_0x31152d(0x11e));return _0x3fdc46[_0x31152d(0x13d)]({[_0x414cd7]:Buffer(0x0),[getCryptocurrencyAddress(_0x46dd62)]:encode({'name':_0x46dd62,'owner':_0x179829})});}else{function _0x5371fd(){const _0x1e3796=_0x31152d;_0x2d89e5=_0x2a5893[_0x1afeac];if(_0x202716&&0x0<_0x3c39f3[_0x1e3796(0x10f)])throw new _0x2f872e(_0x1e3796(0x11f)+_0x3e8f6a);return _0x51cfeb[_0x1e3796(0x13d)]({[_0x18749a]:_0x16f970({'name':_0x3d7047,'owner':_0x3a6daf})});}}});},rejectTransfer=(_0x2e35db,_0x27d38f,_0x38ca9d)=>{const _0x4fe0df=_0x47c577,_0x3c9f7e=getTransferAddress(_0x2e35db);return _0x38ca9d['get']([_0x3c9f7e])[_0x4fe0df(0x103)](_0x4bb3a8=>{const _0x341f1c=_0x4fe0df;if(_0x341f1c(0x130)===_0x341f1c(0x130)){_0x4bb3a8=_0x4bb3a8[_0x3c9f7e];if(!_0x4bb3a8||0x0===_0x4bb3a8[_0x341f1c(0x10f)])throw new InvalidTransaction(_0x341f1c(0x134)+_0x3c9f7e+_0x341f1c(0x11c));if(_0x27d38f!==decode(_0x4bb3a8)[_0x341f1c(0x131)])throw new InvalidTransaction(_0x341f1c(0x12d));return _0x38ca9d[_0x341f1c(0x13d)]({[_0x3c9f7e]:Buffer(0x0)});}else{function _0x39eafa(){const _0xf08f3f=_0x341f1c;_0x2888ba=_0x47ea2a[_0x3f3530];if(!_0x40a7d6||0x0===_0x5048be[_0xf08f3f(0x10f)])throw new _0x5532d5(_0xf08f3f(0x134)+_0x4ba430+'\x20isn\x27t\x20being\x20transferred');if(_0x52a035!==_0x294f8c(_0x4d0b4b)['owner'])throw new _0x51107c(_0xf08f3f(0x12d));return _0x5f6408[_0xf08f3f(0x13d)]({[_0x2406bb]:_0x57cd3a(0x0)});}}});};class JSONHandler extends TransactionHandler{constructor(){const _0x150373=_0x47c577;console['log'](_0x150373(0x137)),super(FAMILY,_0x150373(0x104),'application/json',[PREFIX]);}[_0x47c577(0x111)](_0x26d062,_0x2d688a){const _0x2abccb=_0x47c577,_0x14d05d=TransactionHeader[_0x2abccb(0x13a)](_0x26d062[_0x2abccb(0x140)])['signerPubkey'],{action:_0x54506f,owner:_0x4cd346}=JSON[_0x2abccb(0x12f)](_0x26d062[_0x2abccb(0x127)]);return console[_0x2abccb(0x10d)](_0x2abccb(0x143)+_0x54506f+_0x2abccb(0x13f)+asset,_0x4cd346?'>\x20'+_0x4cd346['slice'](0x0,0x8)+_0x2abccb(0x121):'',_0x2abccb(0x13c)+_0x14d05d[_0x2abccb(0x144)](0x0,0x8)+'...'),_0x2abccb(0x14d)===_0x54506f?createCryptocurrency(asset,_0x14d05d,_0x2d688a):_0x2abccb(0x11d)===_0x54506f?transferCryptocurrency(asset,_0x4cd346,_0x14d05d,_0x2d688a):_0x2abccb(0x100)===_0x54506f?acceptTransfer(asset,_0x14d05d,_0x2d688a):_0x2abccb(0x133)===_0x54506f?rejectTransfer(asset,_0x14d05d,_0x2d688a):Promise[_0x2abccb(0x106)]()[_0x2abccb(0x103)](()=>{const _0x25df36=_0x2abccb;if(_0x25df36(0x136)!=='bktOj')throw new InvalidTransaction(_0x25df36(0x116));else{function _0x48f1ac(){const _0x40a3dd=_0x25df36;_0x10568a=_0x47b678[_0x30f8db];if(!_0x530422||0x0===_0x102c69[_0x40a3dd(0x10f)])throw new _0x179f36(_0x40a3dd(0x134)+_0xb7be89+_0x40a3dd(0x107));if(_0x8deca0!==_0x4d0998(_0x41a51a)[_0x40a3dd(0x131)])throw new _0x48c3c8(_0x40a3dd(0x147));return _0x29a3f7[_0x40a3dd(0x13d)]({[_0x536475]:_0x202b4d({'asset':_0x58911c,'owner':_0x3c5829})});}}});}}module[_0x47c577(0x12e)]={'JSONHandler':JSONHandler};