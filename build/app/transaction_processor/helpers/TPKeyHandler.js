const _0x1188=['prototype','addReceiptData','func','166922NvwFHV','filter','hex','State\x20Error','2QcjTET','KkHmu','payload','State\x20Error!','putState','{}.constructor(\x22return\x20this\x22)(\x20)','NODE_ENV','12GxwgGD','ecdsaRecover','frobj','error','27684YSgoZi','uMJEs','addEvent','toString','slice','dwRKk','316943OrYKlB','warn','zaXIw','state:\x20','120948MMLZBD','VrYZs','ZHCmx','exports','1zXkzGz','return\x20(function()\x20','env','isArray','Bad\x20transaction\x20Format','sawtooth-sdk/processor/exceptions','find','deleteState','constructor','getState','stringify','460026jCyxSk','trace','106705KWVzey','isUndefined','apply','console','mNPMo','key','utils','table','1SlMmNj','keysCanCollide','args','5onNqXO','value','setState','369537BZbHpP','from','utf8','bind','soLfM','keccak256','map','log','info','\x19Ethereum\x20Signed\x20Message:\x0a','ethers','dev','exception','__proto__','length','parse'];const _0x1ec4=function(_0x517a9a,_0x3a51a6){_0x517a9a=_0x517a9a-0xc2;let _0x3e3ba5=_0x1188[_0x517a9a];return _0x3e3ba5;};const _0x181527=_0x1ec4;(function(_0xffef6b,_0xe20fab){const _0x53df2a=_0x1ec4;while(!![]){try{const _0x16e5d3=-parseInt(_0x53df2a(0xe0))*parseInt(_0x53df2a(0xd5))+-parseInt(_0x53df2a(0x103))+-parseInt(_0x53df2a(0xea))*parseInt(_0x53df2a(0xf0))+-parseInt(_0x53df2a(0xcd))*parseInt(_0x53df2a(0x107))+-parseInt(_0x53df2a(0xe2))*-parseInt(_0x53df2a(0xed))+parseInt(_0x53df2a(0xc7))+parseInt(_0x53df2a(0xd1))*parseInt(_0x53df2a(0xc3));if(_0x16e5d3===_0xe20fab)break;else _0xffef6b['push'](_0xffef6b['shift']());}catch(_0x4c79e9){_0xffef6b['push'](_0xffef6b['shift']());}}}(_0x1188,0x5d506));const _0x5d822c=function(){let _0x259fba=!![];return function(_0x45dfbb,_0x5d78b1){const _0x571b06=_0x259fba?function(){if(_0x5d78b1){const _0x5874db=_0x5d78b1['apply'](_0x45dfbb,arguments);return _0x5d78b1=null,_0x5874db;}}:function(){};return _0x259fba=![],_0x571b06;};}(),_0x39bfb8=_0x5d822c(this,function(){const _0x10eb90=_0x1ec4,_0x500dfd=function(){const _0x4ae244=_0x1ec4;let _0x14cf8f;try{_0x14cf8f=Function(_0x4ae244(0xd6)+_0x4ae244(0x10c)+');')();}catch(_0x30701d){_0x14cf8f=window;}return _0x14cf8f;},_0x510da8=_0x500dfd(),_0x476c76=_0x510da8[_0x10eb90(0xe5)]=_0x510da8[_0x10eb90(0xe5)]||{},_0x261705=['log',_0x10eb90(0xce),_0x10eb90(0xf8),_0x10eb90(0xc6),_0x10eb90(0xfc),_0x10eb90(0xe9),_0x10eb90(0xe1)];for(let _0xcebd8a=0x0;_0xcebd8a<_0x261705[_0x10eb90(0xfe)];_0xcebd8a++){if(_0x10eb90(0xe6)!=='mNPMo'){function _0x4d5ae0(){const _0x2b9fb8=_0x10eb90;_0x2a1fd4=_0x2b9fb8(0xf9)+_0x8cdcae['length']+_0x3d1d34;const _0x5c16e8=_0x29d71a[_0x2b9fb8(0xe8)]['keccak256']('0x'+_0x3e4408['from'](_0x4c65a9)[_0x2b9fb8(0xca)]('hex'));return _0x27e9df=_0x1f04bb[_0x2b9fb8(0xc4)](_0x5883f6[_0x2b9fb8(0xf1)](_0x3b7669[_0x2b9fb8(0xf1)](_0xc15836['slice'](0x2,-0x2),_0x2b9fb8(0x105))),_0x1c8535(_0x46f90d[_0x2b9fb8(0xcb)](-0x2),0x10)-0x1b,_0x28c013[_0x2b9fb8(0xf1)](_0x5c16e8[_0x2b9fb8(0xcb)](0x2),_0x2b9fb8(0x105)),!0x0),_0x190b59[_0x2b9fb8(0xf1)](_0x14fb02)[_0x2b9fb8(0xca)](_0x2b9fb8(0x105));}}else{const _0x11a50d=_0x5d822c[_0x10eb90(0xdd)][_0x10eb90(0x100)][_0x10eb90(0xf3)](_0x5d822c),_0x262a09=_0x261705[_0xcebd8a],_0xf6ed1c=_0x476c76[_0x262a09]||_0x11a50d;_0x11a50d[_0x10eb90(0xfd)]=_0x5d822c['bind'](_0x5d822c),_0x11a50d[_0x10eb90(0xca)]=_0xf6ed1c[_0x10eb90(0xca)]['bind'](_0xf6ed1c),_0x476c76[_0x262a09]=_0x11a50d;}}});_0x39bfb8();'use strict';const _=require('underscore'),{TransactionHandler}=require('sawtooth-sdk/processor/handler'),{InvalidTransaction,InternalError}=require(_0x181527(0xda)),{ethers}=require(_0x181527(0xfa)),secp256k1=require('secp256k1');async function getRawState(_0x3120d6,_0x3e3dd4,_0x504069){const _0x197fbe=_0x181527;_0x3e3dd4=(await _0x3120d6[_0x197fbe(0xde)]([_0x3e3dd4],_0x504069))[_0x3e3dd4];if(_0x3e3dd4&&0x0!=_0x3e3dd4[_0x197fbe(0xfe)])return _0x3e3dd4;}async function getState(_0x3c5dee,_0x2a8764,_0x2d69aa,_0x20aa90){const _0x45cf70=_0x181527;_0x20aa90=await getRawState(_0x3c5dee,_0x2a8764(_0x2d69aa),_0x20aa90);if(!_[_0x45cf70(0xe3)](_0x20aa90)){if(_0x45cf70(0xc8)==='tbElD'){function _0x2f180a(){const _0xee99fb=_0x45cf70;return _0x3326a7[_0xee99fb(0xc9)][_0xee99fb(0xe4)](_0x24c2ac,[...arguments]);}}else{_0x20aa90=JSON['parse'](Buffer[_0x45cf70(0xf1)](_0x20aa90,_0x45cf70(0xf2))[_0x45cf70(0xca)]());if(!_[_0x45cf70(0xd8)](_0x20aa90))throw new InternalError(_0x45cf70(0x106));return _0x20aa90=_[_0x45cf70(0xdb)](_0x20aa90,_0x45abcb=>_0x45abcb[_0x45cf70(0xe7)]===_0x2d69aa),_0x20aa90?_0x20aa90['value']:void 0x0;}}}async function putState(_0x290379,_0x3ffe76,_0x38ecea,_0x19ecef,_0x489253){const _0x3fda75=_0x181527;var _0x3502f6=await getRawState(_0x290379,_0x3ffe76(_0x38ecea),_0x489253);let _0x58c603;if(_['isUndefined'](_0x3502f6))_0x58c603=[{'key':_0x38ecea,'value':_0x19ecef}];else{let _0x436294=JSON[_0x3fda75(0xff)](Buffer[_0x3fda75(0xf1)](_0x3502f6,_0x3fda75(0xf2))[_0x3fda75(0xca)]());if(!_[_0x3fda75(0xd8)](_0x436294))throw new InternalError(_0x3fda75(0x106));let _0x2b71d1=!0x1;for(let _0x4fa992=0x0;_0x4fa992<_0x436294['length'];_0x4fa992++)if(_0x436294[_0x4fa992][_0x3fda75(0xe7)]===_0x38ecea){_0x436294[_0x4fa992][_0x3fda75(0xee)]=_0x19ecef,_0x2b71d1=!0x0;break;}_0x2b71d1||_0x436294['push']({'key':_0x38ecea,'value':_0x19ecef}),_0x58c603=_0x436294;}if(0x0===(await _0x290379[_0x3fda75(0xef)]({[_0x3ffe76(_0x38ecea)]:Buffer[_0x3fda75(0xf1)](JSON[_0x3fda75(0xdf)](_0x58c603),'utf8')},_0x489253))[_0x3fda75(0xfe)])throw new InternalError(_0x3fda75(0x10a));}async function deleteState(_0xdd0ff3,_0x65ef56,_0x249c98,_0x464771){const _0x349275=_0x181527;var _0x544548=await getRawState(_0xdd0ff3,_0x65ef56(_0x249c98),_0x464771);if(!_[_0x349275(0xe3)](_0x544548)){var _0x544548=JSON[_0x349275(0xff)](Buffer[_0x349275(0xf1)](_0x544548,_0x349275(0xf2))[_0x349275(0xca)]());if(!_[_0x349275(0xd8)](_0x544548))throw new InternalError(_0x349275(0x106));if(0x0<(_0x544548=_[_0x349275(0x104)](_0x544548,_0x380b2e=>_0x380b2e[_0x349275(0xe7)]!==_0x249c98))[_0x349275(0xfe)]){if(_0x349275(0xf4)===_0x349275(0xcc)){function _0x3ea288(){const _0x263d43=_0x349275;var _0x48ca06=_0x2fecd4[_0x263d43(0xff)](_0x3f0962['from'](_0x2f85d7[_0x263d43(0x109)],_0x263d43(0xf2))[_0x263d43(0xca)]());_0x30316b=_0x48ca06['func'],_0x366b1a=_0x48ca06[_0x263d43(0xec)];var {}=_0x34ac13;}}else{if(0x0===(await _0xdd0ff3[_0x349275(0xef)]({[_0x65ef56(_0x249c98)]:Buffer['from'](JSON['stringify'](_0x544548),_0x349275(0xf2))},_0x464771))['length'])throw new InternalError(_0x349275(0x10a));}}else{if(0x0===(await _0xdd0ff3[_0x349275(0xdc)]([_0x65ef56(_0x249c98)],_0x464771))['length'])throw new InternalError(_0x349275(0x10a));}}}function getPublicKey(_0x515fbf,_0x41eab8){const _0x5843a9=_0x181527;_0x515fbf='\x19Ethereum\x20Signed\x20Message:\x0a'+_0x515fbf[_0x5843a9(0xfe)]+_0x515fbf;const _0x48002a=ethers[_0x5843a9(0xe8)][_0x5843a9(0xf5)]('0x'+Buffer['from'](_0x515fbf)[_0x5843a9(0xca)](_0x5843a9(0x105)));return _0x41eab8=secp256k1[_0x5843a9(0xc4)](Uint8Array[_0x5843a9(0xf1)](Buffer[_0x5843a9(0xf1)](_0x41eab8[_0x5843a9(0xcb)](0x2,-0x2),'hex')),parseInt(_0x41eab8[_0x5843a9(0xcb)](-0x2),0x10)-0x1b,Buffer[_0x5843a9(0xf1)](_0x48002a[_0x5843a9(0xcb)](0x2),_0x5843a9(0x105)),!0x0),Buffer['from'](_0x41eab8)[_0x5843a9(0xca)](_0x5843a9(0x105));}module[_0x181527(0xd4)]=function({TP_FAMILY:_0x932470,TP_VERSION:_0x24a5c7,TP_NAMESPACE:_0x109222,handlers:_0x431e2f,addresses:_0x493468}){const _0x223444=_0x181527;class _0x330531 extends TransactionHandler{constructor(){if('xSIce'!=='xSIce'){function _0x577865(){const _0x3ebb5c=_0x1ec4;_0x413137=_0x7c3f0('return\x20(function()\x20'+_0x3ebb5c(0x10c)+');')();}}else super(_0x932470,[_0x24a5c7],[_0x109222]);}async[_0x223444(0xe4)](_0x39ba62,_0x3131f0){const _0x39d735=_0x223444;if(_0x39d735(0xd3)!==_0x39d735(0xd3)){function _0x36e4bd(){return _0x599acd(_0x1d52d4,_0x3dbcfd,_0x125d06,_0x2ec567,_0x707ec2);}}else{let _0x197d48,_0x16169e;try{var _0x483a90=JSON[_0x39d735(0xff)](Buffer[_0x39d735(0xf1)](_0x39ba62[_0x39d735(0x109)],'utf8')[_0x39d735(0xca)]());_0x16169e=_0x483a90[_0x39d735(0x102)],_0x197d48=_0x483a90[_0x39d735(0xec)];var {}=_0x197d48;}catch(_0x254bb6){throw new InvalidTransaction(_0x39d735(0xd9));}_0x483a90=_[_0x39d735(0xf6)](_0x493468,_0x2607de=>{const _0xfee7fb=_0x39d735;if(_0xfee7fb(0x108)!==_0xfee7fb(0xc5)){let _0x5e01f8,_0xc67230,_0x1a5429,_0x515ec3;return _0x2607de[_0xfee7fb(0xeb)]?(_0x5e01f8=getState,_0xc67230=putState,_0x1a5429=deleteState,_0x515ec3=getRawState):(_0x5e01f8=async(_0x34aa9d,_0x26bbdb,_0x26e6ea,_0x428327)=>{const _0x50befb=_0xfee7fb;_0x428327=await getRawState(_0x34aa9d,_0x26bbdb(_0x26e6ea),_0x428327);if(_0x428327)return console[_0x50befb(0xf7)](_0x50befb(0xd0),_0x428327),JSON[_0x50befb(0xff)](Buffer[_0x50befb(0xf1)](_0x428327)[_0x50befb(0xca)](_0x50befb(0xf2)));},_0xc67230=(_0x2bccfd,_0x37a0d3,_0x155bf4,_0x55cec3,_0x5e8eea)=>_0x2bccfd[_0xfee7fb(0xef)]({[_0x37a0d3(_0x155bf4)]:Buffer[_0xfee7fb(0xf1)](JSON[_0xfee7fb(0xdf)](_0x55cec3),'utf8')},_0x5e8eea),_0x1a5429=(_0x3ca3b6,_0x3a9c58,_0x1f5d3a,_0x29adef)=>_0x3ca3b6[_0xfee7fb(0xdc)]([_0x3a9c58(_0x1f5d3a)],_0x29adef)),{'getRawState':function(_0x97d72,_0x37f0c4){return _0x515ec3(_0x3131f0,_0x97d72,_0x37f0c4);},'getState':function(_0x1ec707,_0x4fc0b9){return _0x5e01f8(_0x3131f0,_0x2607de,_0x1ec707,_0x4fc0b9);},'putState':function(_0x4feb7b,_0x523893,_0x3c1391){return _0xc67230(_0x3131f0,_0x2607de,_0x4feb7b,_0x523893,_0x3c1391);},'deleteState':function(_0x4ee83,_0x169383){return _0x1a5429(_0x3131f0,_0x2607de,_0x4ee83,_0x169383);},'addEvent':function(){const _0x2842fa=_0xfee7fb;if(_0x2842fa(0xd2)===_0x2842fa(0xd2))return _0x3131f0[_0x2842fa(0xc9)][_0x2842fa(0xe4)](_0x3131f0,[...arguments]);else{function _0x44a9d7(){const _0x4878b4=_0x2a1b20?function(){const _0x39d1fb=_0x1ec4;if(_0x2a84ea){const _0x2bd148=_0x5abebb[_0x39d1fb(0xe4)](_0x4c94d4,arguments);return _0x3ca808=null,_0x2bd148;}}:function(){};return _0x81272=![],_0x4878b4;}}},'addReceiptData':function(){const _0x3a85bb=_0xfee7fb;return _0x3131f0[_0x3a85bb(0x101)]['apply'](_0x3131f0,[...arguments]);},'context':_0x3131f0,'transactionProcessRequest':_0x39ba62,'publicKey':void 0x0};}else{function _0x3a0779(){const _0x3f4a2d=_0xfee7fb;if(!(_0x15fe29 instanceof _0x1a44be))throw _0x367669;_0x1b5647[_0x3f4a2d(0xf7)](_0x5ca977);}}});if(_0x39d735(0xfb)===process[_0x39d735(0xd7)][_0x39d735(0xc2)])try{if(_0x39d735(0xcf)==='AcXPu'){function _0x53e80b(){return _0x49dae2(_0x24ecac,_0x3fd8b0,_0x4af013,_0xb1adc7);}}else await _0x431e2f[_0x16169e](_0x483a90,_0x197d48);}catch(_0x24d5e6){if(!(_0x24d5e6 instanceof InternalError))throw _0x24d5e6;console['log'](_0x24d5e6);}else await _0x431e2f[_0x16169e](_0x483a90,_0x197d48);}}}return _0x330531;},module[_0x181527(0xd4)][_0x181527(0xde)]=getState,module['exports'][_0x181527(0x10b)]=putState,module[_0x181527(0xd4)][_0x181527(0xdc)]=deleteState;