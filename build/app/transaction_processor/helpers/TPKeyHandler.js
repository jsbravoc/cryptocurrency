const _0x1185=['781rNbnvX','prototype','isUndefined','NODE_ENV','bind','utf8','isArray','push','cgUIZ','__proto__','{}.constructor(\x22return\x20this\x22)(\x20)','exports','dev','1177zrcxVr','warn','2853YmtDqz','apply','keccak256','State\x20Error','table','ecdsaRecover','length','slice','BCtjg','value','FHSgH','571578JHoLUV','log','env','func','\x19Ethereum\x20Signed\x20Message:\x0a','Bad\x20transaction\x20Format','Wownq','BkNui','secp256k1','sawtooth-sdk/processor/exceptions','addReceiptData','from','toString','info','state:\x20','884280kPpktn','exception','PfSEe','constructor','jMEyq','wiTqt','stringify','console','key','trace','hex','rCbwx','setState','State\x20Error!','find','keysCanCollide','150461KbnXzh','parse','getState','underscore','316iJygXh','EWelb','deleteState','putState','utils','moZrT','1223069FTuwCn','error','map','1787309NMQiAx','return\x20(function()\x20','addEvent'];const _0x480c=function(_0xd2cac7,_0x4cec85){_0xd2cac7=_0xd2cac7-0x11a;let _0x7a9534=_0x1185[_0xd2cac7];return _0x7a9534;};const _0x4cf71c=_0x480c;(function(_0xfa5512,_0x50689a){const _0x49236d=_0x480c;while(!![]){try{const _0x2ecf9e=-parseInt(_0x49236d(0x150))+parseInt(_0x49236d(0x131))+-parseInt(_0x49236d(0x126))*-parseInt(_0x49236d(0x154))+parseInt(_0x49236d(0x160))*parseInt(_0x49236d(0x124))+-parseInt(_0x49236d(0x140))+parseInt(_0x49236d(0x15a))+-parseInt(_0x49236d(0x15d));if(_0x2ecf9e===_0x50689a)break;else _0xfa5512['push'](_0xfa5512['shift']());}catch(_0x507470){_0xfa5512['push'](_0xfa5512['shift']());}}}(_0x1185,0xc1b26));const _0xd90d8b=function(){let _0x537f2f=!![];return function(_0x324b02,_0x13b7f7){const _0x377fc1=_0x537f2f?function(){const _0x28fd4a=_0x480c;if(_0x13b7f7){const _0x4daf89=_0x13b7f7[_0x28fd4a(0x127)](_0x324b02,arguments);return _0x13b7f7=null,_0x4daf89;}}:function(){};return _0x537f2f=![],_0x377fc1;};}(),_0x37af04=_0xd90d8b(this,function(){const _0x4750e5=_0x480c;let _0x290685;try{const _0x2a1f86=Function(_0x4750e5(0x15e)+_0x4750e5(0x121)+');');_0x290685=_0x2a1f86();}catch(_0x3ae0f1){_0x290685=window;}const _0x3513eb=_0x290685[_0x4750e5(0x147)]=_0x290685[_0x4750e5(0x147)]||{},_0x45675f=['log',_0x4750e5(0x125),_0x4750e5(0x13e),_0x4750e5(0x15b),_0x4750e5(0x141),_0x4750e5(0x12a),_0x4750e5(0x149)];for(let _0x321b39=0x0;_0x321b39<_0x45675f[_0x4750e5(0x12c)];_0x321b39++){if(_0x4750e5(0x14b)===_0x4750e5(0x155)){function _0x49d1cb(){return _0x76370a(_0x46a1f3,_0x3816bc,_0x4cf833,_0xaf446c);}}else{const _0x17978e=_0xd90d8b[_0x4750e5(0x143)][_0x4750e5(0x161)][_0x4750e5(0x11b)](_0xd90d8b),_0x3c79f6=_0x45675f[_0x321b39],_0x5069d1=_0x3513eb[_0x3c79f6]||_0x17978e;_0x17978e[_0x4750e5(0x120)]=_0xd90d8b['bind'](_0xd90d8b),_0x17978e['toString']=_0x5069d1[_0x4750e5(0x13d)][_0x4750e5(0x11b)](_0x5069d1),_0x3513eb[_0x3c79f6]=_0x17978e;}}});_0x37af04();'use strict';const _=require(_0x4cf71c(0x153)),{TransactionHandler}=require('sawtooth-sdk/processor/handler'),{InvalidTransaction,InternalError}=require(_0x4cf71c(0x13a)),{ethers}=require('ethers'),secp256k1=require(_0x4cf71c(0x139));async function getRawState(_0x515638,_0x47e6ed,_0x884877){const _0x4d57e5=_0x4cf71c;_0x47e6ed=(await _0x515638[_0x4d57e5(0x152)]([_0x47e6ed],_0x884877))[_0x47e6ed];if(_0x47e6ed&&0x0!=_0x47e6ed['length'])return _0x47e6ed;}async function getState(_0x43452d,_0x3fdc85,_0x3aac83,_0xf98514){const _0x5e8e37=_0x4cf71c;_0xf98514=await getRawState(_0x43452d,_0x3fdc85(_0x3aac83),_0xf98514);if(!_['isUndefined'](_0xf98514)){_0xf98514=JSON['parse'](Buffer[_0x5e8e37(0x13c)](_0xf98514,_0x5e8e37(0x11c))[_0x5e8e37(0x13d)]());if(!_[_0x5e8e37(0x11d)](_0xf98514))throw new InternalError(_0x5e8e37(0x129));return _0xf98514=_[_0x5e8e37(0x14e)](_0xf98514,_0x1f7a13=>_0x1f7a13['key']===_0x3aac83),_0xf98514?_0xf98514[_0x5e8e37(0x12f)]:void 0x0;}}async function putState(_0x134e50,_0x7251d1,_0x26f12c,_0x586b98,_0x58b6fa){const _0x51d0b9=_0x4cf71c;var _0x3559d3=await getRawState(_0x134e50,_0x7251d1(_0x26f12c),_0x58b6fa);let _0x319126;if(_['isUndefined'](_0x3559d3))_0x319126=[{'key':_0x26f12c,'value':_0x586b98}];else{if(_0x51d0b9(0x130)!==_0x51d0b9(0x130)){function _0x31ee9e(){const _0x5e47aa=_0x51d0b9,_0x451ddd=_0x92c48e('return\x20(function()\x20'+_0x5e47aa(0x121)+');');_0x10b0b9=_0x451ddd();}}else{let _0x520210=JSON[_0x51d0b9(0x151)](Buffer[_0x51d0b9(0x13c)](_0x3559d3,_0x51d0b9(0x11c))[_0x51d0b9(0x13d)]());if(!_['isArray'](_0x520210))throw new InternalError('State\x20Error');let _0x52c0d1=!0x1;for(let _0x39ca4a=0x0;_0x39ca4a<_0x520210['length'];_0x39ca4a++)if(_0x520210[_0x39ca4a][_0x51d0b9(0x148)]===_0x26f12c){_0x520210[_0x39ca4a][_0x51d0b9(0x12f)]=_0x586b98,_0x52c0d1=!0x0;break;}_0x52c0d1||_0x520210[_0x51d0b9(0x11e)]({'key':_0x26f12c,'value':_0x586b98}),_0x319126=_0x520210;}}if(0x0===(await _0x134e50[_0x51d0b9(0x14c)]({[_0x7251d1(_0x26f12c)]:Buffer[_0x51d0b9(0x13c)](JSON[_0x51d0b9(0x146)](_0x319126),'utf8')},_0x58b6fa))['length'])throw new InternalError(_0x51d0b9(0x14d));}async function deleteState(_0x47e79b,_0x184c2d,_0x46e1b4,_0x442f27){const _0xb8b766=_0x4cf71c;var _0x1533c8=await getRawState(_0x47e79b,_0x184c2d(_0x46e1b4),_0x442f27);if(!_[_0xb8b766(0x162)](_0x1533c8)){var _0x1533c8=JSON[_0xb8b766(0x151)](Buffer[_0xb8b766(0x13c)](_0x1533c8,_0xb8b766(0x11c))[_0xb8b766(0x13d)]());if(!_[_0xb8b766(0x11d)](_0x1533c8))throw new InternalError('State\x20Error');if(0x0<(_0x1533c8=_['filter'](_0x1533c8,_0x1c4b01=>_0x1c4b01[_0xb8b766(0x148)]!==_0x46e1b4))['length']){if(0x0===(await _0x47e79b['setState']({[_0x184c2d(_0x46e1b4)]:Buffer[_0xb8b766(0x13c)](JSON[_0xb8b766(0x146)](_0x1533c8),'utf8')},_0x442f27))[_0xb8b766(0x12c)])throw new InternalError(_0xb8b766(0x14d));}else{if(0x0===(await _0x47e79b['deleteState']([_0x184c2d(_0x46e1b4)],_0x442f27))[_0xb8b766(0x12c)])throw new InternalError(_0xb8b766(0x14d));}}}function getPublicKey(_0x5c2ae4,_0x5ef138){const _0x3ec724=_0x4cf71c;_0x5c2ae4=_0x3ec724(0x135)+_0x5c2ae4[_0x3ec724(0x12c)]+_0x5c2ae4;const _0x15bf8a=ethers[_0x3ec724(0x158)][_0x3ec724(0x128)]('0x'+Buffer[_0x3ec724(0x13c)](_0x5c2ae4)[_0x3ec724(0x13d)]('hex'));return _0x5ef138=secp256k1[_0x3ec724(0x12b)](Uint8Array[_0x3ec724(0x13c)](Buffer[_0x3ec724(0x13c)](_0x5ef138[_0x3ec724(0x12d)](0x2,-0x2),_0x3ec724(0x14a))),parseInt(_0x5ef138[_0x3ec724(0x12d)](-0x2),0x10)-0x1b,Buffer[_0x3ec724(0x13c)](_0x15bf8a[_0x3ec724(0x12d)](0x2),_0x3ec724(0x14a)),!0x0),Buffer[_0x3ec724(0x13c)](_0x5ef138)[_0x3ec724(0x13d)](_0x3ec724(0x14a));}module[_0x4cf71c(0x122)]=function({TP_FAMILY:_0xd529de,TP_VERSION:_0x1a3476,TP_NAMESPACE:_0xdd622f,handlers:_0xc849b8,addresses:_0x28d968}){const _0x4915ce=_0x4cf71c;class _0x8ddfc3 extends TransactionHandler{constructor(){const _0x47152e=_0x480c;if(_0x47152e(0x11f)!==_0x47152e(0x142))super(_0xd529de,[_0x1a3476],[_0xdd622f]);else{function _0x4f8bc7(){const _0x14af1b=_0x47152e,_0x1db8cc=_0x3d62aa[_0x14af1b(0x127)](_0x58fe58,arguments);return _0x4eaec3=null,_0x1db8cc;}}}async[_0x4915ce(0x127)](_0x5876c0,_0x5198a3){const _0x4c90de=_0x4915ce;if(_0x4c90de(0x137)===_0x4c90de(0x137)){let _0x19b5ea,_0x463c50;try{var _0x35a240=JSON['parse'](Buffer[_0x4c90de(0x13c)](_0x5876c0['payload'],'utf8')['toString']());_0x463c50=_0x35a240[_0x4c90de(0x134)],_0x19b5ea=_0x35a240['args'];var {}=_0x19b5ea;}catch(_0x4ef891){throw new InvalidTransaction(_0x4c90de(0x136));}_0x35a240=_[_0x4c90de(0x15c)](_0x28d968,_0x4f4727=>{const _0x1e2318=_0x4c90de;if(_0x1e2318(0x144)!==_0x1e2318(0x144)){function _0x2978c4(){const _0x1c8327=_0x1e2318,_0x3af751=_0x48bd6f[_0x1c8327(0x143)]['prototype'][_0x1c8327(0x11b)](_0x23d54b),_0x1c53f1=_0x4e6d16[_0x299dc2],_0x2a2bf5=_0x273e95[_0x1c53f1]||_0x3af751;_0x3af751[_0x1c8327(0x120)]=_0x21f206[_0x1c8327(0x11b)](_0x313d0f),_0x3af751[_0x1c8327(0x13d)]=_0x2a2bf5[_0x1c8327(0x13d)]['bind'](_0x2a2bf5),_0x66017a[_0x1c53f1]=_0x3af751;}}else{let _0x3cb1df,_0xc46484,_0x5336b0,_0x9a08db;return _0x4f4727[_0x1e2318(0x14f)]?(_0x3cb1df=getState,_0xc46484=putState,_0x5336b0=deleteState,_0x9a08db=getRawState):(_0x3cb1df=async(_0x3d7713,_0x3eedd8,_0x285a09,_0x4c69af)=>{const _0x15944e=_0x1e2318;if('DgvlM'!==_0x15944e(0x145)){_0x4c69af=await getRawState(_0x3d7713,_0x3eedd8(_0x285a09),_0x4c69af);if(_0x4c69af)return console['log'](_0x15944e(0x13f),_0x4c69af),JSON[_0x15944e(0x151)](Buffer[_0x15944e(0x13c)](_0x4c69af)['toString'](_0x15944e(0x11c)));}else{function _0x5ca75d(){const _0x4b0846=_0x15944e;if(!(_0x5efa70 instanceof _0x47be0b))throw _0x1f5c35;_0x12bbbf[_0x4b0846(0x132)](_0xcd70f2);}}},_0xc46484=(_0x2299ca,_0x1833c1,_0x423274,_0x3a97c6,_0x9d88dd)=>_0x2299ca['setState']({[_0x1833c1(_0x423274)]:Buffer[_0x1e2318(0x13c)](JSON[_0x1e2318(0x146)](_0x3a97c6),_0x1e2318(0x11c))},_0x9d88dd),_0x5336b0=(_0x23f101,_0x1dacba,_0x112516,_0x2a2a28)=>_0x23f101['deleteState']([_0x1dacba(_0x112516)],_0x2a2a28)),{'getRawState':function(_0x450805,_0x2933b1){return _0x9a08db(_0x5198a3,_0x450805,_0x2933b1);},'getState':function(_0x2b5c3e,_0x2b474c){return _0x3cb1df(_0x5198a3,_0x4f4727,_0x2b5c3e,_0x2b474c);},'putState':function(_0x22f2f3,_0x31e5c7,_0x1774da){return _0xc46484(_0x5198a3,_0x4f4727,_0x22f2f3,_0x31e5c7,_0x1774da);},'deleteState':function(_0x5a0ec3,_0x3c68a9){if('BNCQS'==='AKDqG'){function _0x2f5d38(){const _0x3a6563=_0x59058d?function(){if(_0x24e2f4){const _0x5e48c9=_0xe111cd['apply'](_0x1d2eba,arguments);return _0x265fa2=null,_0x5e48c9;}}:function(){};return _0x47f7ed=![],_0x3a6563;}}else return _0x5336b0(_0x5198a3,_0x4f4727,_0x5a0ec3,_0x3c68a9);},'addEvent':function(){const _0x51b31f=_0x1e2318;if(_0x51b31f(0x159)===_0x51b31f(0x159))return _0x5198a3[_0x51b31f(0x15f)]['apply'](_0x5198a3,[...arguments]);else{function _0x578231(){const _0x1d9a5d=_0x51b31f;_0x20cc20='\x19Ethereum\x20Signed\x20Message:\x0a'+_0x3051fa[_0x1d9a5d(0x12c)]+_0x5601fc;const _0x2a617d=_0x22e26c['utils'][_0x1d9a5d(0x128)]('0x'+_0x29ce78[_0x1d9a5d(0x13c)](_0x1029d9)[_0x1d9a5d(0x13d)]('hex'));return _0x222291=_0xd3d78c[_0x1d9a5d(0x12b)](_0x1e319f[_0x1d9a5d(0x13c)](_0xd2b516[_0x1d9a5d(0x13c)](_0x413fd2[_0x1d9a5d(0x12d)](0x2,-0x2),_0x1d9a5d(0x14a))),_0x3b0767(_0x7d37a0[_0x1d9a5d(0x12d)](-0x2),0x10)-0x1b,_0x2a5008[_0x1d9a5d(0x13c)](_0x2a617d[_0x1d9a5d(0x12d)](0x2),_0x1d9a5d(0x14a)),!0x0),_0x3708ce[_0x1d9a5d(0x13c)](_0x56bf14)['toString'](_0x1d9a5d(0x14a));}}},'addReceiptData':function(){const _0x4ef7ed=_0x1e2318;return _0x5198a3[_0x4ef7ed(0x13b)][_0x4ef7ed(0x127)](_0x5198a3,[...arguments]);},'context':_0x5198a3,'transactionProcessRequest':_0x5876c0,'publicKey':void 0x0};}});if(_0x4c90de(0x123)===process[_0x4c90de(0x133)][_0x4c90de(0x11a)])try{if(_0x4c90de(0x12e)!==_0x4c90de(0x138))await _0xc849b8[_0x463c50](_0x35a240,_0x19b5ea);else{function _0xb3cc7d(){return _0x2f8376(_0x10f2a9,_0x2e62cc,_0x72777d,_0x27b5a8);}}}catch(_0x512a65){if(!(_0x512a65 instanceof InternalError))throw _0x512a65;console[_0x4c90de(0x132)](_0x512a65);}else await _0xc849b8[_0x463c50](_0x35a240,_0x19b5ea);}else{function _0x24778e(){const _0x143780=_0x4c90de;_0x4be56a=_0x380f30[_0x143780(0x151)](_0x2e1453['from'](_0x276e4e,'utf8')[_0x143780(0x13d)]());if(!_0x152563[_0x143780(0x11d)](_0x3634ee))throw new _0x31f091('State\x20Error');return _0x132832=_0x1d4197[_0x143780(0x14e)](_0x24844b,_0x1a8fe0=>_0x1a8fe0['key']===_0x4b41de),_0x849ffb?_0x48b7ab['value']:void 0x0;}}}}return _0x8ddfc3;},module[_0x4cf71c(0x122)][_0x4cf71c(0x152)]=getState,module[_0x4cf71c(0x122)][_0x4cf71c(0x157)]=putState,module[_0x4cf71c(0x122)][_0x4cf71c(0x156)]=deleteState;