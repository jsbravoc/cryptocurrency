const{TYPE,USER_TYPE}=require("../utils/constants"),BaseModel=require("./BaseModel"),Permissions=require("./Permissions");class User extends BaseModel{constructor({address:s,role:t,active:i,balance:n,description:e,public_key:a,return_to:r,permissions:o,latest_transactions:c,pending_transactions:l}){super(TYPE.USER,s),this.role=t,this.description=e,this.public_key=a,this.balance=n||0,this.active="boolean"!=typeof i||i,this.return_to=r||{},this.latest_transactions=c||[],this.pending_transactions=l||[],this.permissions=new Permissions(o)}removeInvalidTransaction(s){var t=this.latest_transactions.indexOf(s.address),{amount:s}=s;this.balance-=s,this.latest_transactions.splice(t,1)}removePendingTransaction(s){Array.isArray(this.pending_transactions)&&(s=this.pending_transactions.indexOf(s),this.pending_transactions.splice(s,1))}addTransaction(s,t,i,n=!0){switch(s){case USER_TYPE.SENDER:var e;n?(e=this.latest_transactions.indexOf(i),this.balance-=t,this.latest_transactions.splice(e,1)):this.pending_transactions.push(i);break;case USER_TYPE.RECIPIENT:n?(this.balance+=t,this.latest_transactions.push(i)):this.pending_transactions.push(i)}}}module.exports=User;