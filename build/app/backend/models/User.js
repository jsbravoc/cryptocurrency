const{TYPE,USER_TYPE}=require("../utils/constants"),BaseModel=require("./BaseModel"),Permissions=require("./Permissions");class User extends BaseModel{constructor({address:s,signature:t,role:i,active:n,balance:e,description:a,public_key:r,return_to:o,permissions:c,latest_transactions:h,pending_transactions:l}){super(TYPE.USER),this.address=s,this.role=i,this.description=a,this.public_key=r,this.balance=e||0,this.active="boolean"!=typeof n||n,this.return_to=o||{},this.latest_transactions=h||[],this.pending_transactions=l||[],this.permissions=new Permissions(c),this.signature=t||s}removeInvalidTransaction(s){var t=this.latest_transactions.indexOf(s.signature),{amount:s}=s;this.balance-=s,this.latest_transactions.splice(t,1)}removePendingTransaction(s){Array.isArray(this.pending_transactions)&&(s=this.pending_transactions.indexOf(s),this.pending_transactions.splice(s,1))}addTransaction(s,t,i,n=!0){switch(s){case USER_TYPE.SENDER:var e;n?(e=this.latest_transactions.indexOf(i),this.balance-=t,this.latest_transactions.splice(e,1)):this.pending_transactions.push(i);break;case USER_TYPE.RECIPIENT:n?(this.balance+=t,this.latest_transactions.push(i)):this.pending_transactions.push(i)}}}module.exports=User;