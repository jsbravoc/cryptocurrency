const _0x3f44=['__proto__','142YIOLbu','exports','replace','17229pkdTxJ','push','limit','sort','deleteUser','statusText','ERROR','EgYwR','findUser','skip','updateUser','isArray','{}.constructor(\x22return\x20this\x22)(\x20)','stringify','1Nmojzn','constructor','SUCCESS','../utils/constants','user','JjQuQ','PUT\x20/users','1181547lorwSb','426577cVXGAd','GET\x20/user/','KFOnB','\x20-\x20','../database/utils/mongo','return\x20(function()\x20','warn','User\x20with\x20address\x20','PUT','cnk-cryptocurrency_users','2SwSZpA','6914nfIgty','find','2Iaxaqs','length','info','Sawtooth\x20service\x20unavailable','\x0a\x20\x20\x20\x20','isNaN','lastest_transactions','191009BBKiwG','3QxUODm','yLHzx','./common','toString','WtSSw','OLrZr','getUserHistory','pending_transactions','../sawtooth/sawtooth-helpers','../models/User','error','../utils/logger','POST\x20/users','USER','ycGId','trace','7NGFLzT','556199PSOWva','json','bind','params','\x20doesn\x27t\x20exist','fALih','stack','\x20|\x20BATCH\x20Response:\x20','DELETE\x20/users/','delete','./cryptocurrency','\x20|\x20Error\x20at\x20deleteUser\x20-\x20','true','\x20|\x20BATCH\x20Request:','getClient','NOTIFY','538881OXttaf','status','axios','underscore','getUsers','DELETE\x20/users\x20|\x20BATCH\x20Response:\x20','forEach','console','crypto','prototype','query','GET\x20/users','FUrZc','expanded','apply'];const _0x4af0=function(_0x39a788,_0x23d9e1){_0x39a788=_0x39a788-0x107;let _0x20599d=_0x3f44[_0x39a788];return _0x20599d;};const _0x10df63=_0x4af0;(function(_0x4858d9,_0x18090c){const _0x42415c=_0x4af0;while(!![]){try{const _0x5eae47=-parseInt(_0x42415c(0x11a))*parseInt(_0x42415c(0x150))+parseInt(_0x42415c(0x13b))*-parseInt(_0x42415c(0x157))+parseInt(_0x42415c(0x10a))*parseInt(_0x42415c(0x14d))+-parseInt(_0x42415c(0x142))+parseInt(_0x42415c(0x158))*parseInt(_0x42415c(0x143))+parseInt(_0x42415c(0x12d))*-parseInt(_0x42415c(0x109))+-parseInt(_0x42415c(0x14e))*-parseInt(_0x42415c(0x12a));if(_0x5eae47===_0x18090c)break;else _0x4858d9['push'](_0x4858d9['shift']());}catch(_0x579e98){_0x4858d9['push'](_0x4858d9['shift']());}}}(_0x3f44,0xc40b4));const _0xb25b4f=function(){let _0x177b13=!![];return function(_0x42587a,_0x35888d){const _0x5acd58=_0x4af0;if(_0x5acd58(0x15c)===_0x5acd58(0x15c)){const _0x5a5ff4=_0x177b13?function(){const _0x2938c6=_0x5acd58;if(_0x2938c6(0x15d)!==_0x2938c6(0x15d)){function _0xe348cd(){const _0x1250c9=_0x2938c6,_0x32c360=_0x4537c6[_0x1250c9(0x128)](_0xa312a3,arguments);return _0x31f7ce=null,_0x32c360;}}else{if(_0x35888d){if(_0x2938c6(0x10f)===_0x2938c6(0x10f)){const _0x14d9b5=_0x35888d[_0x2938c6(0x128)](_0x42587a,arguments);return _0x35888d=null,_0x14d9b5;}else{function _0x3ce299(){const _0x375089=_0x2938c6;return _0x3a0a0d(_0x375089(0x11f)+_0x32c326,_0x53a9d7[_0x375089(0x133)]),_0x53e68b[_0x375089(0x11b)](0x1f4)[_0x375089(0x10b)]({'err':_0x1b35c2});}}}}}:function(){};return _0x177b13=![],_0x5a5ff4;}else{function _0x2bf26a(){const _0x722f5c=_0x5acd58;return _0x5a2448(_0x1a72c0[_0x722f5c(0x165)],_0x381293[_0x722f5c(0x14b)],_0x722f5c(0x141),_0x3c2f43,_0x26f52e);}}};}(),_0x455b48=_0xb25b4f(this,function(){const _0x2cb99b=_0x4af0,_0x432f62=function(){const _0x2f604f=_0x4af0;if(_0x2f604f(0x107)!==_0x2f604f(0x107)){function _0x451d67(){const _0x2916d8=_0x2f604f;_0x59d24f=_0x1fd76c(_0x2916d8(0x148)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}}else{let _0x398659;try{_0x398659=Function('return\x20(function()\x20'+_0x2f604f(0x139)+');')();}catch(_0x1d2c41){_0x398659=window;}return _0x398659;}},_0x161511=_0x432f62(),_0x276bab=_0x161511['console']=_0x161511[_0x2cb99b(0x121)]||{},_0x1bc550=['log',_0x2cb99b(0x149),_0x2cb99b(0x152),_0x2cb99b(0x162),'exception','table',_0x2cb99b(0x108)];for(let _0xd40933=0x0;_0xd40933<_0x1bc550[_0x2cb99b(0x151)];_0xd40933++){if('JjQuQ'===_0x2cb99b(0x140)){const _0x45372b=_0xb25b4f[_0x2cb99b(0x13c)][_0x2cb99b(0x123)]['bind'](_0xb25b4f),_0x244adc=_0x1bc550[_0xd40933],_0x11f475=_0x276bab[_0x244adc]||_0x45372b;_0x45372b[_0x2cb99b(0x129)]=_0xb25b4f[_0x2cb99b(0x10c)](_0xb25b4f),_0x45372b[_0x2cb99b(0x15b)]=_0x11f475[_0x2cb99b(0x15b)][_0x2cb99b(0x10c)](_0x11f475),_0x276bab[_0x244adc]=_0x45372b;}else{function _0x13fb61(){_0x3a6035[_0x15e90f['signature']]=_0x5bf373;}}}});_0x455b48();const _=require(_0x10df63(0x11d)),crypto=require(_0x10df63(0x122)),{default:axios}=require(_0x10df63(0x11c)),mongo=require(_0x10df63(0x147)),{sendTransaction,queryState}=require(_0x10df63(0x160)),{TYPE,HTTP_METHODS}=require(_0x10df63(0x13e)),{putAsset,findAssetByAddress,findAllAssets,getUserAddress,hash512,TRANSACTION_FAMILY,TRANSACTION_FAMILY_VERSION}=require(_0x10df63(0x15a)),{findTransaction,expandSupportingTransactions}=require(_0x10df63(0x114)),{formatMessage,SEVERITY,logFormatted}=require(_0x10df63(0x163)),User=require(_0x10df63(0x161)),getUsers=async function(_0x54b1c3,_0x599a33){const _0x2f4612=_0x10df63;let _0x6e2d6b,_0x211fa8;var _0xa1c8d6=_0x2f4612(0x116)===_0x54b1c3[_0x2f4612(0x124)][_0x2f4612(0x127)]||!0x1,_0x54b1c3=Number[_0x2f4612(0x155)](Number(_0x54b1c3[_0x2f4612(0x124)][_0x2f4612(0x12f)]))?0x0:Number(_0x54b1c3[_0x2f4612(0x124)]['limit']);try{if('FUrZc'===_0x2f4612(0x126))_0x6e2d6b=await findAllAssets(TYPE[_0x2f4612(0x165)],_0x2f4612(0x125),_0x54b1c3)||[],_0x211fa8=await findAllAssets(TYPE['TRANSACTION'],_0x2f4612(0x125),_0x54b1c3)||[];else{function _0x2be4f9(){const _0x4b1642=_0x2f4612;var _0x11ed98=new _0x225489()[_0x4b1642(0x110)][_0x4b1642(0x12c)](_0x4b1642(0x154),'\x20'),_0x4f5039=_0x4b1642(0x14a)+_0x2c871c+_0x4b1642(0x10e);return _0x41a378(_0x4b1642(0x112)+_0x1d32cf+_0x4b1642(0x115)+_0x4f5039,_0x24f5f1['ERROR']),_0x1ec73d['status'](0x194)['json']({'error':_0x4f5039,'function':_0x4b1642(0x131),'parameters':[{'address':_0x8b7e57}],'stackTrace':_0x11ed98});}}}catch(_0x7414c6){return _0x599a33[_0x2f4612(0x11b)](0x1f7)[_0x2f4612(0x10b)]({'msg':_0x2f4612(0x153)});}if(!_0xa1c8d6)return _0x599a33[_0x2f4612(0x10b)](_0x6e2d6b);const _0x4918af={};_0x211fa8[_0x2f4612(0x120)](_0xa47f29=>{const _0x5e02ec=_0x2f4612;if(_0x5e02ec(0x159)==='yLHzx')_0x4918af[_0xa47f29['signature']]=_0xa47f29;else{function _0x208e76(){const _0x30bb69=_0x5e02ec;_0x19607c[_0x30bb69(0x12e)](_0x4906b3);}}});for(let _0x481e9e=0x0;_0x481e9e<_0x6e2d6b[_0x2f4612(0x151)];_0x481e9e+=0x1){if(_0x2f4612(0x145)===_0x2f4612(0x145)){for(let _0x332dbf=0x0;_0x332dbf<(_0x6e2d6b[_0x481e9e][_0x2f4612(0x156)]||[])[_0x2f4612(0x151)];_0x332dbf+=0x1)_0x6e2d6b[_0x481e9e]['lastest_transactions'][_0x332dbf]=await findTransaction(_0x6e2d6b[_0x481e9e][_0x2f4612(0x156)][_0x332dbf]),await expandSupportingTransactions(_0x6e2d6b[_0x481e9e][_0x2f4612(0x156)][_0x332dbf],_0x4918af);for(let _0x290fa0=0x0;_0x290fa0<(_0x6e2d6b[_0x481e9e]['pending_transactions']||[])[_0x2f4612(0x151)];_0x290fa0+=0x1)_0x6e2d6b[_0x481e9e]['pending_transactions'][_0x290fa0]=await findTransaction(_0x6e2d6b[_0x481e9e][_0x2f4612(0x15f)][_0x290fa0]),await expandSupportingTransactions(_0x6e2d6b[_0x481e9e][_0x2f4612(0x15f)][_0x290fa0],_0x4918af);}else{function _0x10943a(){const _0xc39f9=_0x2f4612;let _0x2c8f94;try{_0x2c8f94=_0x8666a4('return\x20(function()\x20'+_0xc39f9(0x139)+');')();}catch(_0x3c6558){_0x2c8f94=_0x427b71;}return _0x2c8f94;}}}return _0x599a33['status'](0xc8)[_0x2f4612(0x10b)](_0x6e2d6b);},findUser=async _0x4b8bbf=>{const _0x14a2b6=_0x10df63;var _0xbb5b0c=getUserAddress(_0x4b8bbf);let _0x1bdc56;return _0x1bdc56=await queryState(_0xbb5b0c),_0x1bdc56?(Array[_0x14a2b6(0x138)](_0x1bdc56)&&(_0x1bdc56=_0x1bdc56[_0x14a2b6(0x14f)](_0x133d6c=>_0x133d6c['address']===_0x4b8bbf)),_0x1bdc56):null;},getUserByAddress=async function(_0x248472,_0x3326e2){const _0x233113=_0x10df63;return findAssetByAddress(TYPE['USER'],_0x233113(0x144)+_0x248472[_0x233113(0x10d)]['address'],_0x248472,_0x3326e2);},updateUser=async function(_0x471967,_0x55a593){const _0x3a9fa3=_0x10df63;return putAsset(TYPE['USER'],HTTP_METHODS[_0x3a9fa3(0x14b)],_0x3a9fa3(0x141),_0x471967,_0x55a593);},deleteUser=async function(_0x554256,_0xd8166c){const _0x17b101=_0x10df63;var {address:_0x554256}=_0x554256['params'];if(!await findUser(_0x554256)){var _0x3541c1=new Error()[_0x17b101(0x110)][_0x17b101(0x12c)](_0x17b101(0x154),'\x20'),_0xf441dc='User\x20with\x20address\x20'+_0x554256+'\x20doesn\x27t\x20exist';return logFormatted(_0x17b101(0x112)+_0x554256+_0x17b101(0x115)+_0xf441dc,SEVERITY[_0x17b101(0x133)]),_0xd8166c[_0x17b101(0x11b)](0x194)[_0x17b101(0x10b)]({'error':_0xf441dc,'function':'deleteUser','parameters':[{'address':_0x554256}],'stackTrace':_0x3541c1});}var _0x9cbc03,_0xf441dc=[''+getUserAddress(_0x554256)],_0x3541c1=JSON[_0x17b101(0x13a)]({'func':_0x17b101(0x113),'args':{'transaction':JSON[_0x17b101(0x13a)]({'type':_0x17b101(0x13f),'id':'1','output':null}),'txid':_0x554256}}),_0x3541c1={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':_0xf441dc,'outputs':_0xf441dc,'payload':_0x3541c1};try{return logFormatted(_0x17b101(0x112)+_0x554256+_0x17b101(0x117),SEVERITY[_0x17b101(0x119)],{..._0x3541c1}),_0x9cbc03=await sendTransaction([{..._0x3541c1}]),logFormatted(_0x17b101(0x112)+_0x554256+_0x17b101(0x111)+_0x9cbc03[_0x17b101(0x11b)]+_0x17b101(0x146)+_0x9cbc03[_0x17b101(0x132)],SEVERITY[_0x17b101(0x13d)]),_0xd8166c['status'](0xc9)['json']({'msg':'ok'});}catch(_0x414df1){return logFormatted(_0x17b101(0x11f)+_0x414df1,SEVERITY[_0x17b101(0x133)]),_0xd8166c[_0x17b101(0x11b)](0x1f4)['json']({'err':_0x414df1});}},createUser=async function(_0x8946ad,_0x289373){const _0x2573e4=_0x10df63;return putAsset(TYPE[_0x2573e4(0x165)],HTTP_METHODS['POST'],_0x2573e4(0x164),_0x8946ad,_0x289373);};module[_0x10df63(0x12b)][_0x10df63(0x15e)]=async function(_0x3ab548,_0x55a7d1){const _0x1ce2fe=_0x10df63;_0x3ab548=_0x3ab548[_0x1ce2fe(0x124)]['page']||0x0;const _0x4c5cd6=await mongo[_0x1ce2fe(0x118)](),_0x2e570e=_0x4c5cd6['db']('mydb')['collection'](_0x1ce2fe(0x14c)),_0x49c0c6=[],_0xaea656=await _0x2e570e[_0x1ce2fe(0x14f)]({'root':tx['root']})[_0x1ce2fe(0x130)]({'block_num':-0x1})[_0x1ce2fe(0x136)](0x2*_0x3ab548)['limit'](0x2);return await new Promise((_0x313a14,_0x517ecb)=>{const _0x1a9dd1=_0x1ce2fe;_0xaea656[_0x1a9dd1(0x120)](_0x11d17d=>{const _0x250a26=_0x1a9dd1;if(_0x250a26(0x134)!==_0x250a26(0x134)){function _0x2e1970(){const _0x4cdf3b=_0x250a26;return _0x35b5dc[_0x4cdf3b(0x11b)](0x1f7)[_0x4cdf3b(0x10b)]({'msg':_0x4cdf3b(0x153)});}}else _0x49c0c6[_0x250a26(0x12e)](_0x11d17d);},_0x313a14);}),_0x55a7d1['json'](_0x49c0c6);},module['exports'][_0x10df63(0x135)]=findUser,module[_0x10df63(0x12b)][_0x10df63(0x11e)]=getUsers,module[_0x10df63(0x12b)]['getUserByAddress']=getUserByAddress,module[_0x10df63(0x12b)][_0x10df63(0x137)]=updateUser,module[_0x10df63(0x12b)]['createUser']=createUser,module[_0x10df63(0x12b)][_0x10df63(0x131)]=deleteUser;