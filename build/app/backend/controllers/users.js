var _0x1ef7=['USER','constructor','sort','info','\x20doesn\x27t\x20exist','root','statusText','../models/User','forEach','IWNmS','delete','GET\x20/users','../sawtooth/sawtooth-helpers','table','skip','replace','\x20|\x20BATCH\x20Request:','ERROR','push','log','address','760718cnYKIV','2308CeshvG','deleteUser','1HKwSKH','257885bjuQrB','1UupKWf','crypto','exception','NOTIFY','DELETE\x20/users\x20|\x20BATCH\x20Response:\x20','POST\x20/users','cnk-cryptocurrency_users','DELETE\x20/users/','\x20-\x20','416022rwRLxi','PUT','bind','\x20|\x20BATCH\x20Response:\x20','31nOPdYK','1179385KuZaOf','limit','length','stringify','mydb','prototype','SUCCESS','POST','getUsers','updateUser','__proto__','../utils/constants','console','collection','isArray','axios','1049928fHjaFJ','{}.constructor(\x22return\x20this\x22)(\x20)','params','status','json','GET\x20/user/','trace','apply','2130753LChujY','exports','find','../database/utils/mongo','PUT\x20/users','createUser','toString','user','getUserHistory','error'];var _0x45c8=function(_0x4c61b0,_0x2c6b08){_0x4c61b0=_0x4c61b0-0x1c0;var _0xd42928=_0x1ef7[_0x4c61b0];return _0xd42928;};var _0x5088b4=_0x45c8;(function(_0xa284e4,_0x10f208){var _0x473017=_0x45c8;while(!![]){try{var _0x196377=-parseInt(_0x473017(0x1d9))+-parseInt(_0x473017(0x1d0))*-parseInt(_0x473017(0x1cf))+parseInt(_0x473017(0x1ee))+parseInt(_0x473017(0x1cb))+parseInt(_0x473017(0x1de))*parseInt(_0x473017(0x1ce))+-parseInt(_0x473017(0x1cc))*parseInt(_0x473017(0x1dd))+-parseInt(_0x473017(0x1f6));if(_0x196377===_0x10f208)break;else _0xa284e4['push'](_0xa284e4['shift']());}catch(_0x591cb1){_0xa284e4['push'](_0xa284e4['shift']());}}}(_0x1ef7,0x99b59));var _0x3e5aa0=function(){var _0x36c6f5=!![];return function(_0x538ef2,_0x5df642){var _0x386d62=_0x36c6f5?function(){var _0x5ca65a=_0x45c8;if(_0x5ca65a(0x209)==='IWNmS'){if(_0x5df642){var _0x1e9c79=_0x5df642[_0x5ca65a(0x1f5)](_0x538ef2,arguments);return _0x5df642=null,_0x1e9c79;}}else{function _0x5f1523(){var _0x4d30e5=_0x5ca65a;return _0x2e2d52(_0x27f8db[_0x4d30e5(0x200)],_0x5df853[_0x4d30e5(0x1da)],_0x4d30e5(0x1fa),_0x51ee01,_0x161394);}}}:function(){};return _0x36c6f5=![],_0x386d62;};}(),_0x272966=_0x3e5aa0(this,function(){var _0x72c458=_0x45c8,_0x3fba35;try{var _0x218e1d=Function('return\x20(function()\x20'+_0x72c458(0x1ef)+');');_0x3fba35=_0x218e1d();}catch(_0x3af23f){_0x3fba35=window;}var _0x4dcfab=_0x3fba35[_0x72c458(0x1ea)]=_0x3fba35['console']||{},_0x448261=[_0x72c458(0x1c9),'warn',_0x72c458(0x203),_0x72c458(0x1ff),_0x72c458(0x1d2),_0x72c458(0x1c3),_0x72c458(0x1f4)];for(var _0x4c449f=0x0;_0x4c449f<_0x448261[_0x72c458(0x1e0)];_0x4c449f++){var _0xe54562=_0x3e5aa0[_0x72c458(0x201)][_0x72c458(0x1e3)]['bind'](_0x3e5aa0),_0x57ed1a=_0x448261[_0x4c449f],_0x2a18a4=_0x4dcfab[_0x57ed1a]||_0xe54562;_0xe54562[_0x72c458(0x1e8)]=_0x3e5aa0[_0x72c458(0x1db)](_0x3e5aa0),_0xe54562[_0x72c458(0x1fc)]=_0x2a18a4[_0x72c458(0x1fc)][_0x72c458(0x1db)](_0x2a18a4),_0x4dcfab[_0x57ed1a]=_0xe54562;}});_0x272966();const _=require('underscore'),crypto=require(_0x5088b4(0x1d1)),{default:axios}=require(_0x5088b4(0x1ed)),mongo=require(_0x5088b4(0x1f9)),{sendTransaction,queryState}=require(_0x5088b4(0x1c2)),{TYPE,HTTP_METHODS}=require(_0x5088b4(0x1e9)),{putAsset,findAssetByAddress,findAllAssets,getUserAddress,hash512,TRANSACTION_FAMILY,TRANSACTION_FAMILY_VERSION}=require('./common'),{formatMessage,SEVERITY,logFormatted}=require('../utils/logger'),User=require(_0x5088b4(0x207)),getUsers=async function(_0x52e5f7,_0x35a6bc){var _0x86a0d=_0x5088b4;try{var _0x5030a1=findAllAssets(TYPE[_0x86a0d(0x200)],_0x86a0d(0x1c1));return _0x35a6bc[_0x86a0d(0x1f2)](_0x5030a1);}catch(_0x824871){}},findUser=async _0x68bcfd=>{var _0x3a5ec0=_0x5088b4,_0x4f2157=getUserAddress(_0x68bcfd);let _0x4989c4;return _0x4989c4=await queryState(_0x4f2157),_0x4989c4?(Array[_0x3a5ec0(0x1ec)](_0x4989c4)&&(_0x4989c4=_0x4989c4[_0x3a5ec0(0x1f8)](_0x16f1e9=>_0x16f1e9[_0x3a5ec0(0x1ca)]===_0x68bcfd)),_0x4989c4):null;},getUserByAddress=async function(_0x19deae,_0x1ac895){var _0x25b9a8=_0x5088b4;return findAssetByAddress(TYPE[_0x25b9a8(0x200)],_0x25b9a8(0x1f3)+_0x19deae[_0x25b9a8(0x1f0)][_0x25b9a8(0x1ca)],_0x19deae,_0x1ac895);},updateUser=async function(_0x5f00fe,_0x5a6046){var _0x74a182=_0x5088b4;return putAsset(TYPE[_0x74a182(0x200)],HTTP_METHODS[_0x74a182(0x1da)],'PUT\x20/users',_0x5f00fe,_0x5a6046);},deleteUser=async function(_0x47a0e1,_0x7c92ca){var _0x5b03cf=_0x5088b4,{address:_0x47a0e1}=_0x47a0e1[_0x5b03cf(0x1f0)];if(!await findUser(_0x47a0e1)){var _0x2db566=new Error()['stack'][_0x5b03cf(0x1c5)]('\x0a\x20\x20\x20\x20','\x20'),_0x28cf99='User\x20with\x20address\x20'+_0x47a0e1+_0x5b03cf(0x204);return logFormatted(_0x5b03cf(0x1d7)+_0x47a0e1+'\x20|\x20Error\x20at\x20deleteUser\x20-\x20'+_0x28cf99,SEVERITY[_0x5b03cf(0x1c7)]),_0x7c92ca['status'](0x194)[_0x5b03cf(0x1f2)]({'error':_0x28cf99,'function':_0x5b03cf(0x1cd),'parameters':[{'address':_0x47a0e1}],'stackTrace':_0x2db566});}var _0x35a0fd,_0x28cf99=[''+getUserAddress(_0x47a0e1)],_0x2db566=JSON[_0x5b03cf(0x1e1)]({'func':_0x5b03cf(0x1c0),'args':{'transaction':JSON['stringify']({'type':_0x5b03cf(0x1fd),'id':'1','output':null}),'txid':_0x47a0e1}}),_0x2db566={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':_0x28cf99,'outputs':_0x28cf99,'payload':_0x2db566};try{return logFormatted(_0x5b03cf(0x1d7)+_0x47a0e1+_0x5b03cf(0x1c6),SEVERITY[_0x5b03cf(0x1d3)],{..._0x2db566}),_0x35a0fd=await sendTransaction([{..._0x2db566}]),logFormatted(_0x5b03cf(0x1d7)+_0x47a0e1+_0x5b03cf(0x1dc)+_0x35a0fd[_0x5b03cf(0x1f1)]+_0x5b03cf(0x1d8)+_0x35a0fd[_0x5b03cf(0x206)],SEVERITY[_0x5b03cf(0x1e4)]),_0x7c92ca[_0x5b03cf(0x1f1)](0xc9)[_0x5b03cf(0x1f2)]({'msg':'ok'});}catch(_0x5a8cc6){return logFormatted(_0x5b03cf(0x1d4)+_0x5a8cc6,SEVERITY[_0x5b03cf(0x1c7)]),_0x7c92ca['status'](0x1f4)[_0x5b03cf(0x1f2)]({'err':_0x5a8cc6});}},createUser=async function(_0x5baf24,_0x1de56b){var _0xb6ad49=_0x5088b4;return putAsset(TYPE[_0xb6ad49(0x200)],HTTP_METHODS[_0xb6ad49(0x1e5)],_0xb6ad49(0x1d5),_0x5baf24,_0x1de56b);};module[_0x5088b4(0x1f7)][_0x5088b4(0x1fe)]=async function(_0x1326cb,_0x6316e2){var _0x32bde0=_0x5088b4;_0x1326cb=_0x1326cb['query']['page']||0x0;const _0x5cfe3a=await mongo['getClient'](),_0x1b2686=_0x5cfe3a['db'](_0x32bde0(0x1e2))[_0x32bde0(0x1eb)](_0x32bde0(0x1d6)),_0x37a25=[],_0x3c6fed=await _0x1b2686[_0x32bde0(0x1f8)]({'root':tx[_0x32bde0(0x205)]})[_0x32bde0(0x202)]({'block_num':-0x1})[_0x32bde0(0x1c4)](0x2*_0x1326cb)[_0x32bde0(0x1df)](0x2);return await new Promise((_0x185412,_0x31ecd6)=>{var _0x566b57=_0x32bde0;_0x3c6fed[_0x566b57(0x208)](_0x29e306=>{var _0x5c363e=_0x566b57;_0x37a25[_0x5c363e(0x1c8)](_0x29e306);},_0x185412);}),_0x6316e2[_0x32bde0(0x1f2)](_0x37a25);},module[_0x5088b4(0x1f7)]['findUser']=findUser,module[_0x5088b4(0x1f7)][_0x5088b4(0x1e6)]=getUsers,module['exports']['getUserByAddress']=getUserByAddress,module[_0x5088b4(0x1f7)][_0x5088b4(0x1e7)]=updateUser,module[_0x5088b4(0x1f7)][_0x5088b4(0x1fb)]=createUser,module['exports'][_0x5088b4(0x1cd)]=deleteUser;