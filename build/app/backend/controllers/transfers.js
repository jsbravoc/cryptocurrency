var _0x4a47=['SUCCESS','crypto','findTransfer','NOTIFY','597790tUWMFB','deleteUser','user','GET\x20/transfers','../utils/logger','axios','toString','collection','sort','stringify','return\x20(function()\x20','POST\x20/transfers','TRANSFER','\x20|\x20Error\x20at\x20deleteUser\x20-\x20','1148116RnKMUR','action','uznjY','stack','params','../models/User','ZumuF','root','getTransfers','./common','../sawtooth/sawtooth-helpers','constructor','console','User\x20with\x20address\x20','POST','DELETE\x20/users/','updateTransfer','limit','9292GgAvkO','find','vltvv','query','751215cdAfDM','\x20|\x20BATCH\x20Request:','isEmpty','\x0a\x20\x20\x20\x20','address','mydb','statusText','1583787wLCPxV','underscore','1767919YnPlkQ','status','1qrqIWz','push','GET\x20/transfer/','getClient','json','60254KPLwzZ','__proto__','prototype','../database/utils/mongo','bind','{}.constructor(\x22return\x20this\x22)(\x20)','\x20-\x20','apply','1gbkcPR','YGRRO','ERROR','exports','../utils/constants','isArray'];var _0x47f1=function(_0x31de76,_0x511766){_0x31de76=_0x31de76-0xff;var _0x26fab6=_0x4a47[_0x31de76];return _0x26fab6;};var _0x4a0dd8=_0x47f1;(function(_0x3c098b,_0x58a053){var _0x5b7deb=_0x47f1;while(!![]){try{var _0x3c6c9f=-parseInt(_0x5b7deb(0x112))+-parseInt(_0x5b7deb(0x132))+-parseInt(_0x5b7deb(0x10d))*-parseInt(_0x5b7deb(0x144))+parseInt(_0x5b7deb(0x109))+-parseInt(_0x5b7deb(0x124))+-parseInt(_0x5b7deb(0x102))+parseInt(_0x5b7deb(0x10b))*parseInt(_0x5b7deb(0x11a));if(_0x3c6c9f===_0x58a053)break;else _0x3c098b['push'](_0x3c098b['shift']());}catch(_0x3bfbe9){_0x3c098b['push'](_0x3c098b['shift']());}}}(_0x4a47,0xc4327));var _0x1d6a20=function(){var _0x5d67d2=!![];return function(_0x3b78fb,_0xea784){var _0x8a112b=_0x47f1;if(_0x8a112b(0x138)===_0x8a112b(0x138)){var _0x5a82e2=_0x5d67d2?function(){var _0x4272ac=_0x8a112b;if(_0x4272ac(0x11b)==='YGRRO'){if(_0xea784){var _0x35c67c=_0xea784[_0x4272ac(0x119)](_0x3b78fb,arguments);return _0xea784=null,_0x35c67c;}}else{function _0x4c9b9a(){var _0x5cb4cd=_0x4272ac,_0x243ca1=_0x1c28be[_0x5cb4cd(0x13d)][_0x5cb4cd(0x114)][_0x5cb4cd(0x116)](_0x4bb1c1),_0x31e510=_0x34262b[_0x4a863a],_0x1bbb3f=_0x40dfc7[_0x31e510]||_0x243ca1;_0x243ca1['__proto__']=_0x33b077['bind'](_0x5ddafc),_0x243ca1[_0x5cb4cd(0x12a)]=_0x1bbb3f[_0x5cb4cd(0x12a)]['bind'](_0x1bbb3f),_0x50e604[_0x31e510]=_0x243ca1;}}}:function(){};return _0x5d67d2=![],_0x5a82e2;}else{function _0x369e4d(){var _0x1aab02=_0x8a112b;return _0xa4bbe3('DELETE\x20/users\x20|\x20BATCH\x20Response:\x20'+_0x57692e,_0x4f8669['ERROR']),_0x6e0e7b[_0x1aab02(0x10c)](0x1f4)[_0x1aab02(0x111)]({'err':_0x16bcd6});}}};}(),_0xcb0714=_0x1d6a20(this,function(){var _0x55b791=_0x47f1,_0x5a96ee=function(){var _0x542011=_0x47f1,_0xe9b663;try{_0xe9b663=Function(_0x542011(0x12e)+_0x542011(0x117)+');')();}catch(_0x457c1e){_0xe9b663=window;}return _0xe9b663;},_0x17c15b=_0x5a96ee(),_0x32a286=_0x17c15b[_0x55b791(0x13e)]=_0x17c15b[_0x55b791(0x13e)]||{},_0xd0ff02=['log','warn','info','error','exception','table','trace'];for(var _0x5670a5=0x0;_0x5670a5<_0xd0ff02['length'];_0x5670a5++){var _0x118ffd=_0x1d6a20['constructor']['prototype']['bind'](_0x1d6a20),_0x54e188=_0xd0ff02[_0x5670a5],_0x1a33b7=_0x32a286[_0x54e188]||_0x118ffd;_0x118ffd[_0x55b791(0x113)]=_0x1d6a20[_0x55b791(0x116)](_0x1d6a20),_0x118ffd['toString']=_0x1a33b7['toString']['bind'](_0x1a33b7),_0x32a286[_0x54e188]=_0x118ffd;}});_0xcb0714();const _=require(_0x4a0dd8(0x10a)),crypto=require(_0x4a0dd8(0x121)),{default:axios}=require(_0x4a0dd8(0x129)),mongo=require(_0x4a0dd8(0x115)),{sendTransaction,queryState}=require(_0x4a0dd8(0x13c)),{TYPE,HTTP_METHODS}=require(_0x4a0dd8(0x11e)),{putAsset,findAssetByAddress,findAllAssets,getUserAddress,hash512,TRANSACTION_FAMILY,TRANSACTION_FAMILY_VERSION,getTransferAddress}=require(_0x4a0dd8(0x13b)),{formatMessage,SEVERITY,logFormatted}=require(_0x4a0dd8(0x128)),User=require(_0x4a0dd8(0x137)),getTransfers=async function(_0x40347f,_0x226076){var _0x1dfb7d=_0x4a0dd8;try{var _0x2a6139=findAllAssets(TYPE['TRANSFER'],_0x1dfb7d(0x127));return _0x226076[_0x1dfb7d(0x111)](_0x2a6139);}catch(_0x4559c2){}},findTransfer=async _0x1e763a=>{var _0x575741=_0x4a0dd8,_0x2b5876=getTransferAddress(_0x1e763a);let _0x31f0f6;return _0x31f0f6=await queryState(_0x2b5876),_0x31f0f6?(Array[_0x575741(0x11f)](_0x31f0f6)&&(_0x31f0f6=_0x31f0f6[_0x575741(0xff)](_0x26997d=>_0x26997d['address']===_0x1e763a)),_0x31f0f6):null;},getTransferByAddress=async function(_0x4cacee,_0x459ac4){var _0x2c6ee2=_0x4a0dd8;return findAssetByAddress(TYPE[_0x2c6ee2(0x130)],_0x2c6ee2(0x10f)+_0x4cacee['params']['address'],_0x4cacee,_0x459ac4);},updateTransfer=async function(_0x270afa,_0x26fcaa){var _0x1d9fba=_0x4a0dd8,{address:_0x383d3a}=_0x270afa[_0x1d9fba(0x136)];if(!_0x270afa[_0x1d9fba(0x136)][_0x1d9fba(0x106)])return _0x26fcaa['status'](0x190);_0x383d3a=findTransfer(_0x383d3a);if(!_0x383d3a)return _0x26fcaa[_0x1d9fba(0x10c)](0x190);var {actions:_0x383d3a}=_0x383d3a,_0x270afa=_0x270afa['query'][_0x1d9fba(0x133)];_[_0x1d9fba(0x104)](_0x383d3a[_0x270afa]);},deleteUser=async function(_0x2cd7d4,_0x59a811){var _0x267a5b=_0x4a0dd8,{address:_0x2cd7d4}=_0x2cd7d4[_0x267a5b(0x136)];if(!await findUser(_0x2cd7d4)){if(_0x267a5b(0x100)!==_0x267a5b(0x100)){function _0x1bd462(){var _0x1e5a28=_0x267a5b,{address:_0x3cdb8a}=_0x462819[_0x1e5a28(0x136)];if(!_0x462819['params']['address'])return _0x2c487f['status'](0x190);_0x3cdb8a=_0x4351a4(_0x3cdb8a);if(!_0x3cdb8a)return _0x125e2e[_0x1e5a28(0x10c)](0x190);var {actions:_0x3cdb8a}=_0x3cdb8a,_0x462819=_0x462819[_0x1e5a28(0x101)]['action'];_0x54cd52[_0x1e5a28(0x104)](_0x3cdb8a[_0x462819]);}}else{var _0x589f38=new Error()[_0x267a5b(0x135)]['replace'](_0x267a5b(0x105),'\x20'),_0x4c565a=_0x267a5b(0x13f)+_0x2cd7d4+'\x20doesn\x27t\x20exist';return logFormatted(_0x267a5b(0x141)+_0x2cd7d4+_0x267a5b(0x131)+_0x4c565a,SEVERITY[_0x267a5b(0x11c)]),_0x59a811[_0x267a5b(0x10c)](0x194)['json']({'error':_0x4c565a,'function':_0x267a5b(0x125),'parameters':[{'address':_0x2cd7d4}],'stackTrace':_0x589f38});}}var _0x1bf58a,_0x4c565a=[''+getUserAddress(_0x2cd7d4)],_0x589f38=JSON['stringify']({'func':'delete','args':{'transaction':JSON[_0x267a5b(0x12d)]({'type':_0x267a5b(0x126),'id':'1','output':null}),'txid':_0x2cd7d4}}),_0x589f38={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':_0x4c565a,'outputs':_0x4c565a,'payload':_0x589f38};try{return logFormatted(_0x267a5b(0x141)+_0x2cd7d4+_0x267a5b(0x103),SEVERITY[_0x267a5b(0x123)],{..._0x589f38}),_0x1bf58a=await sendTransaction([{..._0x589f38}]),logFormatted(_0x267a5b(0x141)+_0x2cd7d4+'\x20|\x20BATCH\x20Response:\x20'+_0x1bf58a['status']+_0x267a5b(0x118)+_0x1bf58a[_0x267a5b(0x108)],SEVERITY[_0x267a5b(0x120)]),_0x59a811[_0x267a5b(0x10c)](0xc9)[_0x267a5b(0x111)]({'msg':'ok'});}catch(_0x4f3906){return logFormatted('DELETE\x20/users\x20|\x20BATCH\x20Response:\x20'+_0x4f3906,SEVERITY[_0x267a5b(0x11c)]),_0x59a811['status'](0x1f4)[_0x267a5b(0x111)]({'err':_0x4f3906});}},createTransfer=async function(_0x5c3d4f,_0x3168ea){var _0xd0a6f3=_0x4a0dd8;return putAsset(TYPE[_0xd0a6f3(0x130)],HTTP_METHODS[_0xd0a6f3(0x140)],_0xd0a6f3(0x12f),_0x5c3d4f,_0x3168ea);};module[_0x4a0dd8(0x11d)]['getUserHistory']=async function(_0x2a410f,_0x580194){var _0x10f62d=_0x4a0dd8;_0x2a410f=_0x2a410f[_0x10f62d(0x101)]['page']||0x0;const _0x39e696=await mongo[_0x10f62d(0x110)](),_0x1e7fab=_0x39e696['db'](_0x10f62d(0x107))[_0x10f62d(0x12b)]('cnk-cryptocurrency_users'),_0xc9e42d=[],_0x2d89ae=await _0x1e7fab[_0x10f62d(0xff)]({'root':tx[_0x10f62d(0x139)]})[_0x10f62d(0x12c)]({'block_num':-0x1})['skip'](0x2*_0x2a410f)[_0x10f62d(0x143)](0x2);return await new Promise((_0x2fbf83,_0x767173)=>{var _0x228514=_0x10f62d;if(_0x228514(0x134)!==_0x228514(0x134)){function _0x1923ae(){var _0x5ca61c=_0x228514;if(_0x1411d6){var _0x595009=_0x2896b8[_0x5ca61c(0x119)](_0x935ea0,arguments);return _0x214681=null,_0x595009;}}}else _0x2d89ae['forEach'](_0x185749=>{var _0x2a4fbe=_0x228514;_0xc9e42d[_0x2a4fbe(0x10e)](_0x185749);},_0x2fbf83);}),_0x580194[_0x10f62d(0x111)](_0xc9e42d);},module[_0x4a0dd8(0x11d)][_0x4a0dd8(0x122)]=findTransfer,module[_0x4a0dd8(0x11d)][_0x4a0dd8(0x13a)]=getTransfers,module[_0x4a0dd8(0x11d)]['getTransferByAddress']=getTransferByAddress,module[_0x4a0dd8(0x11d)][_0x4a0dd8(0x142)]=updateTransfer,module[_0x4a0dd8(0x11d)]['createTransfer']=createTransfer,module[_0x4a0dd8(0x11d)]['deleteUser']=deleteUser;