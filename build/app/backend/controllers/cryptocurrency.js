const _0x1fcb=['ZZPin','628093BioUqy','valid_true','skip','RECIPIENT','../models/User','exports','post','PUT\x20/transaction\x20|\x20BATCH\x20Response:\x20','hideInvalid','781279uNJOnd','hsMEp','limit','TpXDU','updateTransaction','SENDER','query','SUCCESS','zsyhv','553236YOUgip','error','TRANSACTION','Transaction\x20created','FHUsL','apply','isNaN','supporting_transactions','valid','../sawtooth/sawtooth-helpers','10594NJUbei','FgMTS','MrYdh','address','GET\x20/transaction/','BOYbv','sort','statusText','\x20-\x20','kYkhG','isArray','{}.constructor(\x22return\x20this\x22)(\x20)','return\x20(function()\x20','psBzQ','toString','addTransaction','findTransaction',':\x0a\x20Sender:\x20','142810FvLkyC','removePendingTransaction','log','Resulting\x20change\x20of\x20transaction\x20','bind','getTransactionByAddress','valid_thru','find','getClient','LnPXk','mydb','5UoVLLf','1HhImRR','__proto__','stringify','../utils/logger','body','Transaction\x20updated','push','signature','getTransactions','filter','info','Sawtooth\x20service\x20unavailable','POST\x20/transaction\x20|\x20BATCH\x20Response:\x20','ERROR','json','constructor','getSupportingTransactions','string','225332iWDiFm','1tbVVlw','console','getTransactionHistory','crypto','expanded','status','length','338543ULzLUf','19yjevec','forEach','../utils/constants','\x0aAmount:\x20','type','NuJFJ','true','all','fgesn','HsYyV','toFixed','GET\x20/cryptocurrency','expandSupportingTransactions','1pfuKud','\x0aChange:\x20','1yeGbQN','underscore','params','collection','amount','table','OBDkn','eQNkK','../models/Transaction','USER','cnk-cryptocurrency_users','addSupportingTransaction','\x0aRecipient:\x20'];const _0x11f5=function(_0x387794,_0x475e91){_0x387794=_0x387794-0x102;let _0x3be774=_0x1fcb[_0x387794];return _0x3be774;};const _0x4b7be7=_0x11f5;(function(_0x25a9d8,_0x3da4cd){const _0x5cf5bb=_0x11f5;while(!![]){try{const _0x756768=parseInt(_0x5cf5bb(0x145))*parseInt(_0x5cf5bb(0x15f))+-parseInt(_0x5cf5bb(0x16d))*-parseInt(_0x5cf5bb(0x114))+-parseInt(_0x5cf5bb(0x16f))*parseInt(_0x5cf5bb(0x11d))+parseInt(_0x5cf5bb(0x10b))*parseInt(_0x5cf5bb(0x158))+parseInt(_0x5cf5bb(0x127))*-parseInt(_0x5cf5bb(0x160))+-parseInt(_0x5cf5bb(0x144))*parseInt(_0x5cf5bb(0x139))+parseInt(_0x5cf5bb(0x157));if(_0x756768===_0x3da4cd)break;else _0x25a9d8['push'](_0x25a9d8['shift']());}catch(_0x545419){_0x25a9d8['push'](_0x25a9d8['shift']());}}}(_0x1fcb,0x7b363));const _0x45235a=function(){let _0x3cc1c8=!![];return function(_0x51a083,_0x29d95d){const _0x55b5f4=_0x3cc1c8?function(){const _0xe29c48=_0x11f5;if(_0x29d95d){const _0x5bf88a=_0x29d95d[_0xe29c48(0x122)](_0x51a083,arguments);return _0x29d95d=null,_0x5bf88a;}}:function(){};return _0x3cc1c8=![],_0x55b5f4;};}(),_0x58f0b4=_0x45235a(this,function(){const _0x3b274d=_0x11f5,_0x3ce081=function(){const _0x3acf36=_0x11f5;let _0x27c9aa;try{_0x27c9aa=Function('return\x20(function()\x20'+_0x3acf36(0x132)+');')();}catch(_0x548cda){_0x27c9aa=window;}return _0x27c9aa;},_0x36a21f=_0x3ce081(),_0x4e4c4b=_0x36a21f[_0x3b274d(0x159)]=_0x36a21f[_0x3b274d(0x159)]||{},_0x149e3d=[_0x3b274d(0x13b),'warn',_0x3b274d(0x14f),_0x3b274d(0x11e),'exception',_0x3b274d(0x102),'trace'];for(let _0x5a5921=0x0;_0x5a5921<_0x149e3d[_0x3b274d(0x15e)];_0x5a5921++){const _0x20c57c=_0x45235a[_0x3b274d(0x154)]['prototype']['bind'](_0x45235a),_0x32e143=_0x149e3d[_0x5a5921],_0xf87f10=_0x4e4c4b[_0x32e143]||_0x20c57c;_0x20c57c[_0x3b274d(0x146)]=_0x45235a['bind'](_0x45235a),_0x20c57c[_0x3b274d(0x135)]=_0xf87f10[_0x3b274d(0x135)][_0x3b274d(0x13d)](_0xf87f10),_0x4e4c4b[_0x32e143]=_0x20c57c;}});_0x58f0b4();const _=require(_0x4b7be7(0x170)),crypto=require(_0x4b7be7(0x15b)),mongo=require('../database/utils/mongo'),{sendTransaction,queryState}=require(_0x4b7be7(0x126)),{SEVERITY,logFormatted}=require(_0x4b7be7(0x148)),Transaction=require(_0x4b7be7(0x105)),User=require(_0x4b7be7(0x10f)),{findAssetByAddress,findAllAssets,findByAddress,getTransactionAddress,getUserAddress,TRANSACTION_FAMILY,TRANSACTION_FAMILY_VERSION,hash512}=require('./common'),{TYPE,MAXIMUM_FLOAT_PRECISION,USER_TYPE}=require(_0x4b7be7(0x162)),findTransaction=async _0x1cd756=>{const _0x26e837=_0x4b7be7;var _0x1c844a=getTransactionAddress(_0x1cd756);let _0x22bf38;return _0x22bf38=await queryState(_0x1c844a),_0x22bf38?(Array['isArray'](_0x22bf38)&&(_0x22bf38=_0x22bf38[_0x26e837(0x140)](_0xc6109c=>_0xc6109c['address']===_0x1cd756)),_0x22bf38):null;},getSupportingTransactions=async _0x1fb056=>{const _0x1176da=_0x4b7be7;var {amount:_0x1e8a8d,recipient:_0x2b358f,sender:_0x1fb056}=_0x1fb056,_0x2b358f=new User(await findByAddress(TYPE[_0x1176da(0x106)],_0x2b358f));let _0x11cc29;if(_0x1fb056){if(_0x1176da(0x121)!==_0x1176da(0x121)){function _0x3fbeb5(){const _0x45803c=_0x1176da;_0x21c3f8[_0x45803c(0x131)](_0x2671f9)&&_0x32f36a[_0x45803c(0x161)](_0x16f384=>{const _0x93e2a=_0x45803c;_0x149c95[_0x93e2a(0x108)](_0x16f384[_0x93e2a(0x14c)]),_0x3bad13[_0x93e2a(0x14b)](_0x4195dd(_0x16f384[_0x93e2a(0x14c)]));}),_0x3b16e8[_0x45803c(0x136)](_0x5676f3[_0x45803c(0x10e)],_0x53ceae,_0x24760d,_0xcdecda),_0x2e824b=_0x1981b6[_0x45803c(0x135)](!0x1,!0x1),(_0x316492=_0x32fb28(_0x4aa1d6),_0x59fbe5=_0x240ed2[_0x45803c(0x147)]({'func':_0x45803c(0x111),'args':{'transaction':_0x16c016,'txid':_0x201ec2}}));if(_0xa45f4={'transactionFamily':_0x20f2a0,'transactionFamilyVersion':_0x4e6042,'inputs':[_0x574bf0],'outputs':[_0x442b6c],'payload':_0x476761},_0x53e029){_0x138230[_0x45803c(0x131)](_0x19800a)&&_0x2f326c['forEach'](_0x1fa7af=>_0x41f3c3[_0x45803c(0x136)](_0x128c91[_0x45803c(0x119)],_0x1fa7af[_0x45803c(0x173)],_0x1fa7af[_0x45803c(0x14c)],_0x1f4d4d)),_0x2a657e=-_0xf315c9;if(0x0<_0x4d691d){var _0x119752='Resulting\x20change\x20of\x20transaction\x20'+_0x37e49a[_0x45803c(0x14c)]+':\x0a\x20Sender:\x20'+_0xfffd48+_0x45803c(0x109)+_0xa87794+_0x45803c(0x163)+_0x26a793+_0x45803c(0x16e)+_0x36a85c,_0x5cd028=_0x68d216(_0x119752);let _0x1b1595=new _0x1c9139(_0x4a2da4,_0x130138,null,_0x119752,!0x0,null,_0x5cd028);_0x14b755[_0x45803c(0x131)](_0x3fd3fb)&&_0x202606[_0x45803c(0x161)](_0x36d200=>_0x1b1595['addSupportingTransaction'](_0x36d200['signature'])),_0xeb3c1b[_0x45803c(0x136)](_0x2b2f7c[_0x45803c(0x10e)],_0x1b1595[_0x45803c(0x173)],_0x1b1595[_0x45803c(0x14c)]),_0x1b1595=_0x1b1595[_0x45803c(0x135)](!0x1,!0x1),(_0x119752=_0x599568(_0x5cd028),_0x5cd028=_0x232dc2[_0x45803c(0x147)]({'func':_0x45803c(0x111),'args':{'transaction':_0x1b1595,'txid':_0x5cd028}})),_0x5ad225={'transactionFamily':_0x392623,'transactionFamilyVersion':_0x5d22a4,'inputs':[_0x119752,..._0x5b23a7],'outputs':[_0x119752],'payload':_0x5cd028};}_0x5fb751=_0x2b5391[_0x45803c(0x135)](!0x1,!0x1),(_0x119752=_0x5dd1b7(_0x48ea97),_0x5cd028=_0x295d6b[_0x45803c(0x147)]({'func':_0x45803c(0x111),'args':{'transaction':_0x7dfc11,'txid':_0x3723ff}})),_0x2a6daa={'transactionFamily':_0x5bf51a,'transactionFamilyVersion':_0x4dda61,'inputs':[_0x119752],'outputs':[_0x119752],'payload':_0x5cd028};}}}else{_0x11cc29=new User(await findByAddress(TYPE['USER'],_0x1fb056));let _0x1192ac=[];const _0x4f9d8f=[];let _0x1c3c3a=_0x1e8a8d;var _0x2a4377=_0x11cc29['lastest_transactions'];for(let _0x1b40e1=0x0;_0x1b40e1<_0x2a4377[_0x1176da(0x15e)];_0x1b40e1+=0x1){if(_0x1176da(0x129)!=='LnyRd'){var _0x26b946=_0x2a4377[_0x1b40e1],_0x26b946=await findByAddress(TYPE[_0x1176da(0x11f)],_0x26b946);(!0x0===_0x26b946[_0x1176da(0x125)]&&(null===_0x26b946[_0x1176da(0x10c)]||void 0x0===_0x26b946[_0x1176da(0x13f)]||new Date(_0x26b946[_0x1176da(0x13f)])>new Date())?_0x1192ac:_0x4f9d8f)[_0x1176da(0x14b)](_0x26b946);}else{function _0x379d54(){const _0x37a391=_0x1176da;_0x5d6ebc['isArray'](_0x477bc2)&&_0x4d7141[_0x37a391(0x161)](_0x2f862b=>_0x22205d[_0x37a391(0x136)](_0x9d081b['SENDER'],_0x2f862b['amount'],_0x2f862b[_0x37a391(0x14c)],_0x23f1c8)),_0x58193f=-_0x26cdff;if(0x0<_0x48a349){var _0x26c9f5=_0x37a391(0x13c)+_0x39dc34['signature']+':\x0a\x20Sender:\x20'+_0x403038+_0x37a391(0x109)+_0x32461b+'\x0aAmount:\x20'+_0x2f3253+'\x0aChange:\x20'+_0x4456ea,_0x18b5ce=_0x201e43(_0x26c9f5);let _0x2d1bce=new _0x35b8d3(_0x49468f,_0x552128,null,_0x26c9f5,!0x0,null,_0x18b5ce);_0x322c3b[_0x37a391(0x131)](_0x253519)&&_0x5c1a0c['forEach'](_0x3dfed3=>_0x2d1bce[_0x37a391(0x108)](_0x3dfed3[_0x37a391(0x14c)])),_0x4df1c2[_0x37a391(0x136)](_0x26a779[_0x37a391(0x10e)],_0x2d1bce[_0x37a391(0x173)],_0x2d1bce['signature']),_0x2d1bce=_0x2d1bce[_0x37a391(0x135)](!0x1,!0x1),(_0x26c9f5=_0x1a67e5(_0x18b5ce),_0x18b5ce=_0x328e67[_0x37a391(0x147)]({'func':_0x37a391(0x111),'args':{'transaction':_0x2d1bce,'txid':_0x18b5ce}})),_0x330902={'transactionFamily':_0x1a9bb1,'transactionFamilyVersion':_0x22babb,'inputs':[_0x26c9f5,..._0x394077],'outputs':[_0x26c9f5],'payload':_0x18b5ce};}}}}const _0x3bb313=[];_0x4f9d8f[_0x1176da(0x161)](_0x3c7bd6=>_0x3bb313[_0x1176da(0x14b)](_0x11cc29['removeInvalidTransaction'](_0x3c7bd6))),await Promise['all'](_0x3bb313),_0x1192ac=_0x1192ac['sort']((_0x22751c,_0x61fec6)=>_0x22751c[_0x1176da(0x173)]-_0x61fec6['amount']);const _0x46bf74=[];for(let _0x4f7028=0x0;_0x4f7028<_0x1192ac[_0x1176da(0x15e)]&&0x0<_0x1c3c3a;_0x4f7028+=0x1){var _0x19d60a=_0x1192ac[_0x4f7028];_0x1c3c3a-=Number(_0x19d60a[_0x1176da(0x173)]),_0x46bf74['push'](_0x19d60a);}return _0x1c3c3a=Number(_0x1c3c3a[_0x1176da(0x16a)](MAXIMUM_FLOAT_PRECISION)),{'existingSender':_0x11cc29,'existingRecipient':_0x2b358f,'pendingAmount':_0x1c3c3a,'usedTransactions':_0x46bf74};}}return{'pendingAmount':null,'usedTransactions':null,'existingRecipient':_0x2b358f,'existingSender':null};},expandSupportingTransactions=async(_0x3e5c5d,_0x476f49)=>{const _0x17af53=_0x4b7be7;if(!_0x476f49){if('ZSqqJ'!=='neyWy'){_0x476f49={};const _0x3884db=await findAllAssets(TYPE[_0x17af53(0x11f)],'GET\x20/cryptocurrency');_0x3884db[_0x17af53(0x161)](_0x39addc=>{const _0x1d1c8d=_0x17af53;if(_0x1d1c8d(0x142)!==_0x1d1c8d(0x165))_0x476f49[_0x39addc[_0x1d1c8d(0x14c)]]=_0x39addc;else{function _0x1ec471(){_0x5db29c[_0x32e1cb['signature']]=_0x3ca8bd;}}});}else{function _0x6512ab(){const _0x184452=_0x17af53;return _0x4d96a3('PUT\x20/transaction\x20|\x20BATCH\x20Response:\x20'+_0x350020,_0xa4b60b[_0x184452(0x152)]),_0x245196[_0x184452(0x15d)](0x1f4)[_0x184452(0x153)]({'err':_0x56d7dc});}}}if(_0x3e5c5d){if(Array[_0x17af53(0x131)](_0x3e5c5d[_0x17af53(0x124)]))for(let _0x1ec5d1=0x0;_0x1ec5d1<_0x3e5c5d[_0x17af53(0x124)]['length'];_0x1ec5d1+=0x1){if(_0x17af53(0x115)!==_0x17af53(0x117)){var _0x283075=_0x3e5c5d['supporting_transactions'][_0x1ec5d1],_0x283075=_0x476f49[_0x283075]||await findTransaction(_0x283075);_0x283075&&Array[_0x17af53(0x131)](_0x283075[_0x17af53(0x124)])&&_0x17af53(0x156)==typeof _0x283075['supporting_transactions'][0x0]?_0x3e5c5d[_0x17af53(0x124)][_0x1ec5d1]=await expandSupportingTransactions(_0x283075,_0x476f49):_0x3e5c5d['supporting_transactions'][_0x1ec5d1]=_0x283075;}else{function _0x2d0f11(){const _0x1e63e1=_0x53ae92?function(){const _0x243939=_0x11f5;if(_0x4e5ab0){const _0x5493c8=_0x2a5ba3[_0x243939(0x122)](_0x29460d,arguments);return _0x26164c=null,_0x5493c8;}}:function(){};return _0x223013=![],_0x1e63e1;}}}else{if(_0x17af53(0x156)==typeof _0x3e5c5d)return _0x3e5c5d=await findTransaction(_0x3e5c5d),await expandSupportingTransactions(_0x3e5c5d,_0x476f49),_0x3e5c5d;}}return _0x3e5c5d;},getTransactions=async(_0x3005c0,_0x9fda1b)=>{const _0x449a26=_0x4b7be7;let _0x2fd113;var _0x195436='true'===_0x3005c0['query'][_0x449a26(0x15c)]||!0x1,_0x1bbd0e=_0x449a26(0x166)===_0x3005c0[_0x449a26(0x11a)]['hidePending']||!0x1,_0x3710fd=_0x449a26(0x166)===_0x3005c0['query'][_0x449a26(0x113)]||!0x1,_0x3005c0=Number[_0x449a26(0x123)](Number(_0x3005c0[_0x449a26(0x11a)][_0x449a26(0x116)]))?0x0:Number(_0x3005c0[_0x449a26(0x11a)]['limit']);try{_0x2fd113=await findAllAssets(TYPE[_0x449a26(0x11f)],_0x449a26(0x16b),_0x3005c0)||[];}catch(_0x339d5b){return _0x9fda1b[_0x449a26(0x15d)](0x1f7)[_0x449a26(0x153)]({'msg':_0x449a26(0x150)});}if(_0x1bbd0e&&(_0x2fd113=_0x2fd113['filter'](_0x440928=>!_0x440928['pending'])),_0x3710fd&&(_0x2fd113=_0x2fd113[_0x449a26(0x14e)](_0x121f9a=>_0x121f9a['valid'])),!_0x195436)return _0x9fda1b['json'](_0x2fd113);const _0x296967={};_0x2fd113[_0x449a26(0x161)](_0x1520b4=>{const _0x55f038=_0x449a26;_0x296967[_0x1520b4[_0x55f038(0x14c)]]=_0x1520b4;});const _0x1ba7b5=[];return _0x2fd113[_0x449a26(0x161)](_0x422622=>_0x1ba7b5[_0x449a26(0x14b)](expandSupportingTransactions(_0x422622,_0x296967))),await Promise[_0x449a26(0x167)](_0x1ba7b5),_0x9fda1b[_0x449a26(0x15d)](0xc8)[_0x449a26(0x153)](_0x2fd113);},getTransactionByAddress=async(_0x483a74,_0x21efd2)=>{const _0x531efc=_0x4b7be7;if(!(_0x531efc(0x166)===_0x483a74[_0x531efc(0x11a)][_0x531efc(0x15c)]||!0x1))return findAssetByAddress(TYPE[_0x531efc(0x11f)],_0x531efc(0x12b)+_0x483a74[_0x531efc(0x171)][_0x531efc(0x12a)],_0x483a74,_0x21efd2);_0x483a74=await findTransaction(_0x483a74[_0x531efc(0x171)][_0x531efc(0x12a)]);let _0x1a179b;return _0x483a74&&(_0x1a179b=await expandSupportingTransactions(_0x483a74)),_0x21efd2[_0x531efc(0x15d)](0xc8)['json'](_0x1a179b);},createTransaction=async(_0x23e2f4,_0x21a96e)=>{const _0x8c210a=_0x4b7be7;_0x23e2f4[_0x8c210a(0x149)][_0x8c210a(0x173)]=Number(_0x23e2f4[_0x8c210a(0x149)][_0x8c210a(0x173)]['toFixed'](MAXIMUM_FLOAT_PRECISION));const _0xc06a0f=new Transaction(_0x23e2f4[_0x8c210a(0x149)]),{sender:_0x106f29,recipient:_0x1a1a08,amount:_0x3fed8a,signature:_0x5b02fc,valid:_0x1b8b45}=_0xc06a0f;let _0x1c9be1,_0x8839bf;const {pendingAmount:_0x4c0b24,usedTransactions:_0x58387b,existingRecipient:_0x322143,existingSender:_0x4501d1}=await getSupportingTransactions(_0xc06a0f),_0x27595a=[];_0x1b8b45&&Array[_0x8c210a(0x131)](_0x58387b)&&_0x58387b[_0x8c210a(0x161)](_0x508607=>{const _0x3960aa=_0x8c210a;if(_0x3960aa(0x12c)===_0x3960aa(0x103)){function _0x2b4fdc(){const _0x544948=_0x3960aa;_0x16d30e[_0x544948(0x131)](_0x4542e1)&&_0x219f17[_0x544948(0x161)](_0x41cdcb=>_0x3083fa['addTransaction'](_0x165b39[_0x544948(0x119)],_0x41cdcb['amount'],_0x41cdcb['signature'],_0x5f54a5)),_0x5c9c67=-_0x43fbe5;if(0x0<_0x364137){var _0x46e17f='Resulting\x20change\x20of\x20transaction\x20'+_0x1cc4bc[_0x544948(0x14c)]+_0x544948(0x138)+_0x573e27+_0x544948(0x109)+_0x1f7047+'\x0aAmount:\x20'+_0xeb8c7b+_0x544948(0x16e)+_0x45f8ca,_0x30c805=_0x1878be(_0x46e17f);let _0x2d8482=new _0x5dc141(_0xf81b64,_0x6630,null,_0x46e17f,!0x0,null,_0x30c805);_0x2eb63d[_0x544948(0x131)](_0x1780cf)&&_0x130ff5[_0x544948(0x161)](_0x58258c=>_0x2d8482[_0x544948(0x108)](_0x58258c['signature'])),_0x156d85['addTransaction'](_0x243b74[_0x544948(0x10e)],_0x2d8482[_0x544948(0x173)],_0x2d8482['signature']),_0x2d8482=_0x2d8482[_0x544948(0x135)](!0x1,!0x1),(_0x46e17f=_0x359eb4(_0x30c805),_0x30c805=_0x234c82[_0x544948(0x147)]({'func':_0x544948(0x111),'args':{'transaction':_0x2d8482,'txid':_0x30c805}})),_0x457fd9={'transactionFamily':_0x2440ea,'transactionFamilyVersion':_0x1855be,'inputs':[_0x46e17f,..._0x4b22ad],'outputs':[_0x46e17f],'payload':_0x30c805};}_0x36b394=_0x567fb5[_0x544948(0x135)](!0x1,!0x1),(_0x46e17f=_0x548b4f(_0x2ff875),_0x30c805=_0x7d8695[_0x544948(0x147)]({'func':_0x544948(0x111),'args':{'transaction':_0x5229cc,'txid':_0x3b13a4}})),_0x1787c1={'transactionFamily':_0xba7df7,'transactionFamilyVersion':_0x3e0e9e,'inputs':[_0x46e17f],'outputs':[_0x46e17f],'payload':_0x30c805};}}else _0xc06a0f[_0x3960aa(0x108)](_0x508607[_0x3960aa(0x14c)]),_0x27595a[_0x3960aa(0x14b)](getTransactionAddress(_0x508607['signature']));});var _0x1fea1c=getTransactionAddress(_0xc06a0f[_0x8c210a(0x14c)]),_0x50843a=JSON[_0x8c210a(0x147)]({'func':_0x8c210a(0x111),'args':{'transaction':_0xc06a0f[_0x8c210a(0x135)](!0x1,!0x1),'txid':_0xc06a0f['signature']}}),_0x23e2f4={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x1fea1c,..._0x27595a],'outputs':[_0x1fea1c],'payload':_0x50843a};let _0x5ceff8=new User(_0x322143);_0x5ceff8[_0x8c210a(0x136)](USER_TYPE['RECIPIENT'],_0x3fed8a,_0x5b02fc,_0x1b8b45),_0x5ceff8=_0x5ceff8[_0x8c210a(0x135)](!0x1,!0x1);var _0x3c0f9d,_0x1fea1c=getUserAddress(_0x1a1a08),_0x50843a=JSON[_0x8c210a(0x147)]({'func':'post','args':{'transaction':_0x5ceff8,'txid':_0x1a1a08}}),_0x1fea1c={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x1fea1c],'outputs':[_0x1fea1c],'payload':_0x50843a};if(_0x4501d1){if(_0x8c210a(0x134)!=='psBzQ'){function _0x1b9561(){const _0x47e57a=_0x8c210a;var _0x5cd381=_0x2fd179[_0x2e2899];_0x247132-=_0x353a1d(_0x5cd381[_0x47e57a(0x173)]),_0x1a3bc0[_0x47e57a(0x14b)](_0x5cd381);}}else{let _0x5571db=new User(_0x4501d1);if(_0x1b8b45){Array[_0x8c210a(0x131)](_0x58387b)&&_0x58387b[_0x8c210a(0x161)](_0x2002aa=>_0x5571db['addTransaction'](USER_TYPE['SENDER'],_0x2002aa[_0x8c210a(0x173)],_0x2002aa[_0x8c210a(0x14c)],_0x1b8b45)),_0x50843a=-_0x4c0b24;if(0x0<_0x50843a){if(_0x8c210a(0x169)==='MmAtl'){function _0x5d5349(){const _0x447163=_0x8c210a;_0x47078e[_0x447163(0x161)](_0x56950c=>{const _0x567dfb=_0x447163;_0x4bd1a3[_0x567dfb(0x14b)](_0x56950c);},_0x5c33f4);}}else{var _0x5780bf=_0x8c210a(0x13c)+_0xc06a0f['signature']+':\x0a\x20Sender:\x20'+_0x106f29+_0x8c210a(0x109)+_0x1a1a08+_0x8c210a(0x163)+_0x3fed8a+_0x8c210a(0x16e)+_0x50843a,_0x2c190e=hash512(_0x5780bf);let _0x3c9684=new Transaction(_0x50843a,_0x106f29,null,_0x5780bf,!0x0,null,_0x2c190e);Array[_0x8c210a(0x131)](_0x58387b)&&_0x58387b[_0x8c210a(0x161)](_0x2fdb95=>_0x3c9684['addSupportingTransaction'](_0x2fdb95['signature'])),_0x5571db[_0x8c210a(0x136)](USER_TYPE[_0x8c210a(0x10e)],_0x3c9684[_0x8c210a(0x173)],_0x3c9684['signature']),_0x3c9684=_0x3c9684[_0x8c210a(0x135)](!0x1,!0x1),(_0x5780bf=getTransactionAddress(_0x2c190e),_0x2c190e=JSON[_0x8c210a(0x147)]({'func':'post','args':{'transaction':_0x3c9684,'txid':_0x2c190e}})),_0x1c9be1={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x5780bf,..._0x27595a],'outputs':[_0x5780bf],'payload':_0x2c190e};}}}else _0x5571db[_0x8c210a(0x136)](USER_TYPE[_0x8c210a(0x10e)],_0x3fed8a,_0x5b02fc,_0x1b8b45);_0x5571db=_0x5571db[_0x8c210a(0x135)](!0x1,!0x1),(_0x5780bf=getUserAddress(_0x106f29),_0x2c190e=JSON[_0x8c210a(0x147)]({'func':_0x8c210a(0x111),'args':{'transaction':_0x5571db,'txid':_0x106f29}})),_0x8839bf={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x5780bf],'outputs':[_0x5780bf],'payload':_0x2c190e};}}try{const _0x255911=[{..._0x23e2f4}];return _0x255911[_0x8c210a(0x14b)]({..._0x1fea1c}),_0x8839bf&&_0x255911[_0x8c210a(0x14b)]({..._0x8839bf}),_0x1c9be1&&_0x255911['push']({..._0x1c9be1}),_0x3c0f9d=await sendTransaction(_0x255911),logFormatted(_0x8c210a(0x151)+_0x3c0f9d['status']+_0x8c210a(0x12f)+_0x3c0f9d[_0x8c210a(0x12e)],SEVERITY[_0x8c210a(0x11b)]),delete _0xc06a0f[_0x8c210a(0x164)],_0x21a96e[_0x8c210a(0x15d)](0xc9)['json']({'msg':_0x8c210a(0x120),'payload':_0xc06a0f});}catch(_0x5b3a92){return logFormatted(_0x8c210a(0x151)+_0x5b3a92,SEVERITY[_0x8c210a(0x152)]),_0x21a96e[_0x8c210a(0x15d)](0x1f4)[_0x8c210a(0x153)]({'err':_0x5b3a92});}},updateTransaction=async(_0x59241c,_0x2e81e1)=>{const _0x230390=_0x4b7be7,_0x124aaf=new Transaction(await findTransaction(_0x59241c['params'][_0x230390(0x12a)]));var _0x3ea3fb=_0x230390(0x166)===_0x59241c[_0x230390(0x11a)]['approve']||!0x1;_0x124aaf[_0x230390(0x125)]=_0x3ea3fb,_0x124aaf['pending']=!0x1;const {sender:_0x446908,recipient:_0x2bbe25,amount:_0x1f1e8f,signature:_0x4a8db5,valid:_0x13a8bb}=_0x124aaf,_0x1cff2b=[];let _0x3b195b,_0x22305d;const {pendingAmount:_0x4d1003,usedTransactions:_0x1c116b,existingRecipient:_0xf98391,existingSender:_0x2ff4fb}=await getSupportingTransactions(_0x124aaf);let _0x48bab8=new User(_0xf98391),_0x598bd9;_0x48bab8[_0x230390(0x13a)](_0x4a8db5);let _0x1e356e;if(_0x2ff4fb&&(_0x1e356e=new User(_0x2ff4fb),_0x1e356e['removePendingTransaction'](_0x4a8db5)),_0x124aaf[_0x230390(0x125)]){if('Ysfji'!==_0x230390(0x130)){Array[_0x230390(0x131)](_0x1c116b)&&_0x1c116b[_0x230390(0x161)](_0x531fc3=>{const _0x47edac=_0x230390;if(_0x47edac(0x11c)!==_0x47edac(0x11c)){function _0x5d572d(){const _0x14f213=_0x47edac;_0x61a8dd=_0x5e0184(_0x14f213(0x133)+_0x14f213(0x132)+');')();}}else _0x124aaf[_0x47edac(0x108)](_0x531fc3[_0x47edac(0x14c)]),_0x1cff2b[_0x47edac(0x14b)](getTransactionAddress(_0x531fc3[_0x47edac(0x14c)]));}),_0x48bab8[_0x230390(0x136)](USER_TYPE[_0x230390(0x10e)],_0x1f1e8f,_0x4a8db5,_0x13a8bb),_0x48bab8=_0x48bab8[_0x230390(0x135)](!0x1,!0x1),(_0x59241c=getUserAddress(_0x2bbe25),_0x3ea3fb=JSON['stringify']({'func':_0x230390(0x111),'args':{'transaction':_0x48bab8,'txid':_0x2bbe25}}));if(_0x598bd9={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x59241c],'outputs':[_0x59241c],'payload':_0x3ea3fb},_0x1e356e){if(_0x230390(0x128)===_0x230390(0x104)){function _0x420723(){const _0x54a05e=_0x230390;return _0x1d24a5[_0x54a05e(0x15d)](0x1f7)[_0x54a05e(0x153)]({'msg':_0x54a05e(0x150)});}}else{Array[_0x230390(0x131)](_0x1c116b)&&_0x1c116b['forEach'](_0x5d24d7=>_0x1e356e['addTransaction'](USER_TYPE[_0x230390(0x119)],_0x5d24d7['amount'],_0x5d24d7[_0x230390(0x14c)],_0x13a8bb)),_0x3ea3fb=-_0x4d1003;if(0x0<_0x3ea3fb){if('fgesn'===_0x230390(0x168)){var _0x5effb5=_0x230390(0x13c)+_0x124aaf[_0x230390(0x14c)]+_0x230390(0x138)+_0x446908+'\x0aRecipient:\x20'+_0x2bbe25+'\x0aAmount:\x20'+_0x1f1e8f+_0x230390(0x16e)+_0x3ea3fb,_0x3033c3=hash512(_0x5effb5);let _0x5a70e3=new Transaction(_0x3ea3fb,_0x446908,null,_0x5effb5,!0x0,null,_0x3033c3);Array['isArray'](_0x1c116b)&&_0x1c116b[_0x230390(0x161)](_0x44ba78=>_0x5a70e3[_0x230390(0x108)](_0x44ba78[_0x230390(0x14c)])),_0x1e356e[_0x230390(0x136)](USER_TYPE[_0x230390(0x10e)],_0x5a70e3[_0x230390(0x173)],_0x5a70e3['signature']),_0x5a70e3=_0x5a70e3[_0x230390(0x135)](!0x1,!0x1),(_0x5effb5=getTransactionAddress(_0x3033c3),_0x3033c3=JSON[_0x230390(0x147)]({'func':'post','args':{'transaction':_0x5a70e3,'txid':_0x3033c3}})),_0x3b195b={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x5effb5,..._0x1cff2b],'outputs':[_0x5effb5],'payload':_0x3033c3};}else{function _0x3c42e2(){const _0x454e26=_0x230390,_0x46b99c=_0x30c276[_0x454e26(0x122)](_0xd6ef24,arguments);return _0x1c6b33=null,_0x46b99c;}}}_0x1e356e=_0x1e356e[_0x230390(0x135)](!0x1,!0x1),(_0x5effb5=getUserAddress(_0x446908),_0x3033c3=JSON[_0x230390(0x147)]({'func':'post','args':{'transaction':_0x1e356e,'txid':_0x446908}})),_0x22305d={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x5effb5],'outputs':[_0x5effb5],'payload':_0x3033c3};}}}else{function _0x4e64f2(){const _0x416668=_0x230390;if(_0x492059){const _0x2f09f0=_0x13c193[_0x416668(0x122)](_0x18ae57,arguments);return _0x3212d8=null,_0x2f09f0;}}}}var _0x250acd,_0x5effb5=getTransactionAddress(_0x124aaf[_0x230390(0x14c)]),_0x3033c3=JSON[_0x230390(0x147)]({'func':'post','args':{'transaction':_0x124aaf[_0x230390(0x135)](!0x1,!0x1),'txid':_0x124aaf[_0x230390(0x14c)]}}),_0x3033c3={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x5effb5,..._0x1cff2b],'outputs':[_0x5effb5],'payload':_0x3033c3};try{const _0x5dca1f=[{..._0x3033c3}];return _0x598bd9&&_0x5dca1f['push']({..._0x598bd9}),_0x22305d&&_0x5dca1f[_0x230390(0x14b)]({..._0x22305d}),_0x3b195b&&_0x5dca1f[_0x230390(0x14b)]({..._0x3b195b}),_0x250acd=await sendTransaction(_0x5dca1f),logFormatted(_0x230390(0x112)+_0x250acd[_0x230390(0x15d)]+_0x230390(0x12f)+_0x250acd[_0x230390(0x12e)],SEVERITY[_0x230390(0x11b)]),delete _0x124aaf[_0x230390(0x164)],_0x2e81e1[_0x230390(0x15d)](0xc8)[_0x230390(0x153)]({'msg':_0x230390(0x14a),'payload':_0x124aaf});}catch(_0x368369){if(_0x230390(0x10a)!==_0x230390(0x10a)){function _0x351921(){const _0x2e46ef=_0x230390,_0x427263=_0x26ab20[_0x2e46ef(0x154)]['prototype'][_0x2e46ef(0x13d)](_0x3024c3),_0x4c34e3=_0x574893[_0x57969f],_0x8c6130=_0x3f4b09[_0x4c34e3]||_0x427263;_0x427263['__proto__']=_0x58acd7[_0x2e46ef(0x13d)](_0x523344),_0x427263[_0x2e46ef(0x135)]=_0x8c6130[_0x2e46ef(0x135)][_0x2e46ef(0x13d)](_0x8c6130),_0x354ad5[_0x4c34e3]=_0x427263;}}else return logFormatted(_0x230390(0x112)+_0x368369,SEVERITY[_0x230390(0x152)]),_0x2e81e1[_0x230390(0x15d)](0x1f4)[_0x230390(0x153)]({'err':_0x368369});}},getTransactionHistory=async(_0x27519b,_0x3f52aa)=>{const _0x358b9b=_0x4b7be7;var _0x512262=_0x27519b[_0x358b9b(0x11a)]['page']||0x0;const _0x243912=await mongo[_0x358b9b(0x141)](),_0x3a20cd=_0x243912['db'](_0x358b9b(0x143))[_0x358b9b(0x172)](_0x358b9b(0x107)),_0x38ef3a=[],_0x5f45d6=await _0x3a20cd[_0x358b9b(0x140)]({'root':_0x27519b['root']})[_0x358b9b(0x12d)]({'block_num':-0x1})[_0x358b9b(0x10d)](0x2*_0x512262)[_0x358b9b(0x116)](0x2);return await new Promise(_0x3f9715=>{_0x5f45d6['forEach'](_0x559a7b=>{const _0x1048ac=_0x11f5;_0x38ef3a[_0x1048ac(0x14b)](_0x559a7b);},_0x3f9715);}),_0x3f52aa['json'](_0x38ef3a);};module['exports'][_0x4b7be7(0x137)]=findTransaction,module[_0x4b7be7(0x110)][_0x4b7be7(0x155)]=getSupportingTransactions,module['exports'][_0x4b7be7(0x16c)]=expandSupportingTransactions,module[_0x4b7be7(0x110)][_0x4b7be7(0x14d)]=getTransactions,module['exports'][_0x4b7be7(0x13e)]=getTransactionByAddress,module[_0x4b7be7(0x110)]['createTransaction']=createTransaction,module[_0x4b7be7(0x110)][_0x4b7be7(0x118)]=updateTransaction,module[_0x4b7be7(0x110)][_0x4b7be7(0x15a)]=getTransactionHistory;