const _0x54d2=['./common','__proto__','prototype','all','lGnBZ','../sawtooth/sawtooth-helpers','supporting_transactions','constructor','SENDER','exception','warn','trace','\x0aRecipient:\x20','getTransactionHistory','RECIPIENT','toString','HeuuZ','{}.constructor(\x22return\x20this\x22)(\x20)','filter','nLNmQ','log','1qXoZmo','address','params','\x20-\x20','status','Resulting\x20change\x20of\x20transaction\x20','hideInvalid','18168pBBsIy','push','expandSupportingTransactions','13244dCelcB','expanded','removeInvalidTransaction','collection','valid_thru','addTransaction','PUT\x20/transaction\x20|\x20BATCH\x20Response:\x20','json','GET\x20/cryptocurrency','nyXpy','IkORV','getClient',':\x0a\x20Sender:\x20','limit','sort','USER','nBcrs','TRANSACTION','1sJNKZp','findTransaction','approve','isArray','Sawtooth\x20service\x20unavailable','\x0aAmount:\x20','GLTYp','info','\x0aChange:\x20','../models/User','AHhez','createTransaction','pending','odUhv','console','stringify','SUCCESS','hidePending','body','length','valid','valid_true','page','statusText','dvGPD','forEach','LjSuy','Transaction\x20created','addSupportingTransaction','updateTransaction','toFixed','type','GET\x20/transaction/','../utils/logger','amount','post','14ZIXQfK','signature','../utils/constants','bind','POST\x20/transaction\x20|\x20BATCH\x20Response:\x20','95992tuButk','../database/utils/mongo','getTransactions','PcFBp','find','removePendingTransaction','nHohI','string','bEMnL','query','105358kKeskx','95219AVRcTA','table','true','549164rdqrOt','root','lastest_transactions','gBdpS','lwCKG','return\x20(function()\x20','EpCRZ','exports','getTransactionByAddress','aumrA','645305mGQZcg','3bBHcuw','Transaction\x20updated'];const _0x515b=function(_0x7da8e8,_0xc8115){_0x7da8e8=_0x7da8e8-0x15f;let _0x5ada40=_0x54d2[_0x7da8e8];return _0x5ada40;};const _0x4c5e2c=_0x515b;(function(_0x31060e,_0x17071b){const _0xc58014=_0x515b;while(!![]){try{const _0x5515c2=parseInt(_0xc58014(0x18a))*parseInt(_0xc58014(0x198))+parseInt(_0xc58014(0x189))*-parseInt(_0xc58014(0x1cb))+-parseInt(_0xc58014(0x1b6))+parseInt(_0xc58014(0x197))+parseInt(_0xc58014(0x17a))*parseInt(_0xc58014(0x1b9))+-parseInt(_0xc58014(0x18d))+parseInt(_0xc58014(0x1af))*-parseInt(_0xc58014(0x17f));if(_0x5515c2===_0x17071b)break;else _0x31060e['push'](_0x31060e['shift']());}catch(_0x29defa){_0x31060e['push'](_0x31060e['shift']());}}}(_0x54d2,0x54e30));const _0x56a72b=function(){let _0x18ed90=!![];return function(_0x3f1f7b,_0x264c42){const _0x244d8e=_0x515b;if(_0x244d8e(0x196)!==_0x244d8e(0x185)){const _0x1d7b53=_0x18ed90?function(){const _0x213252=_0x244d8e;if(_0x213252(0x190)!==_0x213252(0x190)){function _0x1f7ad(){_0x4f22dc[_0x66122c['signature']]=_0x45f260;}}else{if(_0x264c42){const _0x2c179d=_0x264c42['apply'](_0x3f1f7b,arguments);return _0x264c42=null,_0x2c179d;}}}:function(){};return _0x18ed90=![],_0x1d7b53;}else{function _0x1e342d(){const _0x5cb638=_0x244d8e;_0x27fbee[_0x5cb638(0x1ce)](_0x27593b)&&_0x61c8c5[_0x5cb638(0x16f)](_0x21c8bc=>_0x3be2e8[_0x5cb638(0x1be)](_0x270912[_0x5cb638(0x1a2)],_0x21c8bc[_0x5cb638(0x178)],_0x21c8bc[_0x5cb638(0x17b)],_0x42d639)),_0x5d5024=-_0x5600f5;if(0x0<_0xf4e692){var _0x38f678=_0x5cb638(0x1b4)+_0x88f064['signature']+_0x5cb638(0x1c5)+_0x2908a5+_0x5cb638(0x1a6)+_0x386455+'\x0aAmount:\x20'+_0x5f5357+_0x5cb638(0x1d3)+_0x496eba,_0x2c14eb=_0x2dfb0f(_0x38f678);let _0x3ea9d8=new _0x3a1284(_0x21eddd,_0x1ceeb2,null,_0x38f678,!0x0,null,_0x2c14eb);_0x29da4d[_0x5cb638(0x1ce)](_0x47c6f3)&&_0x2dc8d8[_0x5cb638(0x16f)](_0x55bee6=>_0x3ea9d8[_0x5cb638(0x172)](_0x55bee6[_0x5cb638(0x17b)])),_0x5b8709[_0x5cb638(0x1be)](_0x32e247[_0x5cb638(0x1a8)],_0x3ea9d8['amount'],_0x3ea9d8[_0x5cb638(0x17b)]),_0x3ea9d8=_0x3ea9d8[_0x5cb638(0x1a9)](!0x1,!0x1),(_0x38f678=_0x566e49(_0x2c14eb),_0x2c14eb=_0x60e247[_0x5cb638(0x165)]({'func':_0x5cb638(0x179),'args':{'transaction':_0x3ea9d8,'txid':_0x2c14eb}})),_0x4c5bc3={'transactionFamily':_0x389293,'transactionFamilyVersion':_0x4c4371,'inputs':[_0x38f678,..._0x446f04],'outputs':[_0x38f678],'payload':_0x2c14eb};}_0x50f65a=_0x467993['toString'](!0x1,!0x1),(_0x38f678=_0x5d80d7(_0x2dcbb9),_0x2c14eb=_0x1a95d4[_0x5cb638(0x165)]({'func':_0x5cb638(0x179),'args':{'transaction':_0x4a9323,'txid':_0x470d36}})),_0x3e0a93={'transactionFamily':_0x2bbfde,'transactionFamilyVersion':_0x52f3d2,'inputs':[_0x38f678],'outputs':[_0x38f678],'payload':_0x2c14eb};}}};}(),_0x2ee9a8=_0x56a72b(this,function(){const _0x11b20d=_0x515b,_0x397ccd=function(){const _0x44f126=_0x515b;if(_0x44f126(0x19e)!==_0x44f126(0x19e)){function _0x5f312f(){_0x1d843e=_0x3e60a5;}}else{let _0x5a8832;try{if(_0x44f126(0x170)!==_0x44f126(0x191))_0x5a8832=Function(_0x44f126(0x192)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();else{function _0x56d5c9(){const _0x4dc36=_0x44f126;_0x49e929['addSupportingTransaction'](_0x5d7b92[_0x4dc36(0x17b)]),_0x32d405[_0x4dc36(0x1b7)](_0x51581d(_0x133c58['signature']));}}}catch(_0x184e5d){if(_0x44f126(0x1c3)===_0x44f126(0x1c3))_0x5a8832=window;else{function _0x49b389(){const _0x512c55=_0x44f126;_0x195e43=_0x43e486('return\x20(function()\x20'+_0x512c55(0x1ab)+');')();}}}return _0x5a8832;}},_0x1e1a81=_0x397ccd(),_0x4f8afb=_0x1e1a81[_0x11b20d(0x164)]=_0x1e1a81[_0x11b20d(0x164)]||{},_0x4263d1=[_0x11b20d(0x1ae),_0x11b20d(0x1a4),_0x11b20d(0x1d2),'error',_0x11b20d(0x1a3),_0x11b20d(0x18b),_0x11b20d(0x1a5)];for(let _0x1043bf=0x0;_0x1043bf<_0x4263d1[_0x11b20d(0x169)];_0x1043bf++){const _0x8bee52=_0x56a72b[_0x11b20d(0x1a1)][_0x11b20d(0x19c)][_0x11b20d(0x17d)](_0x56a72b),_0x4f7f2c=_0x4263d1[_0x1043bf],_0x4d3d26=_0x4f8afb[_0x4f7f2c]||_0x8bee52;_0x8bee52[_0x11b20d(0x19b)]=_0x56a72b[_0x11b20d(0x17d)](_0x56a72b),_0x8bee52[_0x11b20d(0x1a9)]=_0x4d3d26[_0x11b20d(0x1a9)][_0x11b20d(0x17d)](_0x4d3d26),_0x4f8afb[_0x4f7f2c]=_0x8bee52;}});_0x2ee9a8();const _=require('underscore'),crypto=require('crypto'),mongo=require(_0x4c5e2c(0x180)),{sendTransaction,queryState}=require(_0x4c5e2c(0x19f)),{SEVERITY,logFormatted}=require(_0x4c5e2c(0x177)),Transaction=require('../models/Transaction'),User=require(_0x4c5e2c(0x15f)),{findAssetByAddress,findAllAssets,findByAddress,getTransactionAddress,getUserAddress,TRANSACTION_FAMILY,TRANSACTION_FAMILY_VERSION,hash512}=require(_0x4c5e2c(0x19a)),{TYPE,MAXIMUM_FLOAT_PRECISION,USER_TYPE}=require(_0x4c5e2c(0x17c)),findTransaction=async _0x1ab7d6=>{const _0x3a1ae6=_0x4c5e2c;var _0x5772e5=getTransactionAddress(_0x1ab7d6);let _0xa41513;return _0xa41513=await queryState(_0x5772e5),_0xa41513?(Array['isArray'](_0xa41513)&&(_0xa41513=_0xa41513['find'](_0xfe4ca8=>_0xfe4ca8[_0x3a1ae6(0x1b0)]===_0x1ab7d6)),_0xa41513):null;},getSupportingTransactions=async _0x31fdff=>{const _0xde7fa2=_0x4c5e2c;var {amount:_0x4fb806,recipient:_0x4be154,sender:_0x31fdff}=_0x31fdff,_0x4be154=new User(await findByAddress(TYPE[_0xde7fa2(0x1c8)],_0x4be154));let _0xdb0f76;if(_0x31fdff){_0xdb0f76=new User(await findByAddress(TYPE[_0xde7fa2(0x1c8)],_0x31fdff));let _0x53a62f=[];const _0x1ed1cd=[];let _0x848ad0=_0x4fb806;var _0x37d563=_0xdb0f76[_0xde7fa2(0x18f)];for(let _0x437ffb=0x0;_0x437ffb<_0x37d563[_0xde7fa2(0x169)];_0x437ffb+=0x1){if('nBcrs'===_0xde7fa2(0x1c9)){var _0x5f47c9=_0x37d563[_0x437ffb],_0x5f47c9=await findByAddress(TYPE[_0xde7fa2(0x1ca)],_0x5f47c9);(!0x0===_0x5f47c9[_0xde7fa2(0x16a)]&&(null===_0x5f47c9[_0xde7fa2(0x16b)]||void 0x0===_0x5f47c9[_0xde7fa2(0x1bd)]||new Date(_0x5f47c9[_0xde7fa2(0x1bd)])>new Date())?_0x53a62f:_0x1ed1cd)['push'](_0x5f47c9);}else{function _0x470087(){const _0x1d11bc=_0xde7fa2;let _0x5ef5ce;try{_0x5ef5ce=_0x22f81b(_0x1d11bc(0x192)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x49e673){_0x5ef5ce=_0xb9a9c8;}return _0x5ef5ce;}}}const _0x9067a0=[];_0x1ed1cd[_0xde7fa2(0x16f)](_0x7958d=>_0x9067a0['push'](_0xdb0f76[_0xde7fa2(0x1bb)](_0x7958d))),await Promise[_0xde7fa2(0x19d)](_0x9067a0),_0x53a62f=_0x53a62f[_0xde7fa2(0x1c7)]((_0x36f3a8,_0xab297e)=>_0x36f3a8['amount']-_0xab297e[_0xde7fa2(0x178)]);const _0x5802ca=[];for(let _0x3757b5=0x0;_0x3757b5<_0x53a62f['length']&&0x0<_0x848ad0;_0x3757b5+=0x1){var _0x5eb9a3=_0x53a62f[_0x3757b5];_0x848ad0-=Number(_0x5eb9a3['amount']),_0x5802ca[_0xde7fa2(0x1b7)](_0x5eb9a3);}return _0x848ad0=Number(_0x848ad0['toFixed'](MAXIMUM_FLOAT_PRECISION)),{'existingSender':_0xdb0f76,'existingRecipient':_0x4be154,'pendingAmount':_0x848ad0,'usedTransactions':_0x5802ca};}return{'pendingAmount':null,'usedTransactions':null,'existingRecipient':_0x4be154,'existingSender':null};},expandSupportingTransactions=async(_0x17ced1,_0x3ea01e)=>{const _0x197d67=_0x4c5e2c;if(!_0x3ea01e){_0x3ea01e={};const _0x3d6144=await findAllAssets(TYPE[_0x197d67(0x1ca)],_0x197d67(0x1c1));_0x3d6144[_0x197d67(0x16f)](_0x1486fe=>{const _0x41ca37=_0x197d67;_0x3ea01e[_0x1486fe[_0x41ca37(0x17b)]]=_0x1486fe;});}if(_0x17ced1){if(Array['isArray'](_0x17ced1[_0x197d67(0x1a0)]))for(let _0x4b0991=0x0;_0x4b0991<_0x17ced1[_0x197d67(0x1a0)]['length'];_0x4b0991+=0x1){if(_0x197d67(0x182)===_0x197d67(0x182)){var _0x3db3a5=_0x17ced1[_0x197d67(0x1a0)][_0x4b0991],_0x3db3a5=_0x3ea01e[_0x3db3a5]||await findTransaction(_0x3db3a5);_0x3db3a5&&Array[_0x197d67(0x1ce)](_0x3db3a5[_0x197d67(0x1a0)])&&_0x197d67(0x186)==typeof _0x3db3a5['supporting_transactions'][0x0]?_0x17ced1['supporting_transactions'][_0x4b0991]=await expandSupportingTransactions(_0x3db3a5,_0x3ea01e):_0x17ced1[_0x197d67(0x1a0)][_0x4b0991]=_0x3db3a5;}else{function _0x1d2ff9(){const _0x47f7d2=_0x59f750?function(){if(_0x3d1f01){const _0x5eb5c8=_0x38ba9d['apply'](_0x5103a8,arguments);return _0x4ccbc2=null,_0x5eb5c8;}}:function(){};return _0x5127a6=![],_0x47f7d2;}}}else{if(_0x197d67(0x186)==typeof _0x17ced1)return _0x17ced1=await findTransaction(_0x17ced1),await expandSupportingTransactions(_0x17ced1,_0x3ea01e),_0x17ced1;}}return _0x17ced1;},getTransactions=async(_0x33bba3,_0x28668f)=>{const _0x32856c=_0x4c5e2c;let _0x111053;var _0xd31781=_0x32856c(0x18c)===_0x33bba3[_0x32856c(0x188)]['expanded']||!0x1,_0x1c23ec=_0x32856c(0x18c)===_0x33bba3['query'][_0x32856c(0x167)]||!0x1,_0x1e5772=_0x32856c(0x18c)===_0x33bba3['query'][_0x32856c(0x1b5)]||!0x1,_0x33bba3=Number['isNaN'](Number(_0x33bba3[_0x32856c(0x188)][_0x32856c(0x1c6)]))?0x0:Number(_0x33bba3[_0x32856c(0x188)][_0x32856c(0x1c6)]);try{if(_0x32856c(0x1c2)===_0x32856c(0x1c2))_0x111053=await findAllAssets(TYPE[_0x32856c(0x1ca)],_0x32856c(0x1c1),_0x33bba3)||[];else{function _0x34da85(){const _0x43c504=_0x32856c,_0x13d287=_0x1a06f8['constructor'][_0x43c504(0x19c)][_0x43c504(0x17d)](_0x8c6b1f),_0x2a7c74=_0x1fb95a[_0x314cec],_0x4a08f2=_0x239ffc[_0x2a7c74]||_0x13d287;_0x13d287[_0x43c504(0x19b)]=_0x3ede94[_0x43c504(0x17d)](_0x571a52),_0x13d287[_0x43c504(0x1a9)]=_0x4a08f2['toString']['bind'](_0x4a08f2),_0x227730[_0x2a7c74]=_0x13d287;}}}catch(_0x513e81){return _0x28668f[_0x32856c(0x1b3)](0x1f7)[_0x32856c(0x1c0)]({'msg':_0x32856c(0x1cf)});}if(_0x1c23ec&&(_0x111053=_0x111053[_0x32856c(0x1ac)](_0x31949d=>!_0x31949d[_0x32856c(0x162)])),_0x1e5772&&(_0x111053=_0x111053[_0x32856c(0x1ac)](_0x31789f=>_0x31789f[_0x32856c(0x16a)])),!_0xd31781)return _0x28668f[_0x32856c(0x1c0)](_0x111053);const _0xa468e4={};_0x111053[_0x32856c(0x16f)](_0x33134d=>{_0xa468e4[_0x33134d['signature']]=_0x33134d;});const _0x1b8b61=[];return _0x111053['forEach'](_0x458c06=>_0x1b8b61[_0x32856c(0x1b7)](expandSupportingTransactions(_0x458c06,_0xa468e4))),await Promise[_0x32856c(0x19d)](_0x1b8b61),_0x28668f[_0x32856c(0x1b3)](0xc8)['json'](_0x111053);},getTransactionByAddress=async(_0x5309a8,_0x480b2e)=>{const _0x327d24=_0x4c5e2c;if(!(_0x327d24(0x18c)===_0x5309a8['query'][_0x327d24(0x1ba)]||!0x1))return findAssetByAddress(TYPE['TRANSACTION'],_0x327d24(0x176)+_0x5309a8[_0x327d24(0x1b1)][_0x327d24(0x1b0)],_0x5309a8,_0x480b2e);_0x5309a8=await findTransaction(_0x5309a8[_0x327d24(0x1b1)]['address']);let _0x4724b8;return _0x5309a8&&(_0x4724b8=await expandSupportingTransactions(_0x5309a8)),_0x480b2e[_0x327d24(0x1b3)](0xc8)['json'](_0x4724b8);},createTransaction=async(_0x541f3f,_0x261290)=>{const _0xf15281=_0x4c5e2c;_0x541f3f[_0xf15281(0x168)][_0xf15281(0x178)]=Number(_0x541f3f[_0xf15281(0x168)][_0xf15281(0x178)][_0xf15281(0x174)](MAXIMUM_FLOAT_PRECISION));const _0x6fb0d7=new Transaction(_0x541f3f[_0xf15281(0x168)]),{sender:_0x4b77ac,recipient:_0xc02f67,amount:_0x462c93,signature:_0x22e270,valid:_0x5efb46}=_0x6fb0d7;let _0x5b3631,_0x21be9d;const {pendingAmount:_0x154bfd,usedTransactions:_0x2e279c,existingRecipient:_0x1ae6c5,existingSender:_0x5ef24e}=await getSupportingTransactions(_0x6fb0d7),_0x29e0a0=[];_0x5efb46&&Array[_0xf15281(0x1ce)](_0x2e279c)&&_0x2e279c[_0xf15281(0x16f)](_0x286c75=>{const _0x24384e=_0xf15281;_0x6fb0d7[_0x24384e(0x172)](_0x286c75[_0x24384e(0x17b)]),_0x29e0a0['push'](getTransactionAddress(_0x286c75[_0x24384e(0x17b)]));});var _0x5327e2=getTransactionAddress(_0x6fb0d7[_0xf15281(0x17b)]),_0x43da6b=JSON[_0xf15281(0x165)]({'func':_0xf15281(0x179),'args':{'transaction':_0x6fb0d7[_0xf15281(0x1a9)](!0x1,!0x1),'txid':_0x6fb0d7[_0xf15281(0x17b)]}}),_0x541f3f={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x5327e2,..._0x29e0a0],'outputs':[_0x5327e2],'payload':_0x43da6b};let _0x4e2042=new User(_0x1ae6c5);_0x4e2042[_0xf15281(0x1be)](USER_TYPE[_0xf15281(0x1a8)],_0x462c93,_0x22e270,_0x5efb46),_0x4e2042=_0x4e2042[_0xf15281(0x1a9)](!0x1,!0x1);var _0x552b51,_0x5327e2=getUserAddress(_0xc02f67),_0x43da6b=JSON[_0xf15281(0x165)]({'func':_0xf15281(0x179),'args':{'transaction':_0x4e2042,'txid':_0xc02f67}}),_0x5327e2={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x5327e2],'outputs':[_0x5327e2],'payload':_0x43da6b};if(_0x5ef24e){if(_0xf15281(0x163)!=='TmOgx'){let _0x213600=new User(_0x5ef24e);if(_0x5efb46){Array[_0xf15281(0x1ce)](_0x2e279c)&&_0x2e279c[_0xf15281(0x16f)](_0x194e9f=>_0x213600[_0xf15281(0x1be)](USER_TYPE['SENDER'],_0x194e9f[_0xf15281(0x178)],_0x194e9f['signature'],_0x5efb46)),_0x43da6b=-_0x154bfd;if(0x0<_0x43da6b){var _0x196a9c=_0xf15281(0x1b4)+_0x6fb0d7[_0xf15281(0x17b)]+':\x0a\x20Sender:\x20'+_0x4b77ac+_0xf15281(0x1a6)+_0xc02f67+'\x0aAmount:\x20'+_0x462c93+_0xf15281(0x1d3)+_0x43da6b,_0x3bdce0=hash512(_0x196a9c);let _0x80fcb5=new Transaction(_0x43da6b,_0x4b77ac,null,_0x196a9c,!0x0,null,_0x3bdce0);Array[_0xf15281(0x1ce)](_0x2e279c)&&_0x2e279c[_0xf15281(0x16f)](_0x7f16db=>_0x80fcb5['addSupportingTransaction'](_0x7f16db[_0xf15281(0x17b)])),_0x213600[_0xf15281(0x1be)](USER_TYPE[_0xf15281(0x1a8)],_0x80fcb5[_0xf15281(0x178)],_0x80fcb5[_0xf15281(0x17b)]),_0x80fcb5=_0x80fcb5[_0xf15281(0x1a9)](!0x1,!0x1),(_0x196a9c=getTransactionAddress(_0x3bdce0),_0x3bdce0=JSON[_0xf15281(0x165)]({'func':_0xf15281(0x179),'args':{'transaction':_0x80fcb5,'txid':_0x3bdce0}})),_0x5b3631={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x196a9c,..._0x29e0a0],'outputs':[_0x196a9c],'payload':_0x3bdce0};}}else _0x213600['addTransaction'](USER_TYPE[_0xf15281(0x1a8)],_0x462c93,_0x22e270,_0x5efb46);_0x213600=_0x213600[_0xf15281(0x1a9)](!0x1,!0x1),(_0x196a9c=getUserAddress(_0x4b77ac),_0x3bdce0=JSON['stringify']({'func':_0xf15281(0x179),'args':{'transaction':_0x213600,'txid':_0x4b77ac}})),_0x21be9d={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x196a9c],'outputs':[_0x196a9c],'payload':_0x3bdce0};}else{function _0x2e58c1(){const _0xe5b7c2=_0x6ef70d['apply'](_0x4d8b93,arguments);return _0x621927=null,_0xe5b7c2;}}}try{const _0x258191=[{..._0x541f3f}];return _0x258191[_0xf15281(0x1b7)]({..._0x5327e2}),_0x21be9d&&_0x258191['push']({..._0x21be9d}),_0x5b3631&&_0x258191['push']({..._0x5b3631}),_0x552b51=await sendTransaction(_0x258191),logFormatted(_0xf15281(0x17e)+_0x552b51[_0xf15281(0x1b3)]+_0xf15281(0x1b2)+_0x552b51[_0xf15281(0x16d)],SEVERITY[_0xf15281(0x166)]),delete _0x6fb0d7['type'],_0x261290['status'](0xc9)[_0xf15281(0x1c0)]({'msg':_0xf15281(0x171),'payload':_0x6fb0d7});}catch(_0x40ed42){return logFormatted('POST\x20/transaction\x20|\x20BATCH\x20Response:\x20'+_0x40ed42,SEVERITY['ERROR']),_0x261290[_0xf15281(0x1b3)](0x1f4)[_0xf15281(0x1c0)]({'err':_0x40ed42});}},updateTransaction=async(_0x523e50,_0x23cdfc)=>{const _0x3cf45e=_0x4c5e2c,_0x277b87=new Transaction(await findTransaction(_0x523e50[_0x3cf45e(0x1b1)][_0x3cf45e(0x1b0)]));var _0x5986f2='true'===_0x523e50[_0x3cf45e(0x188)][_0x3cf45e(0x1cd)]||!0x1;_0x277b87['valid']=_0x5986f2,_0x277b87['pending']=!0x1;const {sender:_0x3bbf26,recipient:_0x403c2d,amount:_0x36097f,signature:_0x35db4c,valid:_0x15a853}=_0x277b87,_0x421377=[];let _0x22e46e,_0x11c7c8;const {pendingAmount:_0x27c013,usedTransactions:_0x5871b0,existingRecipient:_0x1cda6b,existingSender:_0x457685}=await getSupportingTransactions(_0x277b87);let _0x38d638=new User(_0x1cda6b),_0x5b23f4;_0x38d638[_0x3cf45e(0x184)](_0x35db4c);let _0x2daaae;if(_0x457685&&(_0x2daaae=new User(_0x457685),_0x2daaae[_0x3cf45e(0x184)](_0x35db4c)),_0x277b87['valid']){if(_0x3cf45e(0x16e)===_0x3cf45e(0x16e)){Array[_0x3cf45e(0x1ce)](_0x5871b0)&&_0x5871b0[_0x3cf45e(0x16f)](_0x455fc4=>{const _0x25146b=_0x3cf45e;if(_0x25146b(0x1ad)!==_0x25146b(0x1ad)){function _0x42d5d2(){const _0x438002=_0x25146b;var _0x3e678a=_0x438002(0x1b4)+_0xab93e9[_0x438002(0x17b)]+':\x0a\x20Sender:\x20'+_0x3ae840+_0x438002(0x1a6)+_0x52d176+_0x438002(0x1d0)+_0x4da924+'\x0aChange:\x20'+_0xae49f,_0x3865e6=_0x117491(_0x3e678a);let _0xa36936=new _0x53419c(_0x490722,_0x3fbb2f,null,_0x3e678a,!0x0,null,_0x3865e6);_0xeaced0[_0x438002(0x1ce)](_0x135cce)&&_0x4a3b6a[_0x438002(0x16f)](_0x385142=>_0xa36936[_0x438002(0x172)](_0x385142[_0x438002(0x17b)])),_0x5ea09c[_0x438002(0x1be)](_0x6a5ea8['RECIPIENT'],_0xa36936[_0x438002(0x178)],_0xa36936[_0x438002(0x17b)]),_0xa36936=_0xa36936['toString'](!0x1,!0x1),(_0x3e678a=_0x541cd7(_0x3865e6),_0x3865e6=_0x201a27[_0x438002(0x165)]({'func':_0x438002(0x179),'args':{'transaction':_0xa36936,'txid':_0x3865e6}})),_0x3870a5={'transactionFamily':_0x115c35,'transactionFamilyVersion':_0x4fee15,'inputs':[_0x3e678a,..._0x51647d],'outputs':[_0x3e678a],'payload':_0x3865e6};}}else _0x277b87[_0x25146b(0x172)](_0x455fc4[_0x25146b(0x17b)]),_0x421377[_0x25146b(0x1b7)](getTransactionAddress(_0x455fc4[_0x25146b(0x17b)]));}),_0x38d638[_0x3cf45e(0x1be)](USER_TYPE[_0x3cf45e(0x1a8)],_0x36097f,_0x35db4c,_0x15a853),_0x38d638=_0x38d638['toString'](!0x1,!0x1),(_0x523e50=getUserAddress(_0x403c2d),_0x5986f2=JSON[_0x3cf45e(0x165)]({'func':_0x3cf45e(0x179),'args':{'transaction':_0x38d638,'txid':_0x403c2d}}));if(_0x5b23f4={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x523e50],'outputs':[_0x523e50],'payload':_0x5986f2},_0x2daaae){Array[_0x3cf45e(0x1ce)](_0x5871b0)&&_0x5871b0[_0x3cf45e(0x16f)](_0x4400cc=>_0x2daaae[_0x3cf45e(0x1be)](USER_TYPE[_0x3cf45e(0x1a2)],_0x4400cc['amount'],_0x4400cc[_0x3cf45e(0x17b)],_0x15a853)),_0x5986f2=-_0x27c013;if(0x0<_0x5986f2){if(_0x3cf45e(0x187)===_0x3cf45e(0x187)){var _0x367575=_0x3cf45e(0x1b4)+_0x277b87[_0x3cf45e(0x17b)]+_0x3cf45e(0x1c5)+_0x3bbf26+_0x3cf45e(0x1a6)+_0x403c2d+'\x0aAmount:\x20'+_0x36097f+'\x0aChange:\x20'+_0x5986f2,_0x529e4a=hash512(_0x367575);let _0x432989=new Transaction(_0x5986f2,_0x3bbf26,null,_0x367575,!0x0,null,_0x529e4a);Array[_0x3cf45e(0x1ce)](_0x5871b0)&&_0x5871b0[_0x3cf45e(0x16f)](_0xec6e6c=>_0x432989['addSupportingTransaction'](_0xec6e6c['signature'])),_0x2daaae['addTransaction'](USER_TYPE['RECIPIENT'],_0x432989[_0x3cf45e(0x178)],_0x432989[_0x3cf45e(0x17b)]),_0x432989=_0x432989['toString'](!0x1,!0x1),(_0x367575=getTransactionAddress(_0x529e4a),_0x529e4a=JSON['stringify']({'func':'post','args':{'transaction':_0x432989,'txid':_0x529e4a}})),_0x22e46e={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x367575,..._0x421377],'outputs':[_0x367575],'payload':_0x529e4a};}else{function _0x5a9096(){_0x4b6c73[_0x4ea123['signature']]=_0x3a8f23;}}}_0x2daaae=_0x2daaae['toString'](!0x1,!0x1),(_0x367575=getUserAddress(_0x3bbf26),_0x529e4a=JSON[_0x3cf45e(0x165)]({'func':_0x3cf45e(0x179),'args':{'transaction':_0x2daaae,'txid':_0x3bbf26}})),_0x11c7c8={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x367575],'outputs':[_0x367575],'payload':_0x529e4a};}}else{function _0x2f5b49(){const _0x25e4d8=_0x3cf45e;_0x3be9ab[_0x25e4d8(0x1b7)](_0x4a3a16);}}}var _0x24a03b,_0x367575=getTransactionAddress(_0x277b87[_0x3cf45e(0x17b)]),_0x529e4a=JSON[_0x3cf45e(0x165)]({'func':_0x3cf45e(0x179),'args':{'transaction':_0x277b87[_0x3cf45e(0x1a9)](!0x1,!0x1),'txid':_0x277b87['signature']}}),_0x529e4a={'transactionFamily':TRANSACTION_FAMILY,'transactionFamilyVersion':TRANSACTION_FAMILY_VERSION,'inputs':[_0x367575,..._0x421377],'outputs':[_0x367575],'payload':_0x529e4a};try{if(_0x3cf45e(0x1aa)!==_0x3cf45e(0x160)){const _0x1491b4=[{..._0x529e4a}];return _0x5b23f4&&_0x1491b4[_0x3cf45e(0x1b7)]({..._0x5b23f4}),_0x11c7c8&&_0x1491b4[_0x3cf45e(0x1b7)]({..._0x11c7c8}),_0x22e46e&&_0x1491b4[_0x3cf45e(0x1b7)]({..._0x22e46e}),_0x24a03b=await sendTransaction(_0x1491b4),logFormatted(_0x3cf45e(0x1bf)+_0x24a03b[_0x3cf45e(0x1b3)]+_0x3cf45e(0x1b2)+_0x24a03b[_0x3cf45e(0x16d)],SEVERITY[_0x3cf45e(0x166)]),delete _0x277b87[_0x3cf45e(0x175)],_0x23cdfc[_0x3cf45e(0x1b3)](0xc8)[_0x3cf45e(0x1c0)]({'msg':_0x3cf45e(0x199),'payload':_0x277b87});}else{function _0x2df517(){const _0x3a9592=_0x3cf45e;_0x594286[_0x3a9592(0x1ce)](_0x4c4ba0)&&_0x3cf9f0[_0x3a9592(0x16f)](_0x36f63b=>_0x2f9567[_0x3a9592(0x1be)](_0x18d215[_0x3a9592(0x1a2)],_0x36f63b[_0x3a9592(0x178)],_0x36f63b[_0x3a9592(0x17b)],_0x176c29)),_0x4a4457=-_0x4cd682;if(0x0<_0x5d91df){var _0x5a8927='Resulting\x20change\x20of\x20transaction\x20'+_0x290029[_0x3a9592(0x17b)]+_0x3a9592(0x1c5)+_0x1336bb+_0x3a9592(0x1a6)+_0x1f897d+_0x3a9592(0x1d0)+_0x428f42+_0x3a9592(0x1d3)+_0x5be6ed,_0x466569=_0x135452(_0x5a8927);let _0x405379=new _0x5db439(_0x102401,_0x580389,null,_0x5a8927,!0x0,null,_0x466569);_0x3bbb6e['isArray'](_0x313cee)&&_0x5ad188[_0x3a9592(0x16f)](_0x3bb450=>_0x405379[_0x3a9592(0x172)](_0x3bb450['signature'])),_0x4a9762[_0x3a9592(0x1be)](_0x393fd8[_0x3a9592(0x1a8)],_0x405379[_0x3a9592(0x178)],_0x405379[_0x3a9592(0x17b)]),_0x405379=_0x405379['toString'](!0x1,!0x1),(_0x5a8927=_0x2d9f92(_0x466569),_0x466569=_0x5870f3[_0x3a9592(0x165)]({'func':_0x3a9592(0x179),'args':{'transaction':_0x405379,'txid':_0x466569}})),_0x5aa747={'transactionFamily':_0xf0ece0,'transactionFamilyVersion':_0x956bcb,'inputs':[_0x5a8927,..._0x3efdbc],'outputs':[_0x5a8927],'payload':_0x466569};}}}}catch(_0x4ac88c){if('IOkEM'==='IOkEM')return logFormatted('PUT\x20/transaction\x20|\x20BATCH\x20Response:\x20'+_0x4ac88c,SEVERITY['ERROR']),_0x23cdfc[_0x3cf45e(0x1b3)](0x1f4)[_0x3cf45e(0x1c0)]({'err':_0x4ac88c});else{function _0x346d16(){const _0x333a08=_0x3cf45e;return _0x26f392(_0x333a08(0x17e)+_0x14d2dd,_0x8d643c['ERROR']),_0x231591[_0x333a08(0x1b3)](0x1f4)[_0x333a08(0x1c0)]({'err':_0x1c919d});}}}},getTransactionHistory=async(_0x1ba325,_0x115889)=>{const _0x1f696b=_0x4c5e2c;var _0x4514a5=_0x1ba325[_0x1f696b(0x188)][_0x1f696b(0x16c)]||0x0;const _0xc498c9=await mongo[_0x1f696b(0x1c4)](),_0x2d323f=_0xc498c9['db']('mydb')[_0x1f696b(0x1bc)]('cnk-cryptocurrency_users'),_0x4c18dc=[],_0x1e3ccb=await _0x2d323f[_0x1f696b(0x183)]({'root':_0x1ba325[_0x1f696b(0x18e)]})[_0x1f696b(0x1c7)]({'block_num':-0x1})['skip'](0x2*_0x4514a5)[_0x1f696b(0x1c6)](0x2);return await new Promise(_0x25fe23=>{const _0x2db444=_0x1f696b;if(_0x2db444(0x1d1)===_0x2db444(0x1d1))_0x1e3ccb[_0x2db444(0x16f)](_0x50f2d2=>{const _0x176abe=_0x2db444;if(_0x176abe(0x193)!==_0x176abe(0x193)){function _0x52435a(){const _0x2c60a2=_0x176abe;var _0x40e9c9=_0x2c60a2(0x1b4)+_0x53949f[_0x2c60a2(0x17b)]+_0x2c60a2(0x1c5)+_0x407734+'\x0aRecipient:\x20'+_0x4e6816+_0x2c60a2(0x1d0)+_0x524235+_0x2c60a2(0x1d3)+_0xf6c4d4,_0x26f09b=_0x1f8fac(_0x40e9c9);let _0x567bc8=new _0x4287a6(_0x225cd3,_0x4f60f2,null,_0x40e9c9,!0x0,null,_0x26f09b);_0x2b1278[_0x2c60a2(0x1ce)](_0x3d8933)&&_0x10e254['forEach'](_0xed7c0b=>_0x567bc8['addSupportingTransaction'](_0xed7c0b[_0x2c60a2(0x17b)])),_0x3241b8[_0x2c60a2(0x1be)](_0x2d4e3c[_0x2c60a2(0x1a8)],_0x567bc8[_0x2c60a2(0x178)],_0x567bc8[_0x2c60a2(0x17b)]),_0x567bc8=_0x567bc8[_0x2c60a2(0x1a9)](!0x1,!0x1),(_0x40e9c9=_0x22e990(_0x26f09b),_0x26f09b=_0x1564e7[_0x2c60a2(0x165)]({'func':_0x2c60a2(0x179),'args':{'transaction':_0x567bc8,'txid':_0x26f09b}})),_0x88aed3={'transactionFamily':_0x42949b,'transactionFamilyVersion':_0x3f53f5,'inputs':[_0x40e9c9,..._0x58db0b],'outputs':[_0x40e9c9],'payload':_0x26f09b};}}else _0x4c18dc['push'](_0x50f2d2);},_0x25fe23);else{function _0x52b640(){const _0x579292=_0x2db444;var _0x27ffd6=_0x55cb7e[_0x45ff7b];_0x2b340d-=_0x4c2637(_0x27ffd6[_0x579292(0x178)]),_0x415278[_0x579292(0x1b7)](_0x27ffd6);}}}),_0x115889[_0x1f696b(0x1c0)](_0x4c18dc);};module['exports'][_0x4c5e2c(0x1cc)]=findTransaction,module['exports']['getSupportingTransactions']=getSupportingTransactions,module[_0x4c5e2c(0x194)][_0x4c5e2c(0x1b8)]=expandSupportingTransactions,module['exports'][_0x4c5e2c(0x181)]=getTransactions,module[_0x4c5e2c(0x194)][_0x4c5e2c(0x195)]=getTransactionByAddress,module[_0x4c5e2c(0x194)][_0x4c5e2c(0x161)]=createTransaction,module[_0x4c5e2c(0x194)][_0x4c5e2c(0x173)]=updateTransaction,module[_0x4c5e2c(0x194)][_0x4c5e2c(0x1a7)]=getTransactionHistory;