var _0x1d38=['RIPnM','console','permissions','__proto__','underscore','toString','.\x20Expected\x20value:\x20','\x20does\x20not\x20exist','apply','49eOGKTR','Return\x20to\x20address\x20','KudRs','xYSdz','RQQCv','3444521GrGvJZ',',\x20user\x27s\x20permission\x20value:\x20','Expected\x20permissions\x20object\x20to\x20be\x20type\x20of\x20object,\x20received\x20','678419VNWkhF','isEmpty','Nested\x20key\x20','\x20does\x20not\x20have\x20required\x20permission\x20','./common','The\x20address\x20of\x20the\x20user\x20is\x20required','../utils/constants','hasOwnProperty','address','prototype','717678ZECscF','USER','custom','\x20defined','not','log','bind','balance','21288oztPXG','return_to','validateUserBalance','8942FtveyW','iCIig','exports','\x20of\x20type\x20','customSanitizer','validateUserPermissions','hUgii','info','pGGWH','User\x20with\x20address\x20','reject','260070FnoTJy','error','\x20must\x20have\x20a\x20value\x20of\x20type\x20boolean,\x20received\x20','trim','Key\x20','vCsRz','trace','public_key','35GEyFbD','../controllers/common','boolean','bail','1VAFKjc','txUbv','object','NfxyQ','pending_transactions','length','constructor','3dLcbMn','withMessage','934827dTaXNr','\x20does\x20not\x20have\x20any\x20permissions,\x20while\x20requiring\x20','{}.constructor(\x22return\x20this\x22)(\x20)','\x20does\x20not\x20have\x20enough\x20balance\x0a.Current\x20balance\x20','The\x20public\x20key\x20is\x20required.','express','call','exception'];var _0x47eb=function(_0x4c3c17,_0x4d902d){_0x4c3c17=_0x4c3c17-0xc3;var _0x58a4f3=_0x1d38[_0x4c3c17];return _0x58a4f3;};var _0x532cf4=_0x47eb;(function(_0x59bc40,_0x2f6a7f){var _0x3be694=_0x47eb;while(!![]){try{var _0x4106cd=-parseInt(_0x3be694(0xd6))*parseInt(_0x3be694(0x107))+-parseInt(_0x3be694(0xf6))+parseInt(_0x3be694(0x10f))+-parseInt(_0x3be694(0xcb))+parseInt(_0x3be694(0xe1))*-parseInt(_0x3be694(0xf4))+parseInt(_0x3be694(0xe9))*-parseInt(_0x3be694(0xd3))+parseInt(_0x3be694(0x10c))*parseInt(_0x3be694(0xed));if(_0x4106cd===_0x2f6a7f)break;else _0x59bc40['push'](_0x59bc40['shift']());}catch(_0x18983f){_0x59bc40['push'](_0x59bc40['shift']());}}}(_0x1d38,0x7bc6b));var _0x1b0652=function(){var _0x10a3cb=!![];return function(_0x262254,_0x172345){var _0x5c230f=_0x10a3cb?function(){var _0x4d00e8=_0x47eb;if(_0x4d00e8(0x109)!=='KudRs'){function _0x425843(){var _0x4168f2=_0x4d00e8;_0xc22718=_0x2c98bd('return\x20(function()\x20'+_0x4168f2(0xf8)+');')();}}else{if(_0x172345){var _0x24db50=_0x172345['apply'](_0x262254,arguments);return _0x172345=null,_0x24db50;}}}:function(){};return _0x10a3cb=![],_0x5c230f;};}(),_0x27af09=_0x1b0652(this,function(){var _0x2ebc7c=_0x47eb,_0xc73b8a=function(){var _0x2218f3=_0x47eb,_0x29ad1e;try{_0x29ad1e=Function('return\x20(function()\x20'+_0x2218f3(0xf8)+');')();}catch(_0x396371){_0x29ad1e=window;}return _0x29ad1e;},_0x2fb986=_0xc73b8a(),_0x55eb96=_0x2fb986[_0x2ebc7c(0xff)]=_0x2fb986[_0x2ebc7c(0xff)]||{},_0x19449c=[_0x2ebc7c(0xd0),'warn',_0x2ebc7c(0xdd),_0x2ebc7c(0xe2),_0x2ebc7c(0xfd),'table',_0x2ebc7c(0xe7)];for(var _0x20d110=0x0;_0x20d110<_0x19449c[_0x2ebc7c(0xf2)];_0x20d110++){var _0x42dbd0=_0x1b0652[_0x2ebc7c(0xf3)][_0x2ebc7c(0xca)][_0x2ebc7c(0xd1)](_0x1b0652),_0x632e8=_0x19449c[_0x20d110],_0x38fd41=_0x55eb96[_0x632e8]||_0x42dbd0;_0x42dbd0[_0x2ebc7c(0x101)]=_0x1b0652['bind'](_0x1b0652),_0x42dbd0[_0x2ebc7c(0x103)]=_0x38fd41[_0x2ebc7c(0x103)]['bind'](_0x38fd41),_0x55eb96[_0x632e8]=_0x42dbd0;}});_0x27af09();const express=require(_0x532cf4(0xfb)),{validateResult,ValidationChain,body,validationResult}=require('express-validator'),_=require(_0x532cf4(0x102)),{expectExisting,findByAddress}=require(_0x532cf4(0xea)),{validateAssetExistence,validate}=require(_0x532cf4(0xc5)),{TYPE}=require(_0x532cf4(0xc7)),validateUserExistence=(_0x11de9a,_0x15f8a9)=>body(_0x11de9a)['custom'](_0x587caa=>validateAssetExistence(TYPE[_0x532cf4(0xcc)],_0x587caa,_0x15f8a9)),inputValidation=validate([body(_0x532cf4(0xc9))[_0x532cf4(0xe4)]()[_0x532cf4(0xcf)]()[_0x532cf4(0x110)]()[_0x532cf4(0xf5)](_0x532cf4(0xc6))['trim']()[_0x532cf4(0xec)](),body(_0x532cf4(0xe8))['trim']()[_0x532cf4(0xcf)]()[_0x532cf4(0x110)]()[_0x532cf4(0xf5)](_0x532cf4(0xfa))[_0x532cf4(0xec)](),body(_0x532cf4(0xd2))['customSanitizer'](_0x2bcf0b=>0x0),body('lastest_transactions')[_0x532cf4(0xda)](_0x150664=>[]),body(_0x532cf4(0xf1))[_0x532cf4(0xda)](_0x512a07=>[]),body('permissions')[_0x532cf4(0xcd)](_0x1ace42=>{var _0xe1a4d2=_0x532cf4;if(_0x1ace42&&_0xe1a4d2(0xef)==typeof _0x1ace42){if(_0xe1a4d2(0xf0)===_0xe1a4d2(0xfe)){function _0x310bec(){var _0xcd3633=_0xe1a4d2,_0x555cd0=_0x122dd7[_0x16b89f];if(null===_0x1c0818[_0xcd3633(0x100)][_0x593c96][_0x135daa]||void 0x0===_0x7454c1[_0xcd3633(0x100)][_0x538561][_0x4856e6])return _0x4110e6[_0xcd3633(0xe0)](_0xcd3633(0xdf)+_0x1f0b97+_0xcd3633(0xc4)+_0x2e74a0+'.'+_0xbd8924+_0xcd3633(0xce));if(_0x555cd0!==_0x14d6a8[_0xcd3633(0x100)][_0xaa3280][_0xf6c6b5])return _0x3a9525[_0xcd3633(0xe0)]('User\x20with\x20address\x20'+_0x4e2abb+_0xcd3633(0xc4)+_0x48b0b7+'.'+_0x243992+_0xcd3633(0x104)+_0x555cd0+_0xcd3633(0x10d)+_0x2bc71b[_0xcd3633(0x100)][_0x3777b5][_0x9bf602]);}}else{for(const _0x5ca101 in _0x1ace42)if(Object[_0xe1a4d2(0xc8)][_0xe1a4d2(0xfc)](_0x1ace42,_0x5ca101)){if(_0xe1a4d2(0x10b)!==_0xe1a4d2(0xee)){var _0x25f52e=_0x1ace42[_0x5ca101];if(_0xe1a4d2(0xef)==typeof _0x25f52e){for(const _0x20ebcb in _0x25f52e)if(Object[_0xe1a4d2(0xc8)][_0xe1a4d2(0xfc)](_0x25f52e,_0x20ebcb)){var _0x4904a7=_0x25f52e[_0x20ebcb];if(_0xe1a4d2(0xeb)!=typeof _0x4904a7)throw new Error('Nested\x20key\x20'+_0x20ebcb+_0xe1a4d2(0xe3)+_0x4904a7+_0xe1a4d2(0xd9)+typeof _0x4904a7);}}else{if(_0xe1a4d2(0xeb)!=typeof _0x25f52e)throw new Error(_0xe1a4d2(0xe5)+_0x5ca101+_0xe1a4d2(0xe3)+_0x25f52e+_0xe1a4d2(0xd9)+typeof _0x25f52e);}}else{function _0xcb74da(){var _0x1dc049=_0xe1a4d2,_0x35bf65=_0x311469[_0x1866b1];if('boolean'!=typeof _0x35bf65)throw new _0xe06d63(_0x1dc049(0xc3)+_0x9ebb47+_0x1dc049(0xe3)+_0x35bf65+_0x1dc049(0xd9)+typeof _0x35bf65);}}}}}else{if(_0x1ace42&&_0xe1a4d2(0xef)!=typeof _0x1ace42)throw new Error(_0xe1a4d2(0x10e)+typeof _0x1ace42);}return!0x0;})[_0x532cf4(0xec)](),body(_0x532cf4(0xd4))[_0x532cf4(0xcd)](async _0x33cd55=>{var _0x203511=_0x532cf4;if(_0x33cd55&&'object'==typeof _0x33cd55){for(const _0x3610f3 in _0x33cd55)if(Object['hasOwnProperty'][_0x203511(0xfc)](_0x33cd55,_0x3610f3)){if('XYHzQ'!=='XYHzQ'){function _0x2033e3(){var _0x15b9b3=_0x203511;for(const _0x497512 in _0x4e729e)if(_0x13b2ad[_0x15b9b3(0xc8)][_0x15b9b3(0xfc)](_0x1729a8,_0x497512)){var _0xd8b1dc=_0x5f1fc7[_0x497512];if('boolean'!=typeof _0xd8b1dc)throw new _0x25d988('Nested\x20key\x20'+_0x497512+_0x15b9b3(0xe3)+_0xd8b1dc+_0x15b9b3(0xd9)+typeof _0xd8b1dc);}}}else{var _0x2199fa=_0x33cd55[_0x3610f3];if('string'!=typeof _0x2199fa)throw new Error(_0x203511(0x108)+_0x3610f3+'\x20must\x20have\x20a\x20value\x20of\x20type\x20string,\x20received\x20'+_0x2199fa+_0x203511(0xd9)+typeof _0x2199fa);await validateAssetExistence(TYPE[_0x203511(0xcc)],_0x2199fa,!0x0);}}}return!0x0;})[_0x532cf4(0xec)]()]),uniqueUserValidation=validate([validateUserExistence('address',!0x1)]),validateUserPermissions=(_0x3810d0,_0x349b98,_0x207c9f)=>body(_0x3810d0)[_0x532cf4(0xcd)](async _0x2f361e=>{var _0xbced33=_0x532cf4,_0x33d6bb=await findByAddress(TYPE[_0xbced33(0xcc)],_0x2f361e);if(!_0x33d6bb)return Promise[_0xbced33(0xe0)]('User\x20with\x20address\x20'+_0x2f361e+_0xbced33(0x105));if(!_[_0xbced33(0x110)](_0x349b98)){if(_[_0xbced33(0x110)](_0x33d6bb[_0xbced33(0x100)]))return Promise[_0xbced33(0xe0)](_0xbced33(0xdf)+_0x2f361e+_0xbced33(0xf7)+JSON['stringify'](_0x349b98));for(const _0x479724 in _0x349b98)if(Object[_0xbced33(0xc8)][_0xbced33(0xfc)](_0x349b98,_0x479724)){if(_0xbced33(0xe6)!==_0xbced33(0xe6)){function _0x51a4c4(){var _0x3d5965=_0xbced33,_0x285143=_0xcc9ef0[_0x3d5965(0x106)](_0x3573a5,arguments);return _0x11539a=null,_0x285143;}}else{var _0x2eff17=_0x349b98[_0x479724];if(_0xbced33(0xef)==typeof _0x2eff17&&_0xbced33(0xef)==typeof _0x33d6bb[_0xbced33(0x100)][_0x479724]){for(const _0x1f6230 in _0x2eff17)if(Object[_0xbced33(0xc8)]['call'](_0x2eff17,_0x1f6230)){var _0x35b54a=_0x2eff17[_0x1f6230];if(null===_0x33d6bb[_0xbced33(0x100)][_0x479724][_0x1f6230]||void 0x0===_0x33d6bb['permissions'][_0x479724][_0x1f6230])return Promise[_0xbced33(0xe0)](_0xbced33(0xdf)+_0x2f361e+_0xbced33(0xc4)+_0x479724+'.'+_0x1f6230+_0xbced33(0xce));if(_0x35b54a!==_0x33d6bb[_0xbced33(0x100)][_0x479724][_0x1f6230])return Promise[_0xbced33(0xe0)](_0xbced33(0xdf)+_0x2f361e+_0xbced33(0xc4)+_0x479724+'.'+_0x1f6230+_0xbced33(0x104)+_0x35b54a+_0xbced33(0x10d)+_0x33d6bb['permissions'][_0x479724][_0x1f6230]);}}else{if(null===_0x33d6bb[_0xbced33(0x100)][_0x479724]||void 0x0===_0x33d6bb['permissions'][_0x479724])return Promise[_0xbced33(0xe0)](_0xbced33(0xdf)+_0x2f361e+_0xbced33(0xc4)+_0x479724+_0xbced33(0xce));if(_0x33d6bb[_0xbced33(0x100)][_0x479724]!==_0x2eff17)return Promise['reject'](_0xbced33(0xdf)+_0x2f361e+_0xbced33(0xc4)+_0x479724+_0xbced33(0x104)+_0x2eff17+_0xbced33(0x10d)+_0x33d6bb[_0xbced33(0x100)][_0x479724]);}}}}if(!_[_0xbced33(0x110)](_0x207c9f)){for(const _0x30fadf in _0x207c9f)if(Object[_0xbced33(0xc8)]['call'](_0x207c9f,_0x30fadf)){if(_0xbced33(0xde)!==_0xbced33(0x10a)){var _0x1538a4=_0x207c9f[_0x30fadf];if(null!==_0x33d6bb['permissions'][_0x30fadf]&&void 0x0!==_0x33d6bb['permissions'][_0x30fadf]){if(_0xbced33(0xef)==typeof _0x1538a4&&_0xbced33(0xef)==typeof _0x33d6bb[_0xbced33(0x100)][_0x30fadf]){if(_0xbced33(0xd7)===_0xbced33(0xdc)){function _0x50fcd0(){var _0x4fb75b=_0xbced33,_0x2f7790;try{_0x2f7790=_0x3fd7b4('return\x20(function()\x20'+_0x4fb75b(0xf8)+');')();}catch(_0x3f9cd0){_0x2f7790=_0xb0149;}return _0x2f7790;}}else{for(const _0x32eee3 in _0x1538a4)if(Object[_0xbced33(0xc8)][_0xbced33(0xfc)](_0x1538a4,_0x32eee3)){var _0x2165e0=_0x1538a4[_0x32eee3];if(null!==_0x33d6bb[_0xbced33(0x100)][_0x30fadf][_0x32eee3]&&void 0x0!==_0x33d6bb[_0xbced33(0x100)][_0x30fadf][_0x32eee3]&&_0x2165e0!==_0x33d6bb[_0xbced33(0x100)][_0x30fadf][_0x32eee3])return Promise['reject'](_0xbced33(0xdf)+_0x2f361e+_0xbced33(0xc4)+_0x30fadf+'.'+_0x32eee3+_0xbced33(0x104)+_0x2165e0+_0xbced33(0x10d)+_0x33d6bb['permissions'][_0x30fadf][_0x32eee3]);}}}else{if(_0x33d6bb[_0xbced33(0x100)][_0x30fadf]!==_0x1538a4)return Promise['reject'](_0xbced33(0xdf)+_0x2f361e+_0xbced33(0xc4)+_0x30fadf+_0xbced33(0x104)+_0x1538a4+_0xbced33(0x10d)+_0x33d6bb['permissions'][_0x30fadf]);}}}else{function _0x299d5f(){var _0x42356c=_0xbced33,_0x3ba565=_0x5d2ad4[_0x383964];if(_0x42356c(0xef)==typeof _0x3ba565&&_0x42356c(0xef)==typeof _0x23552[_0x42356c(0x100)][_0x1e4957]){for(const _0x3463f5 in _0x3ba565)if(_0x1f4c6c[_0x42356c(0xc8)][_0x42356c(0xfc)](_0x3ba565,_0x3463f5)){var _0x2c203b=_0x3ba565[_0x3463f5];if(null===_0x1fa810[_0x42356c(0x100)][_0x4ad034][_0x3463f5]||void 0x0===_0x309a37[_0x42356c(0x100)][_0x50b7a9][_0x3463f5])return _0x18373b[_0x42356c(0xe0)](_0x42356c(0xdf)+_0x1f993e+_0x42356c(0xc4)+_0x1d742b+'.'+_0x3463f5+_0x42356c(0xce));if(_0x2c203b!==_0x2558c3[_0x42356c(0x100)][_0x366383][_0x3463f5])return _0x1d77de['reject']('User\x20with\x20address\x20'+_0x1d27a1+'\x20does\x20not\x20have\x20required\x20permission\x20'+_0x1eb537+'.'+_0x3463f5+_0x42356c(0x104)+_0x2c203b+',\x20user\x27s\x20permission\x20value:\x20'+_0x4b4b4a[_0x42356c(0x100)][_0x4e5670][_0x3463f5]);}}else{if(null===_0x5d5279['permissions'][_0x172608]||void 0x0===_0x343f92[_0x42356c(0x100)][_0x968e65])return _0x2941af['reject'](_0x42356c(0xdf)+_0x5be965+'\x20does\x20not\x20have\x20required\x20permission\x20'+_0xb346f7+_0x42356c(0xce));if(_0x4248fd[_0x42356c(0x100)][_0x286c8c]!==_0x3ba565)return _0x2245d2['reject'](_0x42356c(0xdf)+_0x5aafe6+_0x42356c(0xc4)+_0x3f340a+'.\x20Expected\x20value:\x20'+_0x3ba565+_0x42356c(0x10d)+_0x3298c6[_0x42356c(0x100)][_0x2fe9db]);}}}}}}),validateUserBalance=(_0x23d82f,_0x1b2600)=>body(_0x23d82f)[_0x532cf4(0xcd)](async _0x56eaeb=>{var _0x48e664=_0x532cf4,_0x4bb33f=await findByAddress(TYPE['USER'],_0x56eaeb);return _0x4bb33f?_0x4bb33f[_0x48e664(0xd2)]<_0x1b2600?Promise[_0x48e664(0xe0)](_0x48e664(0xdf)+_0x56eaeb+_0x48e664(0xf9)+_0x4bb33f['balance']+'\x0aRequired\x20balance:\x20'+_0x1b2600):void 0x0:Promise[_0x48e664(0xe0)]('$User\x20with\x20address\x20'+_0x56eaeb+_0x48e664(0x105));});module[_0x532cf4(0xd8)][_0x532cf4(0xd5)]=validateUserBalance,module[_0x532cf4(0xd8)]['validateUserExistence']=validateUserExistence,module['exports'][_0x532cf4(0xdb)]=validateUserPermissions;const validateUserCreation=[inputValidation,uniqueUserValidation];module[_0x532cf4(0xd8)]['validateUserCreation']=validateUserCreation;