var _0x5a0a=['balance','../utils/constants','5752elHrut','lastest_transactions','./common','customSanitizer','1puNpVl','\x20does\x20not\x20exist','$User\x20with\x20address\x20','public_key','25eXwVUC','110172DYSObM','express-validator','hasOwnProperty','address','info','\x20of\x20type\x20','permissions','underscore','stringify','object','not','validateUserPermissions','The\x20address\x20of\x20the\x20user\x20is\x20required','console','custom','\x20defined','length','isEmpty','withMessage','75173VMqvso','19076eytEMX','return\x20(function()\x20','29xQcYzB','11027RVaPnK','bind','\x20does\x20not\x20have\x20enough\x20balance\x0a.Current\x20balance\x20','prototype','trace','BUBrv','xrVVp','1363fatZrm','return_to','table','constructor','\x20does\x20not\x20have\x20required\x20permission\x20','Nested\x20key\x20','Return\x20to\x20address\x20','Key\x20','reject','boolean','bail','call','pending_transactions','1jTolBa',',\x20user\x27s\x20permission\x20value:\x20','exports','\x20must\x20have\x20a\x20value\x20of\x20type\x20boolean,\x20received\x20','.\x20Expected\x20value:\x20','YhqYV','2TVZTIC','exception','error','vCpSN','114941vwOqok','WBJfs','express','User\x20with\x20address\x20','\x20does\x20not\x20have\x20any\x20permissions,\x20while\x20requiring\x20','apply','__proto__','trim','string','USER'];var _0x398a=function(_0x4b59a1,_0x3a7498){_0x4b59a1=_0x4b59a1-0x1f4;var _0x5cad25=_0x5a0a[_0x4b59a1];return _0x5cad25;};var _0x4218d5=_0x398a;(function(_0x1b4b8c,_0x4ea99a){var _0x3208e6=_0x398a;while(!![]){try{var _0x5d7e32=-parseInt(_0x3208e6(0x219))+parseInt(_0x3208e6(0x21a))+-parseInt(_0x3208e6(0x237))*-parseInt(_0x3208e6(0x23b))+-parseInt(_0x3208e6(0x21c))*parseInt(_0x3208e6(0x224))+-parseInt(_0x3208e6(0x21d))*-parseInt(_0x3208e6(0x201))+-parseInt(_0x3208e6(0x205))*-parseInt(_0x3208e6(0x1fd))+-parseInt(_0x3208e6(0x206))*parseInt(_0x3208e6(0x231));if(_0x5d7e32===_0x4ea99a)break;else _0x1b4b8c['push'](_0x1b4b8c['shift']());}catch(_0x4a9f60){_0x1b4b8c['push'](_0x1b4b8c['shift']());}}}(_0x5a0a,0x2bae1));var _0x32a626=function(){var _0x119729=!![];return function(_0x118838,_0x5a78cc){var _0x487943=_0x398a;if(_0x487943(0x223)===_0x487943(0x236)){function _0xb8c3e5(){var _0x51d17a=_0x487943;for(const _0x417789 in _0x5b1c12)if(_0xdda1bc[_0x51d17a(0x208)][_0x51d17a(0x22f)](_0x379a32,_0x417789)){var _0x4fa705=_0x4aa9aa[_0x417789];if(null!==_0x53cd6c[_0x51d17a(0x20c)][_0xd4c789][_0x417789]&&void 0x0!==_0x1a90b4['permissions'][_0x9d0145][_0x417789]&&_0x4fa705!==_0x1384ac['permissions'][_0x280cca][_0x417789])return _0x9aa5a['reject'](_0x51d17a(0x1f4)+_0x2d76f0+_0x51d17a(0x228)+_0x311c83+'.'+_0x417789+_0x51d17a(0x235)+_0x4fa705+_0x51d17a(0x232)+_0x4f7b1b['permissions'][_0x337562][_0x417789]);}}}else{var _0x3b78b1=_0x119729?function(){var _0x204a45=_0x487943;if(_0x5a78cc){var _0x139d8e=_0x5a78cc[_0x204a45(0x1f6)](_0x118838,arguments);return _0x5a78cc=null,_0x139d8e;}}:function(){};return _0x119729=![],_0x3b78b1;}};}(),_0x414006=_0x32a626(this,function(){var _0x36bd15=_0x398a,_0x347b36;try{if('bkSdJ'!=='bkSdJ'){function _0x4fad79(){var _0x812580=_0x398a,_0x33d9a1=_0x596d0e[_0x1d1047];if('boolean'!=typeof _0x33d9a1)throw new _0x459518(_0x812580(0x229)+_0x46a011+_0x812580(0x234)+_0x33d9a1+'\x20of\x20type\x20'+typeof _0x33d9a1);}}else{var _0x12d4ea=Function(_0x36bd15(0x21b)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x347b36=_0x12d4ea();}}catch(_0x2743cf){_0x347b36=window;}var _0x368ea6=_0x347b36[_0x36bd15(0x213)]=_0x347b36[_0x36bd15(0x213)]||{},_0x434677=['log','warn',_0x36bd15(0x20a),_0x36bd15(0x239),_0x36bd15(0x238),_0x36bd15(0x226),_0x36bd15(0x221)];for(var _0x44e72d=0x0;_0x44e72d<_0x434677[_0x36bd15(0x216)];_0x44e72d++){var _0x2f8545=_0x32a626[_0x36bd15(0x227)][_0x36bd15(0x220)]['bind'](_0x32a626),_0x9f2085=_0x434677[_0x44e72d],_0x426b39=_0x368ea6[_0x9f2085]||_0x2f8545;_0x2f8545[_0x36bd15(0x1f7)]=_0x32a626[_0x36bd15(0x21e)](_0x32a626),_0x2f8545['toString']=_0x426b39['toString']['bind'](_0x426b39),_0x368ea6[_0x9f2085]=_0x2f8545;}});_0x414006();const express=require(_0x4218d5(0x23d)),{validateResult,ValidationChain,body,validationResult}=require(_0x4218d5(0x207)),_=require(_0x4218d5(0x20d)),{expectExisting,findByAddress}=require('../controllers/common'),{validateAssetExistence,validate}=require(_0x4218d5(0x1ff)),{TYPE}=require(_0x4218d5(0x1fc)),validateUserExistence=(_0x3a84fa,_0x5c8c27)=>body(_0x3a84fa)['custom'](_0x5b88a5=>validateAssetExistence(TYPE[_0x4218d5(0x1fa)],_0x5b88a5,_0x5c8c27)),inputValidation=validate([body(_0x4218d5(0x209))[_0x4218d5(0x1f8)]()['not']()[_0x4218d5(0x217)]()[_0x4218d5(0x218)](_0x4218d5(0x212))['trim']()[_0x4218d5(0x22e)](),body(_0x4218d5(0x204))[_0x4218d5(0x1f8)]()[_0x4218d5(0x210)]()[_0x4218d5(0x217)]()[_0x4218d5(0x218)]('The\x20public\x20key\x20is\x20required.')[_0x4218d5(0x22e)](),body(_0x4218d5(0x1fb))[_0x4218d5(0x200)](_0x25ca19=>0x0),body(_0x4218d5(0x1fe))[_0x4218d5(0x200)](_0x343762=>[]),body(_0x4218d5(0x230))[_0x4218d5(0x200)](_0x5816eb=>[]),body(_0x4218d5(0x20c))[_0x4218d5(0x214)](_0x209808=>{var _0x421b1c=_0x4218d5;if(_0x209808&&_0x421b1c(0x20f)==typeof _0x209808){for(const _0x26b62b in _0x209808)if(Object[_0x421b1c(0x208)]['call'](_0x209808,_0x26b62b)){if('DVACy'!=='twUXq'){var _0x266302=_0x209808[_0x26b62b];if(_0x421b1c(0x20f)==typeof _0x266302){for(const _0x38ff92 in _0x266302)if(Object['hasOwnProperty'][_0x421b1c(0x22f)](_0x266302,_0x38ff92)){var _0x1ea7a4=_0x266302[_0x38ff92];if(_0x421b1c(0x22d)!=typeof _0x1ea7a4)throw new Error(_0x421b1c(0x229)+_0x38ff92+_0x421b1c(0x234)+_0x1ea7a4+_0x421b1c(0x20b)+typeof _0x1ea7a4);}}else{if(_0x421b1c(0x22d)!=typeof _0x266302)throw new Error(_0x421b1c(0x22b)+_0x26b62b+_0x421b1c(0x234)+_0x266302+'\x20of\x20type\x20'+typeof _0x266302);}}else{function _0x2becec(){var _0x153c38=_0x4ba547?function(){if(_0x273fc1){var _0x510e6d=_0x110403['apply'](_0x3133ce,arguments);return _0x2a2fe0=null,_0x510e6d;}}:function(){};return _0x1b6cd6=![],_0x153c38;}}}}else{if(_0x209808&&_0x421b1c(0x20f)!=typeof _0x209808)throw new Error('Expected\x20permissions\x20object\x20to\x20be\x20type\x20of\x20object,\x20received\x20'+typeof _0x209808);}return!0x0;})['bail'](),body(_0x4218d5(0x225))[_0x4218d5(0x214)](async _0x24fbc5=>{var _0x2365c2=_0x4218d5;if(_0x24fbc5&&_0x2365c2(0x20f)==typeof _0x24fbc5){for(const _0xcc821f in _0x24fbc5)if(Object[_0x2365c2(0x208)][_0x2365c2(0x22f)](_0x24fbc5,_0xcc821f)){var _0x52aa82=_0x24fbc5[_0xcc821f];if(_0x2365c2(0x1f9)!=typeof _0x52aa82)throw new Error(_0x2365c2(0x22a)+_0xcc821f+'\x20must\x20have\x20a\x20value\x20of\x20type\x20string,\x20received\x20'+_0x52aa82+_0x2365c2(0x20b)+typeof _0x52aa82);await validateAssetExistence(TYPE[_0x2365c2(0x1fa)],_0x52aa82,!0x0);}}return!0x0;})[_0x4218d5(0x22e)]()]),uniqueUserValidation=validate([validateUserExistence(_0x4218d5(0x209),!0x1)]),validateUserPermissions=(_0x115bad,_0xd0e37,_0x320d41)=>body(_0x115bad)[_0x4218d5(0x214)](async _0xb34d85=>{var _0x48337f=_0x4218d5,_0x12e80d=await findByAddress(TYPE[_0x48337f(0x1fa)],_0xb34d85);if(!_0x12e80d)return Promise[_0x48337f(0x22c)]('User\x20with\x20address\x20'+_0xb34d85+_0x48337f(0x202));if(!_['isEmpty'](_0xd0e37)){if(_[_0x48337f(0x217)](_0x12e80d[_0x48337f(0x20c)]))return Promise['reject'](_0x48337f(0x1f4)+_0xb34d85+_0x48337f(0x1f5)+JSON[_0x48337f(0x20e)](_0xd0e37));for(const _0x502620 in _0xd0e37)if(Object[_0x48337f(0x208)]['call'](_0xd0e37,_0x502620)){if('vCpSN'===_0x48337f(0x23a)){var _0x88fd2a=_0xd0e37[_0x502620];if(_0x48337f(0x20f)==typeof _0x88fd2a&&_0x48337f(0x20f)==typeof _0x12e80d[_0x48337f(0x20c)][_0x502620]){for(const _0x5b0a24 in _0x88fd2a)if(Object[_0x48337f(0x208)][_0x48337f(0x22f)](_0x88fd2a,_0x5b0a24)){if(_0x48337f(0x222)!=='BUBrv'){function _0x363b26(){var _0x2e04d8=_0x48337f;for(const _0x5ce4b1 in _0x102a20)if(_0x4e654d[_0x2e04d8(0x208)][_0x2e04d8(0x22f)](_0x980f1d,_0x5ce4b1)){var _0xdb94eb=_0x2e7042[_0x5ce4b1];if('boolean'!=typeof _0xdb94eb)throw new _0x5d95d7(_0x2e04d8(0x229)+_0x5ce4b1+'\x20must\x20have\x20a\x20value\x20of\x20type\x20boolean,\x20received\x20'+_0xdb94eb+'\x20of\x20type\x20'+typeof _0xdb94eb);}}}else{var _0x47fa2d=_0x88fd2a[_0x5b0a24];if(null===_0x12e80d[_0x48337f(0x20c)][_0x502620][_0x5b0a24]||void 0x0===_0x12e80d[_0x48337f(0x20c)][_0x502620][_0x5b0a24])return Promise[_0x48337f(0x22c)](_0x48337f(0x1f4)+_0xb34d85+'\x20does\x20not\x20have\x20required\x20permission\x20'+_0x502620+'.'+_0x5b0a24+_0x48337f(0x215));if(_0x47fa2d!==_0x12e80d[_0x48337f(0x20c)][_0x502620][_0x5b0a24])return Promise[_0x48337f(0x22c)]('User\x20with\x20address\x20'+_0xb34d85+_0x48337f(0x228)+_0x502620+'.'+_0x5b0a24+_0x48337f(0x235)+_0x47fa2d+',\x20user\x27s\x20permission\x20value:\x20'+_0x12e80d[_0x48337f(0x20c)][_0x502620][_0x5b0a24]);}}}else{if(null===_0x12e80d['permissions'][_0x502620]||void 0x0===_0x12e80d[_0x48337f(0x20c)][_0x502620])return Promise[_0x48337f(0x22c)](_0x48337f(0x1f4)+_0xb34d85+'\x20does\x20not\x20have\x20required\x20permission\x20'+_0x502620+'\x20defined');if(_0x12e80d[_0x48337f(0x20c)][_0x502620]!==_0x88fd2a)return Promise['reject'](_0x48337f(0x1f4)+_0xb34d85+_0x48337f(0x228)+_0x502620+_0x48337f(0x235)+_0x88fd2a+_0x48337f(0x232)+_0x12e80d[_0x48337f(0x20c)][_0x502620]);}}else{function _0x47f117(){_0xc7eb7e=_0x3f75d6;}}}}if(!_[_0x48337f(0x217)](_0x320d41)){for(const _0x49c589 in _0x320d41)if(Object[_0x48337f(0x208)][_0x48337f(0x22f)](_0x320d41,_0x49c589)){if('HtamR'!==_0x48337f(0x23c)){var _0x2c7c9d=_0x320d41[_0x49c589];if(null!==_0x12e80d[_0x48337f(0x20c)][_0x49c589]&&void 0x0!==_0x12e80d[_0x48337f(0x20c)][_0x49c589]){if(_0x48337f(0x20f)==typeof _0x2c7c9d&&_0x48337f(0x20f)==typeof _0x12e80d[_0x48337f(0x20c)][_0x49c589]){for(const _0x1e9413 in _0x2c7c9d)if(Object[_0x48337f(0x208)][_0x48337f(0x22f)](_0x2c7c9d,_0x1e9413)){var _0x205b29=_0x2c7c9d[_0x1e9413];if(null!==_0x12e80d['permissions'][_0x49c589][_0x1e9413]&&void 0x0!==_0x12e80d[_0x48337f(0x20c)][_0x49c589][_0x1e9413]&&_0x205b29!==_0x12e80d['permissions'][_0x49c589][_0x1e9413])return Promise['reject'](_0x48337f(0x1f4)+_0xb34d85+_0x48337f(0x228)+_0x49c589+'.'+_0x1e9413+'.\x20Expected\x20value:\x20'+_0x205b29+_0x48337f(0x232)+_0x12e80d['permissions'][_0x49c589][_0x1e9413]);}}else{if(_0x12e80d[_0x48337f(0x20c)][_0x49c589]!==_0x2c7c9d)return Promise[_0x48337f(0x22c)]('User\x20with\x20address\x20'+_0xb34d85+_0x48337f(0x228)+_0x49c589+_0x48337f(0x235)+_0x2c7c9d+_0x48337f(0x232)+_0x12e80d[_0x48337f(0x20c)][_0x49c589]);}}}else{function _0x4a2a58(){var _0x49d0a4=_0x48337f,_0x2b3153=_0x358753[_0x12322f];if(null!==_0x461b10['permissions'][_0x210de1]&&void 0x0!==_0x2167ac[_0x49d0a4(0x20c)][_0x266b4d]){if('object'==typeof _0x2b3153&&_0x49d0a4(0x20f)==typeof _0x20e1a9[_0x49d0a4(0x20c)][_0x579557]){for(const _0x4c56ce in _0x2b3153)if(_0x597909[_0x49d0a4(0x208)][_0x49d0a4(0x22f)](_0x2b3153,_0x4c56ce)){var _0x2e0380=_0x2b3153[_0x4c56ce];if(null!==_0x3fc179['permissions'][_0x580fb1][_0x4c56ce]&&void 0x0!==_0x20abf8[_0x49d0a4(0x20c)][_0x5b4d9f][_0x4c56ce]&&_0x2e0380!==_0x278d5f['permissions'][_0x2cbddd][_0x4c56ce])return _0x2355a7[_0x49d0a4(0x22c)](_0x49d0a4(0x1f4)+_0x5acbf0+'\x20does\x20not\x20have\x20required\x20permission\x20'+_0x449abc+'.'+_0x4c56ce+'.\x20Expected\x20value:\x20'+_0x2e0380+_0x49d0a4(0x232)+_0x40a6f7[_0x49d0a4(0x20c)][_0x59a453][_0x4c56ce]);}}else{if(_0x1eb2ac['permissions'][_0x181115]!==_0x2b3153)return _0x297a53[_0x49d0a4(0x22c)](_0x49d0a4(0x1f4)+_0x1f7731+_0x49d0a4(0x228)+_0x1e8dc5+_0x49d0a4(0x235)+_0x2b3153+_0x49d0a4(0x232)+_0x59dbdf['permissions'][_0xf168a1]);}}}}}}}),validateUserBalance=(_0x4169dc,_0x50ec70)=>body(_0x4169dc)[_0x4218d5(0x214)](async _0x5cd020=>{var _0x2a891f=_0x4218d5,_0xfabe69=await findByAddress(TYPE['USER'],_0x5cd020);return _0xfabe69?_0xfabe69[_0x2a891f(0x1fb)]<_0x50ec70?Promise['reject'](_0x2a891f(0x1f4)+_0x5cd020+_0x2a891f(0x21f)+_0xfabe69[_0x2a891f(0x1fb)]+'\x0aRequired\x20balance:\x20'+_0x50ec70):void 0x0:Promise['reject'](_0x2a891f(0x203)+_0x5cd020+_0x2a891f(0x202));});module[_0x4218d5(0x233)]['validateUserBalance']=validateUserBalance,module[_0x4218d5(0x233)]['validateUserExistence']=validateUserExistence,module['exports'][_0x4218d5(0x211)]=validateUserPermissions;const validateUserCreation=[inputValidation,uniqueUserValidation];module[_0x4218d5(0x233)]['validateUserCreation']=validateUserCreation;