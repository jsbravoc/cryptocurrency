const _0x59b8=['&wait=4','Invalid\x20transaction','PENDING\x20transaction','finish','forEach','randomBytes','content','fwcdw','PENDING','pMnOs','Received\x20message\x20of\x20unknown\x20type:','bind','info','trace','eventType','findKey','signature','otXPM','CLIENT_EVENTS','return\x20(function()\x20','createHash','1AZJnOE','../utils/logger','apply','constructor','get','http://localhost:8008','exports','Transaction\x20response\x20err','address','myevent','JpSWs','from','BatchList','cancel','5yiATEb','toString','sawtooth-sdk/protobuf','/batches','61435WCFmPD','application/octet-stream','194545ffNzed','tcp://localhost:4004','INVALID','timeout','Connected','underscore','substring','secp256k1','CLIENT_EVENTS_SUBSCRIBE_REQUEST','vcFVp','UNKNOWN','Connecting\x20to\x20validator\x20at\x20','slice','log','update','unref','sendTransactionWithAwait','MessageType','length','link','933506fuTGtT','intkey','sawtooth-sdk/messaging/stream','{}.constructor(\x22return\x20this\x22)(\x20)','1SVXRyv','316699iopqOf','jYpCb','data','394286DJtGQd','getAddress','then','messageType','headerSignature','Unknown\x20transaction','send','map','VALIDATOR_HOST','digest','hex','status','Unknown\x20error','application/json','encode','yKqXi','TransactionHeader','decode','SAWTOOTH_REST_TIMEOUT','publicKeyCreate','cancelToken','prototype','sha256','ecdsaSign','FilterType','http://localhost:8008/state/','axios','sawtooth/state-delta','__proto__','utf8','queryState','Transaction','MgMhP','175715QrxfvZ','pow','319737qhbQtR','warn','env','sendTransaction','onReceive','2qKZBHB','base64','Batch','subscribeToSawtoothEvents','exception','Timeout','token','0000000000000000','create','console','table','connect','xcvit','sawtooth/block-commit','sha512','sawtooth-sdk','post','COMMITTED','0x7f664d71e4200b4a2989558d1f6006d0dac9771a36a546b1a47c384ec9c4f04b'];const _0x1bf7=function(_0x1d493d,_0x584f6d){_0x1d493d=_0x1d493d-0x1af;let _0x3026a9=_0x59b8[_0x1d493d];return _0x3026a9;};const _0x35328a=_0x1bf7;(function(_0x3a52dd,_0x148cef){const _0x3f1dca=_0x1bf7;while(!![]){try{const _0x2aadce=-parseInt(_0x3f1dca(0x1ce))*-parseInt(_0x3f1dca(0x20a))+parseInt(_0x3f1dca(0x1c7))+-parseInt(_0x3f1dca(0x222))*parseInt(_0x3f1dca(0x223))+-parseInt(_0x3f1dca(0x204))*-parseInt(_0x3f1dca(0x208))+-parseInt(_0x3f1dca(0x1f6))*-parseInt(_0x3f1dca(0x1c9))+parseInt(_0x3f1dca(0x226))+-parseInt(_0x3f1dca(0x21e));if(_0x2aadce===_0x148cef)break;else _0x3a52dd['push'](_0x3a52dd['shift']());}catch(_0x4878d2){_0x3a52dd['push'](_0x3a52dd['shift']());}}}(_0x59b8,0x51fb6));const _0x546a34=function(){let _0x1c8bd1=!![];return function(_0x57b5e1,_0x4f7343){const _0x117c85=_0x1c8bd1?function(){const _0x2c5691=_0x1bf7;if('ADcGW'==='ADcGW'){if(_0x4f7343){const _0x1d91d1=_0x4f7343[_0x2c5691(0x1f8)](_0x57b5e1,arguments);return _0x4f7343=null,_0x1d91d1;}}else{function _0x3b3eea(){const _0x2ee616=_0x2c5691;_0x12ffd7=_0x1fc932(_0xd9696b['map'](_0x17c651,_0xe218a0=>{var {transactionFamily:_0x5ad1bf,transactionFamilyVersion:_0x3100f3,inputs:_0x282746,outputs:_0x348bdb,payload:_0xe218a0}=_0xe218a0;return _0x42de16(_0x5ad1bf,_0x3100f3,_0x282746,_0x348bdb,_0xe218a0);}));const _0x5763f1={'headers':{'Content-Type':_0x2ee616(0x209)},'timeout':_0x566510[_0x2ee616(0x1cb)][_0x2ee616(0x1b8)]||0x1388};return _0x2f2ead&&(_0x5763f1[_0x2ee616(0x1ba)]=_0x25ce86),_0x2c963e[_0x2ee616(0x1de)]((_0x685f46['env']['SAWTOOTH_REST']||_0x2ee616(0x1fb))+_0x2ee616(0x207),_0x402a14,_0x5763f1);}}}:function(){};return _0x1c8bd1=![],_0x117c85;};}(),_0x13fc0b=_0x546a34(this,function(){const _0x5ba493=_0x1bf7;let _0xd825c5;try{if(_0x5ba493(0x1ea)!==_0x5ba493(0x1ea)){function _0x2192d7(){return _0x2c0292(_0x428730);}}else{const _0x5ad7c2=Function(_0x5ba493(0x1f4)+_0x5ba493(0x221)+');');_0xd825c5=_0x5ad7c2();}}catch(_0x2dbf01){if(_0x5ba493(0x224)===_0x5ba493(0x224))_0xd825c5=window;else{function _0x3d9c28(){const _0x51af0b=_0x5ba493,_0x4ce933=_0x247f63[_0x51af0b(0x1f9)][_0x51af0b(0x1bb)][_0x51af0b(0x1ec)](_0x2acb01),_0x213d73=_0x108da2[_0x56d095],_0x32aba2=_0x3e6fdf[_0x213d73]||_0x4ce933;_0x4ce933[_0x51af0b(0x1c2)]=_0x37c87e[_0x51af0b(0x1ec)](_0x5accda),_0x4ce933['toString']=_0x32aba2[_0x51af0b(0x205)]['bind'](_0x32aba2),_0x1918d8[_0x213d73]=_0x4ce933;}}}const _0x1bc887=_0xd825c5[_0x5ba493(0x1d7)]=_0xd825c5['console']||{},_0x3a794a=['log',_0x5ba493(0x1ca),_0x5ba493(0x1ed),'error',_0x5ba493(0x1d2),_0x5ba493(0x1d8),_0x5ba493(0x1ee)];for(let _0x46c4b0=0x0;_0x46c4b0<_0x3a794a[_0x5ba493(0x21c)];_0x46c4b0++){const _0x59ab7e=_0x546a34[_0x5ba493(0x1f9)][_0x5ba493(0x1bb)][_0x5ba493(0x1ec)](_0x546a34),_0x59acc6=_0x3a794a[_0x46c4b0],_0xa4b37e=_0x1bc887[_0x59acc6]||_0x59ab7e;_0x59ab7e[_0x5ba493(0x1c2)]=_0x546a34[_0x5ba493(0x1ec)](_0x546a34),_0x59ab7e['toString']=_0xa4b37e['toString'][_0x5ba493(0x1ec)](_0xa4b37e),_0x1bc887[_0x59acc6]=_0x59ab7e;}});_0x13fc0b();const _=require(_0x35328a(0x20f)),secp256k1=require(_0x35328a(0x211)),crypto=require('crypto'),{protobuf}=require(_0x35328a(0x1dd)),axios=require(_0x35328a(0x1c0))[_0x35328a(0x1d6)]({});axios['defaults'][_0x35328a(0x20d)]=0x2710;const {CancelToken}=require(_0x35328a(0x1c0)),privateKey=Buffer['from']((process[_0x35328a(0x1cb)]['SAWTOOTH_PRIVATE_KEY']||_0x35328a(0x1e0))[_0x35328a(0x216)](0x2),_0x35328a(0x1b0)),publicKey=secp256k1[_0x35328a(0x1b9)](privateKey),publicKeyHex=Buffer[_0x35328a(0x201)](publicKey)[_0x35328a(0x205)](_0x35328a(0x1b0)),hash512=_0x17ac67=>crypto[_0x35328a(0x1f5)](_0x35328a(0x1dc))[_0x35328a(0x218)](_0x17ac67)[_0x35328a(0x1af)](_0x35328a(0x1b0)),hash256=_0x3113f1=>crypto['createHash'](_0x35328a(0x1bc))[_0x35328a(0x218)](_0x3113f1)[_0x35328a(0x1af)](_0x35328a(0x1b0)),getAddress=(_0x438994,_0x5c0521)=>{const _0x3443aa=_0x35328a;return hash512(_0x438994)['substring'](0x0,0x6)+hash512(_0x5c0521)[_0x3443aa(0x216)](-0x40);},sign=(_0x6e6686,_0x2ac4aa)=>{const _0x821c33=_0x35328a;return _0x6e6686=hash256(_0x6e6686),Buffer[_0x821c33(0x201)](secp256k1[_0x821c33(0x1bd)](Uint8Array[_0x821c33(0x201)](Buffer[_0x821c33(0x201)](_0x6e6686,_0x821c33(0x1b0))),Uint8Array[_0x821c33(0x201)](_0x2ac4aa))[_0x821c33(0x1f1)])[_0x821c33(0x205)](_0x821c33(0x1b0));};function buildTransaction(_0x1511c3,_0x457411,_0x3be89a,_0x5b7824,_0x4871de){const _0x281e14=_0x35328a;return _0x4871de=Buffer[_0x281e14(0x201)](_0x4871de,_0x281e14(0x1c3)),_0x3be89a=protobuf[_0x281e14(0x1b6)]['encode']({'familyName':_0x1511c3,'familyVersion':_0x457411,'inputs':_0x3be89a,'outputs':_0x5b7824,'signerPublicKey':publicKeyHex,'batcherPublicKey':publicKeyHex,'dependencies':[],'payloadSha512':hash512(_0x4871de),'nonce':crypto[_0x281e14(0x1e6)](0x20)[_0x281e14(0x205)](_0x281e14(0x1b0))})[_0x281e14(0x1e4)](),_0x5b7824=sign(_0x3be89a,privateKey),protobuf[_0x281e14(0x1c5)][_0x281e14(0x1d6)]({'header':_0x3be89a,'headerSignature':_0x5b7824,'payload':_0x4871de});}function buildBatch(_0x317331){const _0x1b383a=_0x35328a;var _0x25c809=protobuf['BatchHeader'][_0x1b383a(0x1b4)]({'signerPublicKey':publicKeyHex,'transactionIds':_0x317331[_0x1b383a(0x22d)](_0x140c6a=>_0x140c6a[_0x1b383a(0x22a)])})['finish'](),_0x4a7b51=sign(_0x25c809,privateKey),_0x317331=protobuf[_0x1b383a(0x1d0)][_0x1b383a(0x1d6)]({'header':_0x25c809,'headerSignature':_0x4a7b51,'transactions':_0x317331});return protobuf['BatchList']['encode']({'batches':[_0x317331]})['finish']();}module['exports'][_0x35328a(0x227)]=getAddress,module['exports']['sendTransaction']=async function(_0x4223ad,_0x1187fe){const _0x355289=_0x35328a;_0x4223ad=buildBatch(_[_0x355289(0x22d)](_0x4223ad,_0x514238=>{var {transactionFamily:_0x56317c,transactionFamilyVersion:_0x4bf52d,inputs:_0x8c1ef3,outputs:_0x154b62,payload:_0x514238}=_0x514238;return buildTransaction(_0x56317c,_0x4bf52d,_0x8c1ef3,_0x154b62,_0x514238);}));const _0x51a4bf={'headers':{'Content-Type':_0x355289(0x209)},'timeout':process[_0x355289(0x1cb)]['SAWTOOTH_REST_TIMEOUT']||0x1388};return _0x1187fe&&(_0x51a4bf[_0x355289(0x1ba)]=_0x1187fe),axios[_0x355289(0x1de)]((process[_0x355289(0x1cb)]['SAWTOOTH_REST']||_0x355289(0x1fb))+_0x355289(0x207),_0x4223ad,_0x51a4bf);};const TIMEOUT=0x2710;module[_0x35328a(0x1fc)][_0x35328a(0x21a)]=async function(_0x225f76){return new Promise((_0x49ca3d,_0x6b2bf5)=>{let _0x216a53,_0x40a242;const _0x1ed604=CancelToken['source']();let _0x21f688=!0x1;function _0x190a8d(_0x385ede,_0x32b480){const _0x46e9c3=_0x1bf7;_0x21f688||(_0x21f688=!0x0,_0x216a53&&(clearTimeout(_0x216a53),_0x216a53[_0x46e9c3(0x219)]()),_0x40a242&&(clearTimeout(_0x40a242),_0x40a242[_0x46e9c3(0x219)]()),_0x1ed604&&_0x1ed604[_0x46e9c3(0x203)](),_0x385ede&&_0x6b2bf5(_0x385ede),_0x49ca3d(_0x32b480));}_0x216a53=setTimeout(()=>{const _0xe7629c=_0x1bf7;_0x190a8d(new Error(_0xe7629c(0x1d3)));},TIMEOUT);let _0x4aa8b6;(async()=>{const _0x424366=_0x1bf7;try{if(_0x424366(0x1e8)===_0x424366(0x1f2)){function _0x1e8ae1(){const _0x2298c1=_0x424366;var _0x393fb9;_0x200dfc['messageType']===_0x43448a[_0x2298c1(0x21b)][_0x2298c1(0x1f3)]?({events:_0x393fb9}=_0x281c08[_0x2298c1(0x1b7)](_0x15dd1d[_0x2298c1(0x1e7)]),_0x3df852[_0x2298c1(0x1e5)](_0x393fb9,_0x2aee26=>{const _0x2840a6=_0x2298c1;_0x2840a6(0x1ff)==_0x2aee26[_0x2840a6(0x1ef)]||_0x2840a6(0x1db)===_0x2aee26['eventType']||_0x2aee26[_0x2840a6(0x1ef)];})):_0x1b8059[_0x2298c1(0x1ca)](_0x2298c1(0x1eb),_0x19450b['messageType']);}}else{var _0x54892d=await module['exports'][_0x424366(0x1cc)](_0x225f76,_0x1ed604[_0x424366(0x1d4)]);if(!_0x54892d[_0x424366(0x225)]||!_0x54892d[_0x424366(0x225)][_0x424366(0x21d)])return _0x190a8d(new Error(_0x424366(0x1fd)));_0x4aa8b6=_0x54892d[_0x424366(0x225)]['link'];}}catch(_0x27f5c7){return _0x190a8d(_0x27f5c7);}try{let _0x4da539,_0x45bf96,_0x5982c2=0x0;for(;_0x424366(0x1df)!==_0x4da539&&_0x5982c2<0x14;){if(_0x21f688)return;await new Promise(_0x32d745=>{const _0x407e30=_0x424366;if(_0x407e30(0x213)===_0x407e30(0x213))_0x40a242=setTimeout(_0x32d745,0xc8+0x64*Math[_0x407e30(0x1c8)](0x2,_0x5982c2));else{function _0x5e533e(){const _0x1d69fc=_0x407e30;_0x4c065d[_0x1d69fc(0x1cd)](_0x2f43fe),_0x2b8cfd()[_0x1d69fc(0x228)](_0x40f43b),_0x318681[_0x1d69fc(0x217)](_0x1d69fc(0x20e));}}});var _0x20168d=await axios[_0x424366(0x1fa)](_0x4aa8b6+_0x424366(0x1e1),{'cancelToken':_0x1ed604[_0x424366(0x1d4)]});if(_0x20168d['data']&&_0x20168d[_0x424366(0x225)]['data']&&_0x20168d[_0x424366(0x225)][_0x424366(0x225)][0x0]&&(_0x45bf96=_0x20168d[_0x424366(0x225)],_0x4da539=_0x20168d[_0x424366(0x225)][_0x424366(0x225)][0x0][_0x424366(0x1b1)],_0x424366(0x20c)===_0x4da539))break;_0x5982c2+=0x1;}if(_0x424366(0x1df)!==_0x4da539){if('jQZRj'!==_0x424366(0x200)){if(_0x424366(0x20c)===_0x4da539){if(_0x424366(0x1c6)===_0x424366(0x1c6)){const _0x30cd42=new Error(_0x424366(0x1e2));return _0x30cd42[_0x424366(0x225)]=_0x45bf96,_0x190a8d(_0x30cd42);}else{function _0x120643(){const _0x18c1b6=_0x424366;var _0xc23c9f=_0x376b5b['BatchHeader'][_0x18c1b6(0x1b4)]({'signerPublicKey':_0x41dd0d,'transactionIds':_0x567105[_0x18c1b6(0x22d)](_0x1fdc62=>_0x1fdc62[_0x18c1b6(0x22a)])})[_0x18c1b6(0x1e4)](),_0x2303e3=_0x293095(_0xc23c9f,_0x13fc4c),_0x567105=_0x519a19[_0x18c1b6(0x1d0)]['create']({'header':_0xc23c9f,'headerSignature':_0x2303e3,'transactions':_0x567105});return _0x22daff[_0x18c1b6(0x202)][_0x18c1b6(0x1b4)]({'batches':[_0x567105]})[_0x18c1b6(0x1e4)]();}}}if(_0x424366(0x1e9)!==_0x4da539)return _0x424366(0x214)===_0x4da539?_0x190a8d(new Error(_0x424366(0x22b))):_0x190a8d(new Error(_0x424366(0x1b2)));{if(_0x424366(0x1da)!=='xcvit'){function _0x2ce9e8(){const _0x366c95=_0x424366,_0x1669c5=_0x504290[_0x366c95(0x1f8)](_0x5e003f,arguments);return _0x2bddd9=null,_0x1669c5;}}else{const _0x47b917=new Error(_0x424366(0x1e3));return _0x47b917[_0x424366(0x225)]={'statusLink':_0x4aa8b6},_0x190a8d(_0x47b917);}}}else{function _0x1e6ad6(){const _0x5e4773=_0x424366;'myevent'==_0x3b8c5d[_0x5e4773(0x1ef)]||_0x5e4773(0x1db)===_0x4ae240['eventType']||_0x41d560[_0x5e4773(0x1ef)];}}}}catch(_0x495cea){if(_0x424366(0x1b5)!==_0x424366(0x1b5)){function _0x2447a2(){var {transactionFamily:_0x4775f0,transactionFamilyVersion:_0x511404,inputs:_0x452491,outputs:_0x2e087d,payload:_0xe60c91}=_0xe60c91;return _0x13698d(_0x4775f0,_0x511404,_0x452491,_0x2e087d,_0xe60c91);}}else return _0x190a8d(_0x495cea);}return _0x190a8d(null,'ok');})();});},module[_0x35328a(0x1fc)][_0x35328a(0x1c4)]=async function(_0x2ea0e2,_0x3dba90){const _0x3156ed=_0x35328a,_0x4e069a={'headers':{'Content-Type':_0x3156ed(0x1b3)}};_0x3dba90&&(_0x4e069a[_0x3156ed(0x1ba)]=_0x3dba90);let _0x4035a3;try{_0x4035a3=await axios[_0x3156ed(0x1fa)](_0x3156ed(0x1bf)+_0x2ea0e2,_0x4e069a);}catch(_0x5e87f1){return null;}if(!_0x4035a3||!_0x4035a3[_0x3156ed(0x225)]||!_0x4035a3['data']['data'])return null;const _0x5a78ec=Buffer['from'](_0x4035a3['data'][_0x3156ed(0x225)],_0x3156ed(0x1cf));return JSON['parse'](_0x5a78ec[_0x3156ed(0x205)](_0x3156ed(0x1c3)));};const {Stream}=require(_0x35328a(0x220)),{Message,EventList,EventSubscription,EventFilter,ClientEventsSubscribeRequest,ClientEventsSubscribeResponse}=require(_0x35328a(0x206)),{logFormatted,SEVERITY}=require(_0x35328a(0x1f7)),PREFIX=hash512(_0x35328a(0x21f))[_0x35328a(0x210)](0x0,0x6),NULL_BLOCK_ID=_0x35328a(0x1d5),VALIDATOR_HOST=process[_0x35328a(0x1cb)][_0x35328a(0x22e)]||_0x35328a(0x20b);logFormatted(_0x35328a(0x215)+VALIDATOR_HOST);const stream=new Stream(VALIDATOR_HOST);module[_0x35328a(0x1fc)][_0x35328a(0x1d1)]=()=>new Promise(_0x38de56=>{const _0x5e511d=_0x35328a;stream[_0x5e511d(0x1d9)](()=>{const _0xcb0625=_0x5e511d;stream['onReceive'](handleEvent),subscribe()[_0xcb0625(0x228)](_0x38de56),console['log'](_0xcb0625(0x20e));});});const handleEvent=_0x1b4212=>{const _0x56133d=_0x35328a;var _0xfa51ff;_0x1b4212[_0x56133d(0x229)]===Message['MessageType'][_0x56133d(0x1f3)]?({events:_0xfa51ff}=EventList['decode'](_0x1b4212[_0x56133d(0x1e7)]),_['forEach'](_0xfa51ff,_0x3fa433=>{const _0x43667b=_0x56133d;'myevent'==_0x3fa433[_0x43667b(0x1ef)]||'sawtooth/block-commit'===_0x3fa433[_0x43667b(0x1ef)]||_0x3fa433[_0x43667b(0x1ef)];})):console['warn'](_0x56133d(0x1eb),_0x1b4212[_0x56133d(0x229)]);},subscribe=()=>{const _0x5b76c6=_0x35328a;var _0x26fbe7=EventSubscription[_0x5b76c6(0x1d6)]({'eventType':'sawtooth/block-commit'}),_0x599e6d=EventSubscription['create']({'eventType':_0x5b76c6(0x1c1),'filters':[EventFilter[_0x5b76c6(0x1d6)]({'key':_0x5b76c6(0x1fe),'matchString':'^'+PREFIX+'.*','filterType':EventFilter[_0x5b76c6(0x1be)]['REGEX_ANY']})]}),_0x215017=EventSubscription['create']({'eventType':_0x5b76c6(0x1ff)});return stream[_0x5b76c6(0x22c)](Message[_0x5b76c6(0x21b)][_0x5b76c6(0x212)],ClientEventsSubscribeRequest[_0x5b76c6(0x1b4)]({'lastKnownBlockIds':[NULL_BLOCK_ID],'subscriptions':[_0x26fbe7,_0x599e6d,_0x215017]})[_0x5b76c6(0x1e4)]())[_0x5b76c6(0x228)](_0x2b6d1e=>ClientEventsSubscribeResponse['decode'](_0x2b6d1e))[_0x5b76c6(0x228)](_0x4c7668=>{const _0x37e16f=_0x5b76c6;if('zhlqt'!=='zhlqt'){function _0x32f978(){const _0x52a7b5=_0x1bf7;if(_0x52a7b5(0x20c)===_0x86cf9a){const _0x474879=new _0x12a2c9('Invalid\x20transaction');return _0x474879[_0x52a7b5(0x225)]=_0x12465b,_0xd30a8c(_0x474879);}if(_0x52a7b5(0x1e9)!==_0x39d5a6)return _0x52a7b5(0x214)===_0x2eae49?_0x876d04(new _0x51aba4(_0x52a7b5(0x22b))):_0x3efc57(new _0x1559fd(_0x52a7b5(0x1b2)));{const _0x1431f0=new _0x2d15d6(_0x52a7b5(0x1e3));return _0x1431f0[_0x52a7b5(0x225)]={'statusLink':_0x250ca5},_0x50b2e1(_0x1431f0);}}}else{var _0x5f3f39=_[_0x37e16f(0x1f0)](ClientEventsSubscribeResponse['Status'],_0x4c35d5=>_0x4c35d5===_0x4c7668[_0x37e16f(0x1b1)]);if('OK'!==_0x5f3f39)throw new Error('Validator\x20responded\x20with\x20status\x20\x22'+_0x5f3f39+'\x22');}});};