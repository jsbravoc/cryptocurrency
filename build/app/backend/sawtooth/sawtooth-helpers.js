const _0x1a7a=['sawtooth-sdk/protobuf','connect','Cniax','BatchList','publicKeyCreate','1bIdqPQ','CLIENT_EVENTS','COMMITTED','REGEX_ANY','get','http://localhost:8008/state/','console','length','299790PUDtFD','FilterType','env','from','cancelToken','slice','NidnZ','ecdsaSign','&wait=4','Transaction','INVALID','Received\x20message\x20of\x20unknown\x20type:','digest','Validator\x20responded\x20with\x20status\x20\x22','secp256k1','subscribeToSawtoothEvents','sha256','status','log','application/octet-stream','CLIENT_EVENTS_SUBSCRIBE_REQUEST','1155457USogmi','base64','NaiQo','Connected','axios','address','MessageType','messageType','create','106310UxArzy','timeout','Unknown\x20error','http://localhost:8008','send','map','sendTransactionWithAwait','sawtooth/block-commit','randomBytes','token','ADsiL','then','sawtooth-sdk','BatchHeader','getAddress','__proto__','15CdUIPV','constructor','data','Unknown\x20transaction','1hHpapC','trace','prototype','application/json','decode','PENDING','encode','SAWTOOTH_PRIVATE_KEY','Batch','unref','findKey','PihwM','utf8','onReceive','Transaction\x20response\x20err','queryState','0x7f664d71e4200b4a2989558d1f6006d0dac9771a36a546b1a47c384ec9c4f04b','substring','hex','finish','exception','tcp://localhost:4004','cancel','JIwrt','../utils/logger','return\x20(function()\x20','headerSignature','eventType','530404mnUBFo','error','toString','0000000000000000','sawtooth/state-delta','update','warn','apply','fGGOX','Invalid\x20transaction','sendTransaction','sha512','1092055elZvmW','myevent','underscore','post','51789UHFIWK','forEach','source','1493749rTCCst','Connecting\x20to\x20validator\x20at\x20','RWWFB','createHash','exports','sawtooth-sdk/messaging/stream','bind'];const _0x1382=function(_0x2b8cbb,_0x2b398b){_0x2b8cbb=_0x2b8cbb-0xac;let _0x39578e=_0x1a7a[_0x2b8cbb];return _0x39578e;};const _0x1034db=_0x1382;(function(_0x54ae6a,_0x336f1f){const _0x3ed2e6=_0x1382;while(!![]){try{const _0x3350a1=parseInt(_0x3ed2e6(0xc4))+parseInt(_0x3ed2e6(0xcd))+parseInt(_0x3ed2e6(0xaf))+parseInt(_0x3ed2e6(0x11c))*-parseInt(_0x3ed2e6(0x109))+-parseInt(_0x3ed2e6(0xdd))*parseInt(_0x3ed2e6(0x10d))+-parseInt(_0x3ed2e6(0xfd))+-parseInt(_0x3ed2e6(0x110))*-parseInt(_0x3ed2e6(0xe1));if(_0x3350a1===_0x336f1f)break;else _0x54ae6a['push'](_0x54ae6a['shift']());}catch(_0xe532ee){_0x54ae6a['push'](_0x54ae6a['shift']());}}}(_0x1a7a,0xa028c));const _0x29659=function(){let _0x14a8c7=!![];return function(_0x1f11c5,_0x73ed50){const _0x5b9f23=_0x1382;if(_0x5b9f23(0xf8)!==_0x5b9f23(0x119)){const _0xb2bba1=_0x14a8c7?function(){const _0x21f262=_0x5b9f23;if(_0x73ed50){if(_0x21f262(0xb5)===_0x21f262(0xb5)){const _0xaa5990=_0x73ed50['apply'](_0x1f11c5,arguments);return _0x73ed50=null,_0xaa5990;}else{function _0x189abc(){const _0xec8911=_0x21f262;var _0x2915d6=_0x3db4ea['findKey'](_0x2e7355['Status'],_0x110fd1=>_0x110fd1===_0x41692b[_0xec8911(0xc0)]);if('OK'!==_0x2915d6)throw new _0x32e375(_0xec8911(0xbc)+_0x2915d6+'\x22');}}}}:function(){};return _0x14a8c7=![],_0xb2bba1;}else{function _0x2f9ca8(){const _0x5b89c2=_0x5b9f23,_0x478c42=_0x4b7dce[_0x5b89c2(0xde)][_0x5b89c2(0xe3)][_0x5b89c2(0x116)](_0xd7cb35),_0x67622e=_0x5343b7[_0x4d92cd],_0x260f0a=_0x5758a2[_0x67622e]||_0x478c42;_0x478c42[_0x5b89c2(0xdc)]=_0x5195f4[_0x5b89c2(0x116)](_0x37b71a),_0x478c42[_0x5b89c2(0xff)]=_0x260f0a['toString'][_0x5b89c2(0x116)](_0x260f0a),_0x366102[_0x67622e]=_0x478c42;}}};}(),_0x1f8aa7=_0x29659(this,function(){const _0x1ce82f=_0x1382,_0x4b1f36=function(){const _0x5cf275=_0x1382;if(_0x5cf275(0xec)===_0x5cf275(0xec)){let _0x14f74b;try{_0x14f74b=Function(_0x5cf275(0xfa)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4a0ec8){_0x14f74b=window;}return _0x14f74b;}else{function _0x4a7d27(){const _0x39feed=_0x5cf275;'myevent'==_0x1a3237[_0x39feed(0xfc)]||_0x39feed(0xd4)===_0x344a6d[_0x39feed(0xfc)]||_0x5a25b7[_0x39feed(0xfc)];}}},_0x27fff2=_0x4b1f36(),_0x30a545=_0x27fff2[_0x1ce82f(0xad)]=_0x27fff2[_0x1ce82f(0xad)]||{},_0x3add4b=['log',_0x1ce82f(0x103),'info',_0x1ce82f(0xfe),_0x1ce82f(0xf5),'table',_0x1ce82f(0xe2)];for(let _0x7d2803=0x0;_0x7d2803<_0x3add4b[_0x1ce82f(0xae)];_0x7d2803++){const _0x4ee0dd=_0x29659[_0x1ce82f(0xde)][_0x1ce82f(0xe3)]['bind'](_0x29659),_0x114eaa=_0x3add4b[_0x7d2803],_0x5dec59=_0x30a545[_0x114eaa]||_0x4ee0dd;_0x4ee0dd[_0x1ce82f(0xdc)]=_0x29659[_0x1ce82f(0x116)](_0x29659),_0x4ee0dd[_0x1ce82f(0xff)]=_0x5dec59['toString'][_0x1ce82f(0x116)](_0x5dec59),_0x30a545[_0x114eaa]=_0x4ee0dd;}});_0x1f8aa7();const _=require(_0x1034db(0x10b)),secp256k1=require(_0x1034db(0xbd)),crypto=require('crypto'),{protobuf}=require(_0x1034db(0xd9)),axios=require('axios')[_0x1034db(0xcc)]({});axios['defaults'][_0x1034db(0xce)]=0x2710;const {CancelToken}=require(_0x1034db(0xc8)),privateKey=Buffer[_0x1034db(0xb2)]((process[_0x1034db(0xb1)][_0x1034db(0xe8)]||_0x1034db(0xf1))['slice'](0x2),_0x1034db(0xf3)),publicKey=secp256k1[_0x1034db(0x11b)](privateKey),publicKeyHex=Buffer['from'](publicKey)[_0x1034db(0xff)]('hex'),hash512=_0x578076=>crypto[_0x1034db(0x113)](_0x1034db(0x108))[_0x1034db(0x102)](_0x578076)[_0x1034db(0xbb)](_0x1034db(0xf3)),hash256=_0x205e34=>crypto['createHash'](_0x1034db(0xbf))['update'](_0x205e34)[_0x1034db(0xbb)](_0x1034db(0xf3)),getAddress=(_0x2aa2ad,_0x31f2ea)=>{const _0x34fbcd=_0x1034db;return hash512(_0x2aa2ad)[_0x34fbcd(0xf2)](0x0,0x6)+hash512(_0x31f2ea)['slice'](-0x40);},sign=(_0x4bfb4b,_0x47ce7b)=>{const _0x557eb9=_0x1034db;return _0x4bfb4b=hash256(_0x4bfb4b),Buffer[_0x557eb9(0xb2)](secp256k1[_0x557eb9(0xb6)](Uint8Array['from'](Buffer[_0x557eb9(0xb2)](_0x4bfb4b,'hex')),Uint8Array['from'](_0x47ce7b))['signature'])['toString'](_0x557eb9(0xf3));};function buildTransaction(_0x3d663d,_0x52962c,_0x2d683a,_0x216835,_0x35091e){const _0x1e7f3c=_0x1034db;return _0x35091e=Buffer[_0x1e7f3c(0xb2)](_0x35091e,_0x1e7f3c(0xed)),_0x2d683a=protobuf['TransactionHeader'][_0x1e7f3c(0xe7)]({'familyName':_0x3d663d,'familyVersion':_0x52962c,'inputs':_0x2d683a,'outputs':_0x216835,'signerPublicKey':publicKeyHex,'batcherPublicKey':publicKeyHex,'dependencies':[],'payloadSha512':hash512(_0x35091e),'nonce':crypto[_0x1e7f3c(0xd5)](0x20)[_0x1e7f3c(0xff)](_0x1e7f3c(0xf3))})['finish'](),_0x216835=sign(_0x2d683a,privateKey),protobuf[_0x1e7f3c(0xb8)][_0x1e7f3c(0xcc)]({'header':_0x2d683a,'headerSignature':_0x216835,'payload':_0x35091e});}function buildBatch(_0x58b419){const _0x2122e4=_0x1034db;var _0x590d56=protobuf[_0x2122e4(0xda)][_0x2122e4(0xe7)]({'signerPublicKey':publicKeyHex,'transactionIds':_0x58b419[_0x2122e4(0xd2)](_0x33fe30=>_0x33fe30[_0x2122e4(0xfb)])})[_0x2122e4(0xf4)](),_0x36cb7f=sign(_0x590d56,privateKey),_0x58b419=protobuf[_0x2122e4(0xe9)][_0x2122e4(0xcc)]({'header':_0x590d56,'headerSignature':_0x36cb7f,'transactions':_0x58b419});return protobuf[_0x2122e4(0x11a)]['encode']({'batches':[_0x58b419]})[_0x2122e4(0xf4)]();}module[_0x1034db(0x114)][_0x1034db(0xdb)]=getAddress,module[_0x1034db(0x114)][_0x1034db(0x107)]=async function(_0x9a9772,_0xae3094){const _0x1d3670=_0x1034db;_0x9a9772=buildBatch(_[_0x1d3670(0xd2)](_0x9a9772,_0x420fab=>{var {transactionFamily:_0x2c9231,transactionFamilyVersion:_0x5f4845,inputs:_0xfb1f04,outputs:_0x4e1e96,payload:_0x420fab}=_0x420fab;return buildTransaction(_0x2c9231,_0x5f4845,_0xfb1f04,_0x4e1e96,_0x420fab);}));const _0x216759={'headers':{'Content-Type':_0x1d3670(0xc2)}};return _0xae3094&&(_0x216759[_0x1d3670(0xb3)]=_0xae3094),axios[_0x1d3670(0x10c)]((process[_0x1d3670(0xb1)]['SAWTOOTH_REST']||_0x1d3670(0xd0))+'/batches',_0x9a9772,_0x216759);};const TIMEOUT=0x2710;module[_0x1034db(0x114)][_0x1034db(0xd3)]=async function(_0x4d14d7){return new Promise((_0x443ab0,_0x276af7)=>{const _0x594a7e=_0x1382;let _0x23904f,_0x645e07;const _0x5ec0dc=CancelToken[_0x594a7e(0x10f)]();let _0x414d11=!0x1;function _0x17c5f0(_0x1df00b,_0x56a3fb){const _0x4bdaca=_0x594a7e;_0x414d11||(_0x414d11=!0x0,_0x23904f&&(clearTimeout(_0x23904f),_0x23904f[_0x4bdaca(0xea)]()),_0x645e07&&(clearTimeout(_0x645e07),_0x645e07[_0x4bdaca(0xea)]()),_0x5ec0dc&&_0x5ec0dc[_0x4bdaca(0xf7)](),_0x1df00b&&_0x276af7(_0x1df00b),_0x443ab0(_0x56a3fb));}_0x23904f=setTimeout(()=>{if('tKHZE'!=='tKHZE'){function _0x19e532(){return _0x3e29e3(_0x2cf837);}}else _0x17c5f0(new Error('Timeout'));},TIMEOUT);let _0x327248;(async()=>{const _0x381372=_0x594a7e;try{if(_0x381372(0x105)==='fGGOX'){var _0x459fda=await module['exports'][_0x381372(0x107)](_0x4d14d7,_0x5ec0dc[_0x381372(0xd6)]);if(!_0x459fda[_0x381372(0xdf)]||!_0x459fda['data']['link'])return _0x17c5f0(new Error(_0x381372(0xef)));_0x327248=_0x459fda[_0x381372(0xdf)]['link'];}else{function _0x5d7848(){const _0x47b0b2=_0x381372,_0x41527f=_0x3e6b18[_0x47b0b2(0x104)](_0x5477da,arguments);return _0x489b6d=null,_0x41527f;}}}catch(_0xb3c1a7){return _0x17c5f0(_0xb3c1a7);}try{let _0x99794f,_0x1f3ea3,_0x2c9e5c=0x0;for(;_0x381372(0x11e)!==_0x99794f&&_0x2c9e5c<0x14;){if(_0x414d11)return;await new Promise(_0x4fe5ea=>{_0x645e07=setTimeout(_0x4fe5ea,0xc8+0x64*Math['pow'](0x2,_0x2c9e5c));});var _0x37e274=await axios['get'](_0x327248+_0x381372(0xb7),{'cancelToken':_0x5ec0dc[_0x381372(0xd6)]});if(_0x37e274[_0x381372(0xdf)]&&_0x37e274['data'][_0x381372(0xdf)]&&_0x37e274['data'][_0x381372(0xdf)][0x0]&&(_0x1f3ea3=_0x37e274[_0x381372(0xdf)],_0x99794f=_0x37e274[_0x381372(0xdf)][_0x381372(0xdf)][0x0][_0x381372(0xc0)],'INVALID'===_0x99794f))break;_0x2c9e5c+=0x1;}if('COMMITTED'!==_0x99794f){if(_0x381372(0xb9)===_0x99794f){const _0x1979a1=new Error(_0x381372(0x106));return _0x1979a1[_0x381372(0xdf)]=_0x1f3ea3,_0x17c5f0(_0x1979a1);}if(_0x381372(0xe6)!==_0x99794f)return'UNKNOWN'===_0x99794f?_0x17c5f0(new Error(_0x381372(0xe0))):_0x17c5f0(new Error(_0x381372(0xcf)));{if(_0x381372(0x112)===_0x381372(0x112)){const _0x2bcf62=new Error('PENDING\x20transaction');return _0x2bcf62[_0x381372(0xdf)]={'statusLink':_0x327248},_0x17c5f0(_0x2bcf62);}else{function _0x4bd668(){const _0x57af6e=_0x381372;_0x4b503a[_0x57af6e(0x118)](()=>{const _0x135c13=_0x57af6e;_0xc21cba[_0x135c13(0xee)](_0x326147),_0x587d69()[_0x135c13(0xd8)](_0x2ecd49),_0x2a599b[_0x135c13(0xc1)](_0x135c13(0xc7));});}}}}}catch(_0x2f7819){return _0x17c5f0(_0x2f7819);}return _0x17c5f0(null,'ok');})();});},module[_0x1034db(0x114)][_0x1034db(0xf0)]=async function(_0x2916b8,_0x3dc5de){const _0x1d3d8b=_0x1034db,_0x5b8934={'headers':{'Content-Type':_0x1d3d8b(0xe4)}};_0x3dc5de&&(_0x5b8934[_0x1d3d8b(0xb3)]=_0x3dc5de);let _0x4cdead;try{if('TSstW'!==_0x1d3d8b(0xc6))_0x4cdead=await axios[_0x1d3d8b(0x120)](_0x1d3d8b(0xac)+_0x2916b8,_0x5b8934);else{function _0x289d01(){const _0x115877=_0x1d3d8b;return _0x325069(_0xc253a)[_0x115877(0xf2)](0x0,0x6)+_0x77d53(_0x55822c)[_0x115877(0xb4)](-0x40);}}}catch(_0x55de9d){if(_0x1d3d8b(0xd7)!==_0x1d3d8b(0xd7)){function _0x2688f0(){const _0x1831c1=_0x1d3d8b;var _0xaf0e4e=_0x4cce5c[_0x1831c1(0xcc)]({'eventType':_0x1831c1(0xd4)}),_0x4ed1a0=_0xfbf7d[_0x1831c1(0xcc)]({'eventType':'sawtooth/state-delta','filters':[_0x291dd1[_0x1831c1(0xcc)]({'key':_0x1831c1(0xc9),'matchString':'^'+_0x1dc410+'.*','filterType':_0x4f44b4[_0x1831c1(0xb0)][_0x1831c1(0x11f)]})]}),_0x95907f=_0x4ea58d[_0x1831c1(0xcc)]({'eventType':_0x1831c1(0x10a)});return _0x1367a2[_0x1831c1(0xd1)](_0x4f4c6e[_0x1831c1(0xca)][_0x1831c1(0xc3)],_0x4e4c86[_0x1831c1(0xe7)]({'lastKnownBlockIds':[_0x3631cf],'subscriptions':[_0xaf0e4e,_0x4ed1a0,_0x95907f]})[_0x1831c1(0xf4)]())[_0x1831c1(0xd8)](_0x3ad8eb=>_0x449c69[_0x1831c1(0xe5)](_0x3ad8eb))['then'](_0x1c3705=>{const _0xb330fe=_0x1831c1;var _0x3c66be=_0xedff6[_0xb330fe(0xeb)](_0x1358ba['Status'],_0x4f423e=>_0x4f423e===_0x1c3705[_0xb330fe(0xc0)]);if('OK'!==_0x3c66be)throw new _0x2c6d92(_0xb330fe(0xbc)+_0x3c66be+'\x22');});}}else return null;}if(!_0x4cdead||!_0x4cdead['data']||!_0x4cdead['data'][_0x1d3d8b(0xdf)])return null;const _0x4b4472=Buffer[_0x1d3d8b(0xb2)](_0x4cdead['data'][_0x1d3d8b(0xdf)],_0x1d3d8b(0xc5));return JSON['parse'](_0x4b4472[_0x1d3d8b(0xff)](_0x1d3d8b(0xed)));};const {Stream}=require(_0x1034db(0x115)),{Message,EventList,EventSubscription,EventFilter,ClientEventsSubscribeRequest,ClientEventsSubscribeResponse}=require(_0x1034db(0x117)),{logFormatted,SEVERITY}=require(_0x1034db(0xf9)),PREFIX=hash512('intkey')[_0x1034db(0xf2)](0x0,0x6),NULL_BLOCK_ID=_0x1034db(0x100),VALIDATOR_HOST=process[_0x1034db(0xb1)]['VALIDATOR_HOST']||_0x1034db(0xf6);logFormatted(_0x1034db(0x111)+VALIDATOR_HOST);const stream=new Stream(VALIDATOR_HOST);module['exports'][_0x1034db(0xbe)]=()=>new Promise(_0x3f0c63=>{const _0x2bcd63=_0x1034db;stream[_0x2bcd63(0x118)](()=>{const _0x9c9032=_0x2bcd63;stream['onReceive'](handleEvent),subscribe()[_0x9c9032(0xd8)](_0x3f0c63),console[_0x9c9032(0xc1)](_0x9c9032(0xc7));});});const handleEvent=_0x792b8f=>{const _0x327604=_0x1034db;var _0x3b94d8;_0x792b8f[_0x327604(0xcb)]===Message[_0x327604(0xca)][_0x327604(0x11d)]?({events:_0x3b94d8}=EventList[_0x327604(0xe5)](_0x792b8f['content']),_[_0x327604(0x10e)](_0x3b94d8,_0x55c963=>{const _0x22f8a4=_0x327604;_0x22f8a4(0x10a)==_0x55c963[_0x22f8a4(0xfc)]||_0x22f8a4(0xd4)===_0x55c963[_0x22f8a4(0xfc)]||_0x55c963[_0x22f8a4(0xfc)];})):console['warn'](_0x327604(0xba),_0x792b8f[_0x327604(0xcb)]);},subscribe=()=>{const _0x578451=_0x1034db;var _0x3b1a3e=EventSubscription[_0x578451(0xcc)]({'eventType':_0x578451(0xd4)}),_0x40e6e5=EventSubscription[_0x578451(0xcc)]({'eventType':_0x578451(0x101),'filters':[EventFilter[_0x578451(0xcc)]({'key':_0x578451(0xc9),'matchString':'^'+PREFIX+'.*','filterType':EventFilter[_0x578451(0xb0)]['REGEX_ANY']})]}),_0x227064=EventSubscription[_0x578451(0xcc)]({'eventType':'myevent'});return stream[_0x578451(0xd1)](Message[_0x578451(0xca)][_0x578451(0xc3)],ClientEventsSubscribeRequest[_0x578451(0xe7)]({'lastKnownBlockIds':[NULL_BLOCK_ID],'subscriptions':[_0x3b1a3e,_0x40e6e5,_0x227064]})[_0x578451(0xf4)]())[_0x578451(0xd8)](_0x3896b9=>ClientEventsSubscribeResponse['decode'](_0x3896b9))[_0x578451(0xd8)](_0x38f04b=>{const _0x563a4a=_0x578451;var _0x1d007c=_[_0x563a4a(0xeb)](ClientEventsSubscribeResponse['Status'],_0x526d00=>_0x526d00===_0x38f04b[_0x563a4a(0xc0)]);if('OK'!==_0x1d007c)throw new Error(_0x563a4a(0xbc)+_0x1d007c+'\x22');});};